<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Nelson\Nygaard R Training Blog: Geospatial Data</title>

<meta property="description" itemprop="description" content="An introduction to geospatial data in R with a focus on sf and leaflet"/>

<link rel="canonical" href="https://perkinsandwill.github.io/nn_r_training/posts/geospatial-data/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-01-14"/>
<meta property="article:created" itemprop="dateCreated" content="2021-01-14"/>
<meta name="article:author" content="Bryan Blanc"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Nelson\Nygaard R Training Blog: Geospatial Data"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="An introduction to geospatial data in R with a focus on sf and leaflet"/>
<meta property="og:url" content="https://perkinsandwill.github.io/nn_r_training/posts/geospatial-data/"/>
<meta property="og:image" content="https://perkinsandwill.github.io/nn_r_training/posts/geospatial-data/geospatial-data_files/figure-html5/unnamed-chunk-9-1.png"/>
<meta property="og:image:width" content="1248"/>
<meta property="og:image:height" content="576"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Nelson\Nygaard R Training Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Nelson\Nygaard R Training Blog: Geospatial Data"/>
<meta property="twitter:description" content="An introduction to geospatial data in R with a focus on sf and leaflet"/>
<meta property="twitter:url" content="https://perkinsandwill.github.io/nn_r_training/posts/geospatial-data/"/>
<meta property="twitter:image" content="https://perkinsandwill.github.io/nn_r_training/posts/geospatial-data/geospatial-data_files/figure-html5/unnamed-chunk-9-1.png"/>
<meta property="twitter:image:width" content="1248"/>
<meta property="twitter:image:height" content="576"/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","categories","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["Geospatial Data"]},{"type":"character","attributes":{},"value":["An introduction to geospatial data in R with a focus on sf and leaflet"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Bryan Blanc"]},{"type":"character","attributes":{},"value":["https://github.com/bpb824"]}]}]},{"type":"character","attributes":{},"value":["01-14-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["geospatial","leaflet"]},{"type":"character","attributes":{},"value":["https://perkinsandwill.github.io/nn_r_training/posts/geospatial-data/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["data/nc.dbf","data/nc.prj","data/nc.shp","data/nc.shx","data/Projects_MASTER.xlsx","data/shp/cb_2013_us_state_20m.dbf","data/shp/cb_2013_us_state_20m.prj","data/shp/cb_2013_us_state_20m.shp","data/shp/cb_2013_us_state_20m.shp.iso.xml","data/shp/cb_2013_us_state_20m.shp.xml","data/shp/cb_2013_us_state_20m.shx","data/shp/state_20m.ea.iso.xml","geospatial-data_files/anchor-4.2.2/anchor.min.js","geospatial-data_files/bowser-1.9.3/bowser.min.js","geospatial-data_files/distill-2.2.21/template.v2.js","geospatial-data_files/figure-html5/unnamed-chunk-10-1.png","geospatial-data_files/figure-html5/unnamed-chunk-19-1.png","geospatial-data_files/figure-html5/unnamed-chunk-39-1.png","geospatial-data_files/figure-html5/unnamed-chunk-40-1.png","geospatial-data_files/figure-html5/unnamed-chunk-41-1.png","geospatial-data_files/figure-html5/unnamed-chunk-43-1.png","geospatial-data_files/figure-html5/unnamed-chunk-72-4.png","geospatial-data_files/figure-html5/unnamed-chunk-72-5.png","geospatial-data_files/figure-html5/unnamed-chunk-9-1.png","geospatial-data_files/header-attrs-2.6.1/header-attrs.js","geospatial-data_files/htmlwidgets-1.5.1/htmlwidgets.js","geospatial-data_files/ionicons-2.0.1/bootstrap-theme.min.css","geospatial-data_files/ionicons-2.0.1/bootstrap.min.css","geospatial-data_files/ionicons-2.0.1/bootstrap.min.js","geospatial-data_files/ionicons-2.0.1/font-awesome.min.css","geospatial-data_files/ionicons-2.0.1/fonts/fontawesome-webfont.eot","geospatial-data_files/ionicons-2.0.1/fonts/fontawesome-webfont.svg","geospatial-data_files/ionicons-2.0.1/fonts/fontawesome-webfont.ttf","geospatial-data_files/ionicons-2.0.1/fonts/fontawesome-webfont.woff","geospatial-data_files/ionicons-2.0.1/fonts/FontAwesome.otf","geospatial-data_files/ionicons-2.0.1/fonts/glyphicons-halflings-regular.eot","geospatial-data_files/ionicons-2.0.1/fonts/glyphicons-halflings-regular.svg","geospatial-data_files/ionicons-2.0.1/fonts/glyphicons-halflings-regular.ttf","geospatial-data_files/ionicons-2.0.1/fonts/glyphicons-halflings-regular.woff","geospatial-data_files/ionicons-2.0.1/fonts/ionicons.eot","geospatial-data_files/ionicons-2.0.1/fonts/ionicons.svg","geospatial-data_files/ionicons-2.0.1/fonts/ionicons.ttf","geospatial-data_files/ionicons-2.0.1/fonts/ionicons.woff","geospatial-data_files/ionicons-2.0.1/images/markers-matte.png","geospatial-data_files/ionicons-2.0.1/images/markers-matte@2x.png","geospatial-data_files/ionicons-2.0.1/images/markers-plain.png","geospatial-data_files/ionicons-2.0.1/images/markers-shadow.png","geospatial-data_files/ionicons-2.0.1/images/markers-shadow@2x.png","geospatial-data_files/ionicons-2.0.1/images/markers-soft.png","geospatial-data_files/ionicons-2.0.1/images/markers-soft@2x.png","geospatial-data_files/ionicons-2.0.1/ionicons.min.css","geospatial-data_files/ionicons-2.0.1/leaflet.awesome-markers.css","geospatial-data_files/ionicons-2.0.1/leaflet.awesome-markers.js","geospatial-data_files/ionicons-2.0.1/leaflet.awesome-markers.min.js","geospatial-data_files/jquery-1.11.3/jquery.min.js","geospatial-data_files/jquery-1.12.4/jquery.min.js","geospatial-data_files/leaflet-1.3.1/images/layers-2x.png","geospatial-data_files/leaflet-1.3.1/images/layers.png","geospatial-data_files/leaflet-1.3.1/images/marker-icon-2x.png","geospatial-data_files/leaflet-1.3.1/images/marker-icon.png","geospatial-data_files/leaflet-1.3.1/images/marker-shadow.png","geospatial-data_files/leaflet-1.3.1/leaflet.css","geospatial-data_files/leaflet-1.3.1/leaflet.js","geospatial-data_files/leaflet-awesomemarkers-2.0.3/bootstrap-theme.min.css","geospatial-data_files/leaflet-awesomemarkers-2.0.3/bootstrap.min.css","geospatial-data_files/leaflet-awesomemarkers-2.0.3/bootstrap.min.js","geospatial-data_files/leaflet-awesomemarkers-2.0.3/font-awesome.min.css","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/fontawesome-webfont.eot","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/fontawesome-webfont.svg","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/fontawesome-webfont.ttf","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/fontawesome-webfont.woff","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/FontAwesome.otf","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/glyphicons-halflings-regular.eot","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/glyphicons-halflings-regular.svg","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/glyphicons-halflings-regular.ttf","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/glyphicons-halflings-regular.woff","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/ionicons.eot","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/ionicons.svg","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/ionicons.ttf","geospatial-data_files/leaflet-awesomemarkers-2.0.3/fonts/ionicons.woff","geospatial-data_files/leaflet-awesomemarkers-2.0.3/images/markers-matte.png","geospatial-data_files/leaflet-awesomemarkers-2.0.3/images/markers-matte@2x.png","geospatial-data_files/leaflet-awesomemarkers-2.0.3/images/markers-plain.png","geospatial-data_files/leaflet-awesomemarkers-2.0.3/images/markers-shadow.png","geospatial-data_files/leaflet-awesomemarkers-2.0.3/images/markers-shadow@2x.png","geospatial-data_files/leaflet-awesomemarkers-2.0.3/images/markers-soft.png","geospatial-data_files/leaflet-awesomemarkers-2.0.3/images/markers-soft@2x.png","geospatial-data_files/leaflet-awesomemarkers-2.0.3/ionicons.min.css","geospatial-data_files/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css","geospatial-data_files/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.js","geospatial-data_files/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js","geospatial-data_files/leaflet-binding-2.0.3/leaflet.js","geospatial-data_files/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js","geospatial-data_files/leaflet-markercluster-1.0.5/leaflet.markercluster.js","geospatial-data_files/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js","geospatial-data_files/leaflet-markercluster-1.0.5/MarkerCluster.css","geospatial-data_files/leaflet-markercluster-1.0.5/MarkerCluster.Default.css","geospatial-data_files/leaflet-markercluster-1.0.5/MIT-LICENCE.txt","geospatial-data_files/leaflet-markercluster-1.0.5/package.json","geospatial-data_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js","geospatial-data_files/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js","geospatial-data_files/leafletfix-1.0.0/leafletfix.css","geospatial-data_files/popper-2.6.0/popper.min.js","geospatial-data_files/Proj4Leaflet-1.0.1/proj4-compressed.js","geospatial-data_files/Proj4Leaflet-1.0.1/proj4leaflet.js","geospatial-data_files/rstudio_leaflet-1.3.1/images/1px.png","geospatial-data_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css","geospatial-data_files/tippy-6.2.7/tippy-bundle.umd.min.js","geospatial-data_files/tippy-6.2.7/tippy-light-border.css","geospatial-data_files/tippy-6.2.7/tippy.css","geospatial-data_files/tippy-6.2.7/tippy.umd.min.js","geospatial-data_files/webcomponents-2.0.0/webcomponents.js","graphics/leaflet-cheatsheet-1.png","graphics/NNlogo_RGB_300dpi_JPEG.jpg","graphics/sf.png","graphics/sf_xfig.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
d-article > p, d-article > ul, d-article > ol{
  grid-column-end: 14;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.6.1/header-attrs.js"></script>
  <script src="../../site_libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
  <script src="../../site_libs/jquery-1.12.4/jquery.min.js"></script>
  <link href="../../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
  <script src="../../site_libs/leaflet-1.3.1/leaflet.js"></script>
  <link href="../../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
  <script src="../../site_libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
  <script src="../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
  <link href="../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
  <script src="../../site_libs/leaflet-binding-2.0.3/leaflet.js"></script>
  <link href="../../site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.css" rel="stylesheet" />
  <script src="../../site_libs/leaflet-awesomemarkers-2.0.3/leaflet.awesome-markers.min.js"></script>
  <link href="../../site_libs/ionicons-2.0.1/ionicons.min.css" rel="stylesheet" />
  <link href="../../site_libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
  <link href="../../site_libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
  <script src="../../site_libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
  <script src="../../site_libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
  <script src="../../site_libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
  <script src="../../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
  <script src="../../site_libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Geospatial Data","description":"An introduction to geospatial data in R with a focus on sf and leaflet","authors":[{"author":"Bryan Blanc","authorURL":"https://github.com/bpb824","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-01-14T00:00:00.000-08:00","citationText":"Blanc, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Nelson\Nygaard R Training Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<div class="nav-dropdown">
<button class="nav-dropbtn">
Training Modules
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../../index.html">Training Module Index</a>
<a href="../../user-resources/2021-01-23-lnl-schedule/index.html">Upcoming Training Schedule</a>
</div>
</div>
<a href="../../recipes-listing.html">Recipes</a>
<a href="../../example-analyses.html">Example Analyses</a>
<div class="nav-dropdown">
<button class="nav-dropbtn">
User Resources
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../../user-resources/2021-01-23-lnl-schedule/index.html">Upcoming Training Schedule</a>
<a href="https://forms.gle/mMU2Pt3TRAoEnntPA">Request a 1-on-1 R Help Session</a>
<a href="../../user-resources/2021-01-23-nn-r-user-list/index.html">Current R Software Versions and Users</a>
<a href="../../user-resources/2021-01-23-recommended-reading/index.html">Recommended Reading List</a>
</div>
</div>
<div class="nav-dropdown">
<button class="nav-dropbtn">
R Setup
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../../setup-articles/2021-01-18-using-r-locally/index.html">Setup R Locally</a>
<a href="../../setup-articles/2021-01-18-node-usage/index.html">Setup R on Node</a>
<a href="../../setup-articles-listing.html">All Setup Articles</a>
</div>
</div>
<a href="../../about.html">About</a>
<a href="https://github.com/PerkinsAndWill/nn_r_training" aria-label="Link to source">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Geospatial Data</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:geospatial" class="dt-tag">geospatial</a>
  <a href="../../index.html#category:leaflet" class="dt-tag">leaflet</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>An introduction to geospatial data in R with a focus on sf and leaflet</p></p>
</div>

<div class="d-byline">
  Bryan Blanc <a href="https://github.com/bpb824" class="uri">https://github.com/bpb824</a> 
  
<br/>01-14-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#simple-features">Simple Features</a>
<ul>
<li><a href="#what-is-a-feature">What is a feature?</a>
<ul>
<li><a href="#dimensions">Dimensions</a></li>
<li><a href="#simple-feature-geometry-types">Simple feature geometry types</a></li>
<li><a href="#coordinate-reference-system">Coordinate reference system</a></li>
</ul></li>
<li><a href="#how-simple-features-in-r-are-organized">How simple features in R are organized</a></li>
<li><a href="#sf-objects-with-simple-features">sf: objects with simple features</a>
<ul>
<li><a href="#sfc-simple-feature-geometry-list-column">sfc: simple feature geometry list-column</a></li>
<li><a href="#mixed-geometry-types">Mixed geometry types</a></li>
</ul></li>
<li><a href="#sfg-simple-feature-geometry">sfg: simple feature geometry</a>
<ul>
<li><a href="#wkb">Well-known text, well-known binary, precision</a></li>
<li><a href="#reading-and-writing">Reading and writing</a></li>
<li><a href="#crs">Coordinate reference systems and transformations</a></li>
<li><a href="#conversion-including-to-and-from-sp">Conversion, including to and from sp</a></li>
<li><a href="#geometrycollection">Geometrical operations</a></li>
<li><a href="#non-simple-and-non-valid-geometries">Non-simple and non-valid geometries</a></li>
</ul></li>
<li><a href="#units">Units</a></li>
<li><a href="#how-attributes-relate-to-geometries">How attributes relate to geometries</a>
<ul>
<li><a href="#further-reading">Further reading:</a></li>
</ul></li>
</ul></li>
<li><a href="#leaflet">Leaflet</a>
<ul>
<li><a href="#introduction-1">Introduction</a>
<ul>
<li><a href="#features">Features</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#basic-usage">Basic Usage</a></li>
</ul></li>
<li><a href="#the-map-widget">The Map Widget</a>
<ul>
<li><a href="#initializing-options">Initializing Options</a></li>
<li><a href="#map-methods">Map Methods</a></li>
<li><a href="#the-data-object">The Data Object</a></li>
<li><a href="#the-formula-interface">The Formula Interface</a></li>
</ul></li>
<li><a href="#markers">Markers</a>
<ul>
<li><a href="#data-sources">Data sources</a></li>
<li><a href="#icon-markers">Icon Markers</a></li>
<li><a href="#circle-markers">Circle Markers</a></li>
</ul></li>
<li><a href="#popups">Popups</a></li>
<li><a href="#labels">Labels</a></li>
<li><a href="#lines-and-shapes">Lines and Shapes</a>
<ul>
<li><a href="#polygons-and-polylines">Polygons and Polylines</a></li>
<li><a href="#circles">Circles</a></li>
<li><a href="#rectangles">Rectangles</a></li>
</ul></li>
<li><a href="#showhide-layers">Show/Hide Layers</a>
<ul>
<li><a href="#understanding-groups">Understanding Groups</a></li>
<li><a href="#interactive-layer-display">Interactive Layer Display</a></li>
<li><a href="#programmatic-layer-display">Programmatic Layer Display</a></li>
</ul></li>
</ul></li>
<li><a href="#example">Example</a></li>
<li><a href="#reference-materials">Reference Materials</a>
<ul>
<li><a href="#further-reading-1">Further Reading</a></li>
<li><a href="#cheat-sheets">Cheat Sheets</a>
<ul>
<li><a href="#simple-features-sf-cheat-sheet">Simple Features (sf) Cheat Sheet</a></li>
<li><a href="#leaflet-for-r-cheat-sheet">Leaflet for R Cheat Sheet</a></li>
</ul></li>
<li><a href="#related-datacamp-courses">Related DataCamp Courses</a></li>
</ul></li>
</ul>
</nav>
</div>
<p><em>This content was presented to Nelson\Nygaard Staff at a Lunch and Learn webinar on Friday, September 4th, 2020, and is <a href="https://web.microsoftstream.com/video/d331753a-e974-4561-a00c-9145fb77bdb4">available as a recording here</a> and embedded below</em></p>
<p align="center">
<iframe width="640" height="360" src="https://web.microsoftstream.com/embed/video/d331753a-e974-4561-a00c-9145fb77bdb4?autoplay=false&amp;showinfo=true" allowfullscreen style="border:none;">
</iframe>
</p>
<h1 id="introduction">Introduction</h1>
<p>There are several reasons why learning to use the geospatial capabilities of R are invaluable for R users, especially at Nelson\Nygaard:</p>
<ul>
<li><strong>Open source - no ESRI licenses neccessary</strong>: R is a completely open source programming language, and so there are not licenses necessary to access its geospatial packages. NN as a firm has a limited number of licenses available at any given time, and the ongoing telecommuting associated with the COVID-19 pandemic has made using GIS licenses more difficult. R can allow you to conduct geospatial analyses on your local machine with no need for licenses.</li>
<li><strong>Combining spatial and aspatial analyses</strong>: As transportation planners, most of the work we do has some spatial component. Because of that, analysis is often separated into GIS and Excel components. With R, that separation is unneccesary  you can combine spatial and aspatial analysis procedures and data seamlessly.</li>
<li><strong>Automation and processing speed</strong>: Like with all other R based analyses, you can automate analysis procedures you have to conduct many times over, potentially speeding up some GIS workflows that are repetitive.</li>
<li><strong>Modular</strong>: Additionally, if written appropriately, commonly conducted analysis procedures can be abstracted into modular code that can be applied across different projects, saving time as a firm.</li>
<li><strong>Interactive</strong>: Because of <code>leaflet</code>, which we will discuss below, R offers a very low barrier to quickly producing interactive maps, which are both helpful for data exploration and for presentation, especially as increasingly more deliverables move to digital formats.</li>
</ul>
<p>This module will discuss the spatial data package <code>sf</code>, which is well integrated into the tidyverse and other mapping related packages (including <code>leaflet</code>). There are other spatial data frameworks that came before <code>sf</code> that will not be discussed below (like <code>sp</code>) but are still relevant to understand at a basic level. Reference articles are included below. Additionally, this module will discuss <code>leaflet</code>, an interactive mapping framework that lends itself well to spatial analysis and visualization in R.</p>
<h1 id="simple-features">Simple Features</h1>
<p><em><strong>Acknowledgment:</strong> This portion of this module heavily draws upon, including direct copy-paste of markdown content, the vignettes developed for the <code>sf</code> package, available on the package <a href="https://r-spatial.github.io/sf/index.html">documentation website</a>. </em></p>
<p><a href="https://en.wikipedia.org/wiki/Simple_Features">Simple features</a> or <a href="http://www.opengeospatial.org/standards/sfa"><em>simple feature access</em></a> refers to a formal standard (ISO 19125-1:2004) that describes how objects in the real world can be represented in computers, with emphasis on the <em>spatial</em> geometry of these objects. It also describes how such objects can be stored in and retrieved from databases, and which geometrical operations should be defined for them.</p>
<p>The standard is widely implemented in spatial databases (such as PostGIS), commercial GIS (e.g., <a href="http://www.esri.com/">ESRI ArcGIS</a>) and forms the vector data basis for libraries such as <a href="http://www.gdal.org/">GDAL</a>. A subset of simple features forms the <a href="http://geojson.org/">GeoJSON</a> standard.</p>
<p>R has well-supported classes for storing spatial data (<a href="https://CRAN.R-project.org/package=sp">sp</a>) and interfacing to the above mentioned environments (<a href="https://CRAN.R-project.org/package=rgdal">rgdal</a>, <a href="https://CRAN.R-project.org/package=rgeos">rgeos</a>), but has so far lacked a complete implementation of simple features, making conversions at times convoluted, inefficient or incomplete. The package <a href="http://github.com/r-spatial/sf">sf</a> tries to fill this gap, and aims at succeeding <a href="https://CRAN.R-project.org/package=sp">sp</a> in the long term.</p>
<p>This vignette:</p>
<ul>
<li>explains what is meant by features, and by simple features</li>
<li>shows how they are implemented in R</li>
<li>provides examples of how you can work with them</li>
<li>shows how they can be read from and written to external files or resources</li>
<li>discusses how they can be converted to and from sp objects</li>
<li>shows how they can be used for meaningful spatial analysis</li>
</ul>
<h2 id="what-is-a-feature">What is a feature?</h2>
<p>A feature is thought of as a thing, or an object in the real world, such as a building or a tree. As is the case with objects, they often consist of other objects. This is the case with features too: a set of features can form a single feature. A forest stand can be a feature, a forest can be a feature, a city can be a feature. A satellite image pixel can be a feature, a complete image can be a feature too.</p>
<p>Features have a <em>geometry</em> describing <em>where</em> on Earth the feature is located, and they have attributes, which describe other properties. The geometry of a tree can be the delineation of its crown, of its stem, or the point indicating its centre. Other properties may include its height, color, diameter at breast height at a particular date, and so on.</p>
<p>The standard says: <em>A simple feature is defined by the OpenGIS Abstract specification to have both spatial and non-spatial attributes. Spatial attributes are geometry valued, and simple features are based on 2D geometry with linear interpolation between vertices.</em> We will see soon that the same standard will extend its coverage beyond 2D and beyond linear interpolation. Here, we take simple features as the data structures and operations described in the <a href="http://www.opengeospatial.org/standards/sfa">standard</a>.</p>
<h3 id="dimensions">Dimensions</h3>
<p>All geometries are composed of points. Points are coordinates in a 2-, 3- or 4-dimensional space. All points in a geometry have the same dimensionality. In addition to X and Y coordinates, there are two optional additional dimensions:</p>
<ul>
<li>a Z coordinate, denoting altitude</li>
<li>an M coordinate (rarely used), denoting some <em>measure</em> that is associated with the point, rather than with the feature as a whole (in which case it would be a feature attribute); examples could be time of measurement, or measurement error of the coordinates</li>
</ul>
<p>The four possible cases then are:</p>
<ol type="1">
<li>two-dimensional points refer to x and y, easting and northing, or longitude and latitude, we refer to them as XY</li>
<li>three-dimensional points as XYZ</li>
<li>three-dimensional points as XYM</li>
<li>four-dimensional points as XYZM (the third axis is Z, fourth M)</li>
</ol>
<h3 id="simple-feature-geometry-types">Simple feature geometry types</h3>
<p>The following seven simple feature types are the most common, and are for instance the only ones used for <a href="https://tools.ietf.org/html/rfc7946">GeoJSON</a>:</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="header">
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>POINT</code></td>
<td>zero-dimensional geometry containing a single point</td>
</tr>
<tr class="even">
<td><code>LINESTRING</code></td>
<td>sequence of points connected by straight, non-self intersecting line pieces; one-dimensional geometry</td>
</tr>
<tr class="odd">
<td><code>POLYGON</code></td>
<td>geometry with a positive area (two-dimensional); sequence of points form a closed, non-self intersecting ring; the first ring denotes the exterior ring, zero or more subsequent rings denote holes in this exterior ring</td>
</tr>
<tr class="even">
<td><code>MULTIPOINT</code></td>
<td>set of points; a MULTIPOINT is simple if no two Points in the MULTIPOINT are equal</td>
</tr>
<tr class="odd">
<td><code>MULTILINESTRING</code></td>
<td>set of linestrings</td>
</tr>
<tr class="even">
<td><code>MULTIPOLYGON</code></td>
<td>set of polygons</td>
</tr>
<tr class="odd">
<td><code>GEOMETRYCOLLECTION</code></td>
<td>set of geometries of any type except GEOMETRYCOLLECTION</td>
</tr>
</tbody>
</table>
<p>Each of the geometry types can also be a (typed) empty set, containing zero coordinates (for <code>POINT</code> the standard is not clear how to represent the empty geometry). Empty geometries can be thought of being the analogue to missing (<code>NA</code>) attributes, NULL values or empty lists.</p>
<p>The remaining geometries 10 are rarer, but increasingly find implementations:</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="header">
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>CIRCULARSTRING</code></td>
<td>The CIRCULARSTRING is the basic curve type, similar to a LINESTRING in the linear world. A single segment requires three points, the start and end points (first and third) and any other point on the arc. The exception to this is for a closed circle, where the start and end points are the same. In this case the second point MUST be the center of the arc, i.e., the opposite side of the circle. To chain arcs together, the last point of the previous arc becomes the first point of the next arc, just like in LINESTRING. This means that a valid circular string must have an odd number of points greater than 1.</td>
</tr>
<tr class="even">
<td><code>COMPOUNDCURVE</code></td>
<td>A compound curve is a single, continuous curve that has both curved (circular) segments and linear segments. That means that in addition to having well-formed components, the end point of every component (except the last) must be coincident with the start point of the following component.</td>
</tr>
<tr class="odd">
<td><code>CURVEPOLYGON</code></td>
<td>Example compound curve in a curve polygon: CURVEPOLYGON(COMPOUNDCURVE(CIRCULARSTRING(0 0,2 0, 2 1, 2 3, 4 3),(4 3, 4 5, 1 4, 0 0)), CIRCULARSTRING(1.7 1, 1.4 0.4, 1.6 0.4, 1.6 0.5, 1.7 1) )</td>
</tr>
<tr class="even">
<td><code>MULTICURVE</code></td>
<td>A MultiCurve is a 1-dimensional GeometryCollection whose elements are Curves, it can include linear strings, circular strings or compound strings.</td>
</tr>
<tr class="odd">
<td><code>MULTISURFACE</code></td>
<td>A MultiSurface is a 2-dimensional GeometryCollection whose elements are Surfaces, all using coordinates from the same coordinate reference system.</td>
</tr>
<tr class="even">
<td><code>CURVE</code></td>
<td>A Curve is a 1-dimensional geometric object usually stored as a sequence of Points, with the subtype of Curve specifying the form of the interpolation between Points</td>
</tr>
<tr class="odd">
<td><code>SURFACE</code></td>
<td>A Surface is a 2-dimensional geometric object</td>
</tr>
<tr class="even">
<td><code>POLYHEDRALSURFACE</code></td>
<td>A PolyhedralSurface is a contiguous collection of polygons, which share common boundary segments</td>
</tr>
<tr class="odd">
<td><code>TIN</code></td>
<td>A TIN (triangulated irregular network) is a PolyhedralSurface consisting only of Triangle patches.</td>
</tr>
<tr class="even">
<td><code>TRIANGLE</code></td>
<td>A Triangle is a polygon with 3 distinct, non-collinear vertices and no interior boundary</td>
</tr>
</tbody>
</table>
<p>Note that <code>CIRCULASTRING</code>, <code>COMPOUNDCURVE</code> and <code>CURVEPOLYGON</code> are not described in the SFA standard, but in the <a href="https://www.iso.org/standard/38651.html">SQL-MM part 3 standard</a>. The descriptions above were copied from the <a href="http://postgis.net/docs/using_postgis_dbmanagement.html">PostGIS manual</a>.</p>
<h3 id="coordinate-reference-system">Coordinate reference system</h3>
<p>Coordinates can only be placed on the Earths surface when their coordinate reference system (CRS) is known; this may be a spheroid CRS such as WGS84, a projected, two-dimensional (Cartesian) CRS such as a UTM zone or Web Mercator, or a CRS in three-dimensions, or including time. Similarly, M-coordinates need an attribute reference system, e.g.a <a href="https://CRAN.R-project.org/package=units">measurement unit</a>.</p>
<h2 id="how-simple-features-in-r-are-organized">How simple features in R are organized</h2>
<p>Package <code>sf</code> represents simple features as native R objects. Similar to <a href="http://postgis.net/">PostGIS</a>, all functions and methods in <code>sf</code> that operate on spatial data are prefixed by <code>st_</code>, which refers to <em>spatial type</em>; this makes them easily findable by command-line completion. Simple features are implemented as R native data, using simple data structures (S3 classes, lists, matrix, vector). Typical use involves reading, manipulating and writing of sets of features, with attributes and geometries.</p>
<p>As attributes are typically stored in <code>data.frame</code> objects (or the very similar <code>tbl_df</code>), we will also store feature geometries in a <code>data.frame</code> column. Since geometries are not single-valued, they are put in a list-column, a list of length equal to the number of records in the <code>data.frame</code>, with each list element holding the simple feature geometry of that feature. The three classes used to represent simple features are:</p>
<ul>
<li><code>sf</code>, the table (<code>data.frame</code>) with feature attributes and feature geometries, which contains</li>
<li><code>sfc</code>, the list-column with the geometries for each feature (record), which is composed of</li>
<li><code>sfg</code>, the feature geometry of an individual simple feature.</li>
</ul>
<p>We will now discuss each of these three classes.</p>
<h2 id="sf-objects-with-simple-features">sf: objects with simple features</h2>
<p>As we usually do not work with geometries of single simple features, but with datasets consisting of sets of features with attributes, the two are put together in <code>sf</code> (simple feature) objects. The following command reads the <code>nc</code> dataset from a file that is contained in the <code>sf</code> package:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://r-spatial.github.io/sf/'>sf</a></span><span class='op'>)</span>
<span class='va'>nc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"shape/nc.shp"</span>, package<span class='op'>=</span><span class='st'>"sf"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `nc&#39; from data source `C:\Users\blancb\Local\R\win-library\4.0\sf\shape\nc.shp&#39; using driver `ESRI Shapefile&#39;
Simple feature collection with 100 features and 14 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
geographic CRS: NAD27</code></pre>
</div>
<p>(Note that users will not use <code>system.file</code> but give a <code>filename</code> directly, and that shapefiles consist of more than one file, all with identical basename, which reside in the same directory.) The short report printed gives the file name, the driver (ESRI Shapefile), mentions that there are 100 features (records, represented as rows) and 14 fields (attributes, represented as columns). This object is of class</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;sf&quot;         &quot;data.frame&quot;</code></pre>
</div>
<p>meaning it extends (and is a) <code>data.frame</code>, but with a single list-column with geometries, which is held in the column with name</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>nc</span>, <span class='st'>"sf_column"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;geometry&quot;</code></pre>
</div>
<p>If we print the first three features, we see their attribute values and an abridged version of the geometry</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>9</span><span class='op'>:</span><span class='fl'>15</span><span class='op'>]</span>, n <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>which would give the following output:</p>
<p><img src="graphics/sf_xfig.png" /></p>
<p>In the output we see:</p>
<ul>
<li>in green a simple feature: a single record, or <code>data.frame</code> row, consisting of attributes and geometry</li>
<li>in blue a single simple feature geometry (an object of class <code>sfg</code>)</li>
<li>in red a simple feature list-column (an object of class <code>sfc</code>, which is a column in the <code>data.frame</code>)</li>
<li>that although geometries are native R objects, they are printed as <a href="#wkb">well-known text</a></li>
</ul>
Methods for <code>sf</code> objects are
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/methods.html'>methods</a></span><span class='op'>(</span>class <span class='op'>=</span> <span class='st'>"sf"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] $&lt;-                   [                     [[&lt;-                 
 [4] aggregate             anti_join             arrange              
 [7] as.data.frame         cbind                 clean_names          
[10] coerce                dbDataType            dbWriteTable         
[13] distinct              dplyr_reconstruct     filter               
[16] full_join             gather                group_by             
[19] group_split           identify              initialize           
[22] inner_join            left_join             merge                
[25] mutate                nest                  plot                 
[28] print                 rbind                 rename               
[31] right_join            sample_frac           sample_n             
[34] select                semi_join             separate             
[37] separate_rows         show                  slice                
[40] slotsFromS3           spread                st_agr               
[43] st_agr&lt;-              st_area               st_as_s2             
[46] st_as_sf              st_bbox               st_boundary          
[49] st_buffer             st_cast               st_centroid          
[52] st_collection_extract st_convex_hull        st_coordinates       
[55] st_crop               st_crs                st_crs&lt;-             
[58] st_difference         st_filter             st_geometry          
[61] st_geometry&lt;-         st_interpolate_aw     st_intersection      
[64] st_intersects         st_is                 st_is_valid          
[67] st_join               st_line_merge         st_m_range           
[70] st_make_valid         st_nearest_points     st_node              
[73] st_normalize          st_point_on_surface   st_polygonize        
[76] st_precision          st_reverse            st_sample            
[79] st_segmentize         st_set_precision      st_shift_longitude   
[82] st_simplify           st_snap               st_sym_difference    
[85] st_transform          st_triangulate        st_union             
[88] st_voronoi            st_wrap_dateline      st_write             
[91] st_z_range            st_zm                 summarise            
[94] transform             transmute             ungroup              
[97] unite                 unnest               
see &#39;?methods&#39; for accessing help and source code</code></pre>
</div>
It is also possible to create <code>data.frame</code> objects with geometry list-columns that are not of class <code>sf</code>, e.g.by
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nc.no_sf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>nc.no_sf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;data.frame&quot;</code></pre>
</div>
<p>However, such objects:</p>
<ul>
<li>no longer register which column is the geometry list-column</li>
<li>no longer have a plot method, and</li>
<li>lack all of the other dedicated methods listed above for class <code>sf</code></li>
</ul>
<h3 id="sfc-simple-feature-geometry-list-column">sfc: simple feature geometry list-column</h3>
<p>The column in the <code>sf</code> data.frame that contains the geometries is a list, of class <code>sfc</code>. We can retrieve the geometry list-column in this case by <code>nc$geom</code> or <code>nc[[15]]</code>, but the more general way uses <code>st_geometry</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>nc_geom</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_geometry.html'>st_geometry</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Geometry set for 100 features 
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
geographic CRS: NAD27
First 5 geometries:</code></pre>
</div>
<p>Geometries are printed in abbreviated form, but we can can view a complete geometry by selecting it, e.g.the first one by</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nc_geom</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>The way this is printed is called <em>well-known text</em>, and is part of the standards. The word <code>MULTIPOLYGON</code> is followed by three parenthesis, because it can consist of multiple polygons, in the form of <code>MULTIPOLYGON(POL1,POL2)</code>, where <code>POL1</code> might consist of an exterior ring and zero or more interior rings, as of <code>(EXT1,HOLE1,HOLE2)</code>. Sets of coordinates are held together with parenthesis, so we get <code>((crds_ext)(crds_hole1)(crds_hole2))</code> where <code>crds_</code> is a comma-separated set of coordinates of a ring. This leads to the case above, where <code>MULTIPOLYGON(((crds_ext)))</code> refers to the exterior ring (1), without holes (2), of the first polygon (3) - hence three parentheses.</p>
<p>We can see there is a single polygon with no rings:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span>, reset <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span> <span class='co'># reset = FALSE: we want to add to a plot with a legend</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>]</span>, col <span class='op'>=</span> <span class='st'>'grey'</span>, add <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="geospatial-data_files/figure-html5/unnamed-chunk-9-1.png" width="624" /></p>
</div>
but some of the polygons in this dataset have multiple exterior rings; they can be identified by
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>w</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/which.html'>which</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>nc_geom</span>, <span class='va'>length</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1]  4 56 57 87 91 95</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='va'>w</span>,<span class='fl'>1</span><span class='op'>]</span>, col <span class='op'>=</span> <span class='fl'>2</span><span class='op'>:</span><span class='fl'>7</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="geospatial-data_files/figure-html5/unnamed-chunk-10-1.png" width="624" /></p>
</div>
<p>Following the <code>MULTIPOLYGON</code> datastructure, in R we have a list of lists of lists of matrices. For instance, we get the first 3 coordinate pairs of the second exterior ring (first ring is always exterior) for the geometry of feature 4 by</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nc_geom</span><span class='op'>[[</span><span class='fl'>4</span><span class='op'>]</span><span class='op'>]</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,<span class='op'>]</span>
</code></pre>
</div>
<pre><code>          [,1]     [,2]
[1,] -76.02717 36.55672
[2,] -75.99866 36.55665
[3,] -75.91192 36.54253</code></pre>
</div>
<p>Geometry columns have their own class,</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>nc_geom</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;sfc_MULTIPOLYGON&quot; &quot;sfc&quot;             </code></pre>
</div>
Methods for geometry list-columns include
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/methods.html'>methods</a></span><span class='op'>(</span>class <span class='op'>=</span> <span class='st'>'sfc'</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] [                     [&lt;-                   as.data.frame        
 [4] c                     coerce                format               
 [7] fortify               identify              initialize           
[10] obj_sum               Ops                   print                
[13] rep                   scale_type            show                 
[16] slotsFromS3           st_area               st_as_binary         
[19] st_as_grob            st_as_s2              st_as_sf             
[22] st_as_text            st_bbox               st_boundary          
[25] st_buffer             st_cast               st_centroid          
[28] st_collection_extract st_convex_hull        st_coordinates       
[31] st_crop               st_crs                st_crs&lt;-             
[34] st_difference         st_geometry           st_intersection      
[37] st_intersects         st_is                 st_is_valid          
[40] st_line_merge         st_m_range            st_make_valid        
[43] st_nearest_points     st_node               st_normalize         
[46] st_point_on_surface   st_polygonize         st_precision         
[49] st_reverse            st_sample             st_segmentize        
[52] st_set_precision      st_shift_longitude    st_simplify          
[55] st_snap               st_sym_difference     st_transform         
[58] st_triangulate        st_union              st_voronoi           
[61] st_wrap_dateline      st_write              st_z_range           
[64] st_zm                 str                   summary              
[67] type_sum              vec_cast.sfc          vec_ptype2.sfc       
see &#39;?methods&#39; for accessing help and source code</code></pre>
</div>
<p>Coordinate reference systems (<code>st_crs</code> and <code>st_transform</code>) are discussed in the section on <a href="#crs">coordinate reference systems</a>. <code>st_as_wkb</code> and <code>st_as_text</code> convert geometry list-columns into well-known-binary or well-known-text, explained <a href="#wkb">below</a>. <code>st_bbox</code> retrieves the coordinate bounding box.</p>
Attributes include
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>nc_geom</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$n_empty
[1] 0

$crs
Coordinate Reference System:
  User input: NAD27 
  wkt:
GEOGCRS[&quot;NAD27&quot;,
    DATUM[&quot;North American Datum 1927&quot;,
        ELLIPSOID[&quot;Clarke 1866&quot;,6378206.4,294.978698213898,
            LENGTHUNIT[&quot;metre&quot;,1]]],
    PRIMEM[&quot;Greenwich&quot;,0,
        ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    CS[ellipsoidal,2],
        AXIS[&quot;latitude&quot;,north,
            ORDER[1],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
        AXIS[&quot;longitude&quot;,east,
            ORDER[2],
            ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
    ID[&quot;EPSG&quot;,4267]]

$class
[1] &quot;sfc_MULTIPOLYGON&quot; &quot;sfc&quot;             

$precision
[1] 0

$bbox
     xmin      ymin      xmax      ymax 
-84.32385  33.88199 -75.45698  36.58965 </code></pre>
</div>
<h3 id="mixed-geometry-types">Mixed geometry types</h3>
<p>The class of <code>nc_geom</code> is <code>c("sfc_MULTIPOLYGON", "sfc")</code>: <code>sfc</code> is shared with all geometry types, and <code>sfc_TYPE</code> with <code>TYPE</code> indicating the type of the particular geometry at hand.</p>
There are two special types: <code>GEOMETRYCOLLECTION</code>, and <code>GEOMETRY</code>. <code>GEOMETRYCOLLECTION</code> indicates that each of the geometries may contain a mix of geometry types, as in
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>mix</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/sfc.html'>st_sfc</a></span><span class='op'>(</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_geometrycollection</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
    <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_geometrycollection</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_linestring</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Geometry set for 2 features 
geometry type:  GEOMETRYCOLLECTION
dimension:      XY
bbox:           xmin: 1 ymin: 2 xmax: 2 ymax: 4
CRS:            NA</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>mix</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;sfc_GEOMETRYCOLLECTION&quot; &quot;sfc&quot;                   </code></pre>
</div>
<p>Still, the geometries are here of a single type.</p>
The second <code>GEOMETRY</code>, indicates that the geometries in the geometry list-column are of varying type:
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>mix</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/sfc.html'>st_sfc</a></span><span class='op'>(</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_linestring</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Geometry set for 2 features 
geometry type:  GEOMETRY
dimension:      XY
bbox:           xmin: 1 ymin: 2 xmax: 2 ymax: 4
CRS:            NA</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>mix</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;sfc_GEOMETRY&quot; &quot;sfc&quot;         </code></pre>
</div>
<p>These two are fundamentally different: <code>GEOMETRY</code> is a superclass without instances, <code>GEOMETRYCOLLECTION</code> is a geometry instance. <code>GEOMETRY</code> list-columns occur when we read in a data source with a mix of geometry types. <code>GEOMETRYCOLLECTION</code> <em>is</em> a single features geometry: the intersection of two feature polygons may consist of points, lines and polygons, see the example <a href="#geometrycollection">below</a>.</p>
<h2 id="sfg-simple-feature-geometry">sfg: simple feature geometry</h2>
<p>Simple feature geometry (<code>sfg</code>) objects carry the geometry for a single feature, e.g.a point, linestring or polygon.</p>
<p>Simple feature geometries are implemented as R native data, using the following rules</p>
<ol type="1">
<li>a single POINT is a numeric vector</li>
<li>a set of points, e.g.in a LINESTRING or ring of a POLYGON is a <code>matrix</code>, each row containing a point</li>
<li>any other set is a <code>list</code></li>
</ol>
<p>Creator functions are rarely used in practice, since we typically bulk read and write spatial data. They are useful for illustration:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> &#39;XY&#39; num [1:2] 1 2</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> &#39;XYZ&#39; num [1:3] 1 2 3</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span><span class='op'>)</span>, <span class='st'>"XYM"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> &#39;XYM&#39; num [1:3] 1 2 3</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> &#39;XYZM&#39; num [1:4] 1 2 3 4</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_zm.html'>st_zm</a></span><span class='op'>(</span><span class='va'>x</span>, drop <span class='op'>=</span> <span class='cn'>TRUE</span>, what <span class='op'>=</span> <span class='st'>"ZM"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>This means that we can represent 2-, 3- or 4-dimensional coordinates. All geometry objects inherit from <code>sfg</code> (simple feature geometry), but also have a type (e.g.<code>POINT</code>), and a dimension (e.g.<code>XYM</code>) class name. A figure illustrates six of the seven most common types.</p>
<p>With the exception of the <code>POINT</code> which has a single point as geometry, the remaining six common single simple feature geometry types that correspond to single features (single records, or rows in a <code>data.frame</code>) are created like this</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>p</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.2</span>,<span class='fl'>4</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>4.6</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.8</span>,<span class='fl'>4.4</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.5</span>,<span class='fl'>3.8</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.4</span>,<span class='fl'>3.6</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.9</span>,<span class='fl'>4.5</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>mp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_multipoint</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>s1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>3</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>4</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>5</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>ls</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_linestring</a></span><span class='op'>(</span><span class='va'>s1</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>s2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.2</span>,<span class='fl'>3</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.2</span>,<span class='fl'>4</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4.8</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>4.8</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>s3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>4.4</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.6</span>,<span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>mls</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_multilinestring</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>s1</span>,<span class='va'>s2</span>,<span class='va'>s3</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>p1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>4</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>p2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>pol</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_polygon</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>p1</span>,<span class='va'>p2</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>p3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>0</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>,<span class='fl'>0</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>,<span class='fl'>1</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>1</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>p4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.3</span>,<span class='fl'>0.3</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.8</span>,<span class='fl'>0.3</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.8</span>,<span class='fl'>0.8</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.3</span>,<span class='fl'>0.8</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3.3</span>,<span class='fl'>0.3</span><span class='op'>)</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>5</span><span class='op'>:</span><span class='fl'>1</span>,<span class='op'>]</span>
<span class='va'>p5</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>3</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>,<span class='fl'>2</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>4</span>,<span class='fl'>3</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>,<span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>mpol</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_multipolygon</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>p1</span>,<span class='va'>p2</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>p3</span>,<span class='va'>p4</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>p5</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>gc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_geometrycollection</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>mp</span>, <span class='va'>mpol</span>, <span class='va'>ls</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>The objects created are shown here:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="geospatial-data_files/figure-html5/unnamed-chunk-19-1.png" width="624" /></p>
</div>
<p>Geometries can also be empty, as in</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='op'>(</span><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_geometrycollection</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 0</code></pre>
</div>
<h3 id="wkb">Well-known text, well-known binary, precision</h3>
<h4 id="wkt-and-wkb">WKT and WKB</h4>
Well-known text (WKT) and well-known binary (WKB) are two encodings for simple feature geometries. Well-known text, e.g.seen in
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_linestring</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>:</span><span class='fl'>1</span>,<span class='fl'>5</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_text.html'>st_as_text</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;LINESTRING (10 5, 9 4, 8 3, 7 2, 6 1)&quot;</code></pre>
</div>
<p>(but without the leading <code>## [1]</code> and quotes), is human-readable. Coordinates are usually floating point numbers, and moving large amounts of information as text is slow and imprecise. For that reason, we use well-known binary (WKB) encoding</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_binary.html'>st_as_binary</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] 01 02 00 00 00 05 00 00 00 00 00 00 00 00 00 24 40 00 00 00 00 00
[23] 00 14 40 00 00 00 00 00 00 22 40 00 00 00 00 00 00 10 40 00 00 00
[45] 00 00 00 20 40 00 00 00 00 00 00 08 40 00 00 00 00 00 00 1c 40 00
[67] 00 00 00 00 00 00 40 00 00 00 00 00 00 18 40 00 00 00 00 00 00 f0
[89] 3f</code></pre>
</div>
<p>WKT and WKB can both be transformed back into R native objects by</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_sfc.html'>st_as_sfc</a></span><span class='op'>(</span><span class='st'>"LINESTRING(10 5, 9 4, 8 3, 7 2, 6 1)"</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_sfc.html'>st_as_sfc</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/structure.html'>structure</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_binary.html'>st_as_binary</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span>, class <span class='op'>=</span> <span class='st'>"WKB"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<p>GDAL, GEOS, spatial databases and GIS read and write WKB which is fast and precise. Conversion between R native objects and WKB is done by package <code>sf</code> in compiled (C++/Rcpp) code, making this a reusable and fast route for I/O of simple feature geometries in R.</p>
<h4 id="precision">Precision</h4>
<p>One of the attributes of a geometry list-column (<code>sfc</code>) is the <code>precision</code>: a double number that, when non-zero, causes some rounding during conversion to WKB, which might help certain geometrical operations succeed that would otherwise fail due to floating point representation. The model is that of GEOS, which copies from the Java Topology Suite (<a href="https://locationtech.github.io/jts/">JTS</a>), and works like this:</p>
<ul>
<li>if precision is zero (default, unspecified), nothing is modified</li>
<li>negative values convert to float (4-byte real) precision</li>
<li>positive values convert to <code>round(x*precision)/precision</code>.</li>
</ul>
<p>For the precision model, see also <a href="https://locationtech.github.io/jts/javadoc/org/locationtech/jts/geom/PrecisionModel.html">here</a>, where it is written that:  to specify 3 decimal places of precision, use a scale factor of 1000. To specify -3 decimal places of precision (i.e.rounding to the nearest 1000), use a scale factor of 0.001. Note that all coordinates, so also <code>Z</code> or <code>M</code> values (if present) are affected. Choosing values for <code>precision</code> may require some experimenting.</p>
<h3 id="reading-and-writing">Reading and writing</h3>
<p>As weve seen above, reading spatial data from an external file can be done by</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>filename</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"shape/nc.shp"</span>, package<span class='op'>=</span><span class='st'>"sf"</span><span class='op'>)</span>
<span class='va'>nc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='va'>filename</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `nc&#39; from data source `C:\Users\blancb\Local\R\win-library\4.0\sf\shape\nc.shp&#39; using driver `ESRI Shapefile&#39;
Simple feature collection with 100 features and 14 fields
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
geographic CRS: NAD27</code></pre>
</div>
we can suppress the output by adding argument <code>quiet=TRUE</code> or by using the otherwise nearly identical but more quiet
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>read_sf</a></span><span class='op'>(</span><span class='va'>filename</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Writing takes place in the same fashion, using <code>st_write</code>. If we repeat this, we get an error message that the file already exists, and we can overwrite by adding the <code>delete_layer</code> parameter.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_write.html'>st_write</a></span><span class='op'>(</span><span class='va'>nc</span>, <span class='st'>"data/nc.shp"</span>, delete_layer <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Deleting layer `nc&#39; using driver `ESRI Shapefile&#39;
Writing layer `nc&#39; to data source `data/nc.shp&#39; using driver `ESRI Shapefile&#39;
Writing 100 features with 14 fields and geometry type Multi Polygon.</code></pre>
</div>
<p>Or, we can use its quiet alternative that does this by default,</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_write.html'>write_sf</a></span><span class='op'>(</span><span class='va'>nc</span>, <span class='st'>"data/nc.shp"</span><span class='op'>)</span> <span class='co'># silently overwrites</span>
</code></pre>
</div>
</div>
<h4 id="driver-specific-options">Driver-specific options</h4>
<p>The <code>dsn</code> and <code>layer</code> arguments to <code>st_read</code> and <code>st_write</code> denote a data source name and optionally a layer name. Their exact interpretation as well as the options they support vary per driver, the <a href="http://www.gdal.org/ogr_formats.html">GDAL driver documentation</a> is best consulted for this. For instance, a PostGIS table in database <code>postgis</code> might be read by</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>meuse</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='st'>"PG:dbname=postgis"</span>, <span class='st'>"meuse"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>where the <code>PG:</code> string indicates this concerns the PostGIS driver, followed by database name, and possibly port and user credentials. When the <code>layer</code> and <code>driver</code> arguments are not specified, <code>st_read</code> tries to guess them from the datasource, or else simply reads the first layer, giving a warning in case there are more.</p>
<p><code>st_read</code> typically reads the coordinate reference system as <code>proj4string</code>, but not the EPSG (SRID). GDAL cannot retrieve SRID (EPSG code) from <code>proj4string</code> strings, and, when needed, it has to be set by the user. See also the section on <a href="#crs">coordinate reference systems</a>.</p>
<p><code>st_drivers()</code> returns a <code>data.frame</code> listing available drivers, and their metadata: names, whether a driver can write, and whether it is a raster and/or vector driver. All drivers can read. Reading of some common data formats is illustrated below:</p>
<code>st_layers(dsn)</code> lists the layers present in data source <code>dsn</code>, and gives the number of fields, features and geometry type for each layer:
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_layers.html'>st_layers</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"osm/overpass.osm"</span>, package<span class='op'>=</span><span class='st'>"sf"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Driver: OSM 
Available layers:
        layer_name       geometry_type features fields
1           points               Point       NA     10
2            lines         Line String       NA      9
3 multilinestrings   Multi Line String       NA      4
4    multipolygons       Multi Polygon       NA     25
5  other_relations Geometry Collection       NA      4</code></pre>
</div>
we see that in this case, the number of features is <code>NA</code> because for this xml file the whole file needs to be read, which may be costly for large files. We can force counting by
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/Sys.setenv.html'>Sys.setenv</a></span><span class='op'>(</span>OSM_USE_CUSTOM_INDEXING<span class='op'>=</span><span class='st'>"NO"</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_layers.html'>st_layers</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"osm/overpass.osm"</span>, package<span class='op'>=</span><span class='st'>"sf"</span><span class='op'>)</span>, do_count <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Driver: OSM 
Available layers:
        layer_name       geometry_type features fields
1           points               Point        1     10
2            lines         Line String        0      9
3 multilinestrings   Multi Line String        0      4
4    multipolygons       Multi Polygon       13     25
5  other_relations Geometry Collection        0      4</code></pre>
</div>
Another example of reading kml and kmz files is:
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Download .shp data</span>
<span class='va'>u_shp</span> <span class='op'>&lt;-</span> <span class='st'>"http://coagisweb.cabq.gov/datadownload/biketrails.zip"</span>
<span class='fu'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='op'>(</span><span class='va'>u_shp</span>, <span class='st'>"biketrails.zip"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/unzip.html'>unzip</a></span><span class='op'>(</span><span class='st'>"biketrails.zip"</span><span class='op'>)</span>
<span class='va'>u_kmz</span> <span class='op'>&lt;-</span> <span class='st'>"http://coagisweb.cabq.gov/datadownload/BikePaths.kmz"</span>
<span class='fu'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='op'>(</span><span class='va'>u_kmz</span>, <span class='st'>"BikePaths.kmz"</span><span class='op'>)</span>
<span class='co'># Read file formats</span>
<span class='va'>biketrails_shp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='st'>"biketrails.shp"</span><span class='op'>)</span>
<span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Sys.info.html'>Sys.info</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>==</span> <span class='st'>"Linux"</span><span class='op'>)</span> <span class='co'># may not work if not Linux</span>
  <span class='va'>biketrails_kmz</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='st'>"BikePaths.kmz"</span><span class='op'>)</span>
<span class='va'>u_kml</span> <span class='op'>=</span> <span class='st'>"http://www.northeastraces.com/oxonraces.com/nearme/safe/6.kml"</span>
<span class='fu'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='op'>(</span><span class='va'>u_kml</span>, <span class='st'>"bikeraces.kml"</span><span class='op'>)</span>
<span class='va'>bikraces</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='st'>"bikeraces.kml"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="crud">Create, read, update and delete</h4>
<p>GDAL provides the <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">crud</a> (create, read, update, delete) functions to persistent storage. <code>st_read</code> (or <code>read_sf</code>) are used for reading. <code>st_write</code> (or <code>write_sf</code>) creates, and has the following arguments to control update and delete:</p>
<ul>
<li><code>update=TRUE</code> causes an existing data source to be updated, if it exists; this option is by default <code>TRUE</code> for all database drivers, where the database is updated by adding a table.</li>
<li><code>delete_layer=TRUE</code> causes <code>st_write</code> try to open the the data source and delete the layer; no errors are given if the data source is not present, or the layer does not exist in the data source.</li>
<li><code>delete_dsn=TRUE</code> causes <code>st_write</code> to delete the data source when present, before writing the layer in a newly created data source. No error is given when the data source does not exist. This option should be handled with care, as it may wipe complete directories or databases.</li>
</ul>
<h4 id="benchmarks">Benchmarks</h4>
<p>Benchmarks show that <code>st_read()</code> is faster than <code>rgdal::readOGR()</code>, for example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>shp_read_sp</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'>rgdal</span><span class='fu'>::</span><span class='fu'><a href='http://rgdal.r-forge.r-project.org/reference/readOGR.html'>readOGR</a></span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"."</span>, layer <span class='op'>=</span> <span class='st'>"biketrails"</span><span class='op'>)</span>
<span class='va'>shp_read_sf</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='st'>"biketrails.shp"</span><span class='op'>)</span>
<span class='kw'>if</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Sys.info.html'>Sys.info</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span> <span class='op'>==</span> <span class='st'>"Linux"</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>kmz_read_sp</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'>rgdal</span><span class='fu'>::</span><span class='fu'><a href='http://rgdal.r-forge.r-project.org/reference/readOGR.html'>readOGR</a></span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"BikePaths.kmz"</span><span class='op'>)</span>
  <span class='va'>kmz_read_sf</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='st'>"BikePaths.kmz"</span><span class='op'>)</span>
<span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>
    <span class='va'>kmz_read_sp</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span><span class='op'>(</span><span class='st'>"NA"</span><span class='op'>)</span>
    <span class='va'>kmz_read_sf</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span><span class='op'>(</span><span class='st'>"NA"</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='va'>kml_read_sp</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'>rgdal</span><span class='fu'>::</span><span class='fu'><a href='http://rgdal.r-forge.r-project.org/reference/readOGR.html'>readOGR</a></span><span class='op'>(</span><span class='st'>"bikeraces.kml"</span><span class='op'>)</span>
<span class='va'>kml_read_sf</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='op'>)</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='st'>"bikeraces.kml"</span><span class='op'>)</span>
<span class='fu'>microbenchmark</span><span class='fu'>::</span><span class='fu'>microbenchmark</span><span class='op'>(</span><span class='fu'>shp_read_sp</span><span class='op'>(</span><span class='op'>)</span>, <span class='fu'>shp_read_sf</span><span class='op'>(</span><span class='op'>)</span>,
                               <span class='fu'>kmz_read_sp</span><span class='op'>(</span><span class='op'>)</span>, <span class='fu'>kmz_read_sf</span><span class='op'>(</span><span class='op'>)</span>,
                               <span class='fu'>kml_read_sp</span><span class='op'>(</span><span class='op'>)</span>, <span class='fu'>kml_read_sf</span><span class='op'>(</span><span class='op'>)</span>, times <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<p>On a laptop with an Intel i5-4300M CPU @ 2.60GHz with ssd the results were as follows:</p>
<pre><code>Unit: milliseconds
          expr         min          lq       mean     median          uq
 shp_read_sp() 4993.954530 5010.798950 5072.94155 5049.68057 5116.050416
 shp_read_sf()  331.580349  341.608044  352.99233  353.00169  364.601151
 kmz_read_sp() 4940.108931 4966.177983 5021.47680 4989.82589 5038.393259
 kmz_read_sf() 1086.925988 1088.850196 1103.04846 1090.15794 1100.518670
 kml_read_sp()  167.556454  176.395750  182.10324  185.31941  187.720235
 kml_read_sf()    8.132629    8.268952   10.44328    8.52626    9.420043
        max neval   cld
 5186.16240    10     e
  376.64045    10   c  
 5282.25874    10     e
 1178.42358    10    d
  189.29191    10  b   
   26.20221    10 a    </code></pre>
<p>This shows that <code>sf::st_read()</code> is substantially faster than <code>rgdal::readOGR()</code>: by a factor of 14-18 for the Shapefile and KML files, and more than a factor of 4 for the KMZ file used in this benchmark, respectively.</p>
<h4 id="connection-to-spatial-databases">Connection to spatial databases</h4>
<p>Read and write functions, <code>st_read()</code> and <code>st_write()</code>, can handle connections to spatial databases to read WKB or WKT directly without using GDAL. Although intended to use the DBI interface, current use and testing of these functions are limited to PostGIS.</p>
<h3 id="crs">Coordinate reference systems and transformations</h3>
<p>Coordinate reference systems (CRS) are like measurement units for coordinates: they specify which location on Earth a particular coordinate pair refers to. We saw above that <code>sfc</code> objects (geometry list-columns) have two attributes to store a CRS: <code>epsg</code> and <code>proj4string</code>. This implies that all geometries in a geometry list-column must have the same CRS. Both may be <code>NA</code>, e.g.in case the CRS is unknown, or when we work with local coordinate systems (e.g.inside a building, a body, or an abstract space).</p>
<p><code>proj4string</code> is a generic, string-based description of a CRS, understood by the <a href="https://proj4.org/">PROJ</a> library. It defines projection types and (often) defines parameter values for particular projections, and hence can cover an infinite amount of different projections. This library (also used by GDAL) provides functions to convert or transform between different CRS. <code>epsg</code> is the integer ID for a particular, known CRS that can be resolved into a <code>proj4string</code>. Some <code>proj4string</code> values can resolved back into their corresponding <code>epsg</code> ID, but this does not always work.</p>
<p>The importance of having <code>epsg</code> values stored with data besides <code>proj4string</code> values is that the <code>epsg</code> refers to particular, well-known CRS, whose parameters may change (improve) over time; fixing only the <code>proj4string</code> may remove the possibility to benefit from such improvements, and limit some of the provenance of datasets, but may help reproducibility.</p>
<p>Coordinate reference system transformations can be carried out using <code>st_transform</code>, e.g.converting longitudes/latitudes in NAD27 to web mercator (EPSG:3857) can be done by</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nc.web_mercator</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>st_transform</a></span><span class='op'>(</span><span class='va'>nc</span>, <span class='fl'>3857</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_geometry.html'>st_geometry</a></span><span class='op'>(</span><span class='va'>nc.web_mercator</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>4</span><span class='op'>]</span><span class='op'>]</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>3</span>,<span class='op'>]</span>
</code></pre>
</div>
<pre><code>         [,1]    [,2]
[1,] -8463267 4377507
[2,] -8460094 4377498
[3,] -8450437 4375541</code></pre>
</div>
<h3 id="conversion-including-to-and-from-sp">Conversion, including to and from sp</h3>
<p><code>sf</code> objects and objects deriving from <code>Spatial</code> (package <code>sp</code>) can be coerced both ways:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>showMethods</span><span class='op'>(</span><span class='st'>"coerce"</span>, classes <span class='op'>=</span> <span class='st'>"sf"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Function: coerce (package methods)
from=&quot;sf&quot;, to=&quot;Spatial&quot;
from=&quot;Spatial&quot;, to=&quot;sf&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/methods.html'>methods</a></span><span class='op'>(</span><span class='va'>st_as_sf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] st_as_sf.data.frame*   st_as_sf.lpp*         
 [3] st_as_sf.map*          st_as_sf.owin*        
 [5] st_as_sf.ppp*          st_as_sf.psp*         
 [7] st_as_sf.s2_geography* st_as_sf.sf*          
 [9] st_as_sf.sfc*          st_as_sf.Spatial*     
see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/methods.html'>methods</a></span><span class='op'>(</span><span class='va'>st_as_sfc</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> [1] st_as_sfc.bbox*               st_as_sfc.blob*              
 [3] st_as_sfc.character*          st_as_sfc.dimensions*        
 [5] st_as_sfc.factor*             st_as_sfc.list*              
 [7] st_as_sfc.map*                st_as_sfc.owin*              
 [9] st_as_sfc.pq_geometry*        st_as_sfc.psp*               
[11] st_as_sfc.raw*                st_as_sfc.s2_geography*      
[13] st_as_sfc.SpatialLines*       st_as_sfc.SpatialMultiPoints*
[15] st_as_sfc.SpatialPixels*      st_as_sfc.SpatialPoints*     
[17] st_as_sfc.SpatialPolygons*    st_as_sfc.tess*              
[19] st_as_sfc.wk_wkb*             st_as_sfc.WKB*               
see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># anticipate that sp::CRS will expand proj4strings:</span>
<span class='va'>p4s</span> <span class='op'>&lt;-</span> <span class='st'>"+proj=longlat +datum=NAD27 +no_defs +ellps=clrk66 +nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat"</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_crs.html'>st_crs</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>p4s</span>
<span class='co'># anticipate geometry column name changes:</span>
<span class='fu'><a href='https://rdrr.io/r/base/names.html'>names</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>15</span><span class='op'>]</span> <span class='op'>=</span> <span class='st'>"geometry"</span>
<span class='fu'><a href='https://rdrr.io/r/base/attr.html'>attr</a></span><span class='op'>(</span><span class='va'>nc</span>, <span class='st'>"sf_column"</span><span class='op'>)</span> <span class='op'>=</span> <span class='st'>"geometry"</span>
<span class='va'>nc.sp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/coerce-methods.html'>as</a></span><span class='op'>(</span><span class='va'>nc</span>, <span class='st'>"Spatial"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/class.html'>class</a></span><span class='op'>(</span><span class='va'>nc.sp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;SpatialPolygonsDataFrame&quot;
attr(,&quot;package&quot;)
[1] &quot;sp&quot;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nc2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_sf.html'>st_as_sf</a></span><span class='op'>(</span><span class='va'>nc.sp</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span><span class='op'>(</span><span class='va'>nc</span>, <span class='va'>nc2</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;Attributes: &lt; Component \&quot;class\&quot;: Lengths (4, 2) differ (string compare on first 2) &gt;&quot;           
[2] &quot;Attributes: &lt; Component \&quot;class\&quot;: 1 string mismatch &gt;&quot;                                           
[3] &quot;Component \&quot;geometry\&quot;: Attributes: &lt; Component \&quot;crs\&quot;: Component \&quot;input\&quot;: 1 string mismatch &gt;&quot;
[4] &quot;Component \&quot;geometry\&quot;: Attributes: &lt; Component \&quot;crs\&quot;: Component \&quot;wkt\&quot;: 1 string mismatch &gt;&quot;  </code></pre>
</div>
<p>As the <code>Spatial*</code> objects only support <code>MULTILINESTRING</code> and <code>MULTIPOLYGON</code>, <code>LINESTRING</code> and <code>POLYGON</code> geometries are automatically coerced into their <code>MULTI</code> form. When converting <code>Spatial*</code> into <code>sf</code>, if all geometries consist of a single <code>POLYGON</code> (possibly with holes), a <code>POLYGON</code> and otherwise all geometries are returned as <code>MULTIPOLYGON</code>: a mix of <code>POLYGON</code> and <code>MULTIPOLYGON</code> (such as common in shapefiles) is not created. Argument <code>forceMulti=TRUE</code> will override this, and create <code>MULTIPOLYGON</code>s in all cases. For <code>LINES</code> the situation is identical.</p>
<h3 id="geometrycollection">Geometrical operations</h3>
<p>The standard for simple feature access defines a number of geometrical operations.</p>
<p><code>st_is_valid</code> and <code>st_is_simple</code> return a boolean indicating whether a geometry is valid or simple.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/valid.html'>st_is_valid</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span>,<span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] TRUE TRUE</code></pre>
</div>
<p><code>st_distance</code> returns a dense numeric matrix with distances between geometries. <code>st_relate</code> returns a character matrix with the <a href="https://en.wikipedia.org/wiki/DE-9IM#Illustration">DE9-IM</a> values for each pair of geometries:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>x</span> <span class='op'>=</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>st_transform</a></span><span class='op'>(</span><span class='va'>nc</span>, <span class='fl'>32119</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_measures.html'>st_distance</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>4</span>,<span class='fl'>22</span><span class='op'>)</span>,<span class='op'>]</span>, <span class='va'>x</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>33</span>,<span class='fl'>55</span>,<span class='fl'>56</span><span class='op'>)</span>,<span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Units: [m]
          [,1]     [,2]      [,3]     [,4]
[1,]      0.00 312176.2 128338.51 475608.8
[2,] 440548.35 114938.1 590417.79      0.0
[3,]  18943.74 352708.6  78754.75 517511.6</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_relate.html'>st_relate</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>,<span class='op'>]</span>, <span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>,<span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>     [,1]        [,2]        [,3]        [,4]       
[1,] &quot;2FFF1FFF2&quot; &quot;FF2F11212&quot; &quot;FF2FF1212&quot; &quot;FF2FF1212&quot;
[2,] &quot;FF2F11212&quot; &quot;2FFF1FFF2&quot; &quot;FF2F11212&quot; &quot;FF2FF1212&quot;
[3,] &quot;FF2FF1212&quot; &quot;FF2F11212&quot; &quot;2FFF1FFF2&quot; &quot;FF2FF1212&quot;
[4,] &quot;FF2FF1212&quot; &quot;FF2FF1212&quot; &quot;FF2FF1212&quot; &quot;2FFF1FFF2&quot;
[5,] &quot;FF2FF1212&quot; &quot;FF2FF1212&quot; &quot;FF2FF1212&quot; &quot;FF2FF1212&quot;</code></pre>
</div>
<p>The commands <code>st_intersects</code>, <code>st_disjoint</code>, <code>st_touches</code>, <code>st_crosses</code>, <code>st_within</code>, <code>st_contains</code>, <code>st_overlaps</code>, <code>st_equals</code>, <code>st_covers</code>, <code>st_covered_by</code>, <code>st_equals_exact</code> and <code>st_is_within_distance</code> return a sparse matrix with matching (TRUE) indexes, or a full logical matrix:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_binary_pred.html'>st_intersects</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>,<span class='op'>]</span>, <span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>,<span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Sparse geometry binary predicate list of length 5, where the predicate was `intersects&#39;
 1: 1, 2
 2: 1, 2, 3
 3: 2, 3
 4: 4
 5: (empty)</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_binary_pred.html'>st_intersects</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>5</span>,<span class='op'>]</span>, <span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>,<span class='op'>]</span>, sparse <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>      [,1]  [,2]  [,3]  [,4]
[1,]  TRUE  TRUE FALSE FALSE
[2,]  TRUE  TRUE  TRUE FALSE
[3,] FALSE  TRUE  TRUE FALSE
[4,] FALSE FALSE FALSE  TRUE
[5,] FALSE FALSE FALSE FALSE</code></pre>
</div>
<p>The commands <code>st_buffer</code>, <code>st_boundary</code>, <code>st_convexhull</code>, <code>st_union_cascaded</code>, <code>st_simplify</code>, <code>st_triangulate</code>, <code>st_polygonize</code>, <code>st_centroid</code>, <code>st_segmentize</code>, and <code>st_union</code> return new geometries, e.g.:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sel</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>5</span>,<span class='fl'>14</span><span class='op'>)</span>
<span class='va'>geom</span> <span class='op'>=</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_geometry.html'>st_geometry</a></span><span class='op'>(</span><span class='va'>nc.web_mercator</span><span class='op'>[</span><span class='va'>sel</span>,<span class='op'>]</span><span class='op'>)</span>
<span class='va'>buf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_unary.html'>st_buffer</a></span><span class='op'>(</span><span class='va'>geom</span>, dist <span class='op'>=</span> <span class='fl'>30000</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>buf</span>, border <span class='op'>=</span> <span class='st'>'red'</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>geom</span>, add <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_unary.html'>st_buffer</a></span><span class='op'>(</span><span class='va'>geom</span>, <span class='op'>-</span><span class='fl'>5000</span><span class='op'>)</span>, add <span class='op'>=</span> <span class='cn'>TRUE</span>, border <span class='op'>=</span> <span class='st'>'blue'</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="geospatial-data_files/figure-html5/unnamed-chunk-39-1.png" width="624" /></p>
</div>
<p>Commands <code>st_intersection</code>, <code>st_union</code>, <code>st_difference</code>, <code>st_sym_difference</code> return new geometries that are a function of pairs of geometries:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>u</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_combine.html'>st_union</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>u</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="geospatial-data_files/figure-html5/unnamed-chunk-40-1.png" width="624" /></p>
</div>
<p>The following code shows how computing an intersection between two polygons may yield a <code>GEOMETRYCOLLECTION</code> with a point, line and polygon:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>opar</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mfrow <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_polygon</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>7.5</span>,<span class='fl'>7.5</span>,<span class='fl'>0</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='op'>-</span><span class='fl'>1</span>,<span class='op'>-</span><span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_polygon</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>2</span>,<span class='fl'>3</span>,<span class='fl'>4</span>,<span class='fl'>5</span>,<span class='fl'>6</span>,<span class='fl'>7</span>,<span class='fl'>7</span>,<span class='fl'>0</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>.5</span>,<span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0.5</span>,<span class='op'>-</span><span class='fl'>0.5</span>,<span class='op'>-</span><span class='fl'>0.5</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>a</span>, ylim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/title.html'>title</a></span><span class='op'>(</span><span class='st'>"intersecting two polygons:"</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>b</span>, add <span class='op'>=</span> <span class='cn'>TRUE</span>, border <span class='op'>=</span> <span class='st'>'red'</span><span class='op'>)</span>
<span class='op'>(</span><span class='va'>i</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_binary_ops.html'>st_intersection</a></span><span class='op'>(</span><span class='va'>a</span>,<span class='va'>b</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>a</span>, ylim <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/title.html'>title</a></span><span class='op'>(</span><span class='st'>"GEOMETRYCOLLECTION"</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>b</span>, add <span class='op'>=</span> <span class='cn'>TRUE</span>, border <span class='op'>=</span> <span class='st'>'red'</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>i</span>, add <span class='op'>=</span> <span class='cn'>TRUE</span>, col <span class='op'>=</span> <span class='st'>'green'</span>, lwd <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</code></pre>
</div>
<img src="geospatial-data_files/figure-html5/unnamed-chunk-41-1.png" width="672" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span><span class='va'>opar</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h3 id="non-simple-and-non-valid-geometries">Non-simple and non-valid geometries</h3>
<p>Non-simple geometries are for instance self-intersecting lines (left); non-valid geometries are for instance polygons with slivers (middle) or self-intersections (right).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://r-spatial.github.io/sf/'>sf</a></span><span class='op'>)</span>
<span class='va'>x1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_linestring</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>x2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_polygon</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0.6</span>,<span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>x3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_polygon</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>0</span><span class='op'>)</span>,<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_query.html'>st_is_simple</a></span><span class='op'>(</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/sfc.html'>st_sfc</a></span><span class='op'>(</span><span class='va'>x1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/valid.html'>st_is_valid</a></span><span class='op'>(</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/sfc.html'>st_sfc</a></span><span class='op'>(</span><span class='va'>x2</span>,<span class='va'>x3</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE FALSE</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="geospatial-data_files/figure-html5/unnamed-chunk-43-1.png" width="624" /></p>
</div>
<h2 id="units">Units</h2>
<p>Where possible geometric operations such as <code>st_distance()</code>, <code>st_length()</code> and <code>st_area()</code> report results with a units attribute appropriate for the CRS:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>a</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_measures.html'>st_area</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>[</span><span class='fl'>1</span>,<span class='op'>]</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/attributes.html'>attributes</a></span><span class='op'>(</span><span class='va'>a</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>$units
$numerator
[1] &quot;m&quot; &quot;m&quot;

$denominator
character(0)

attr(,&quot;class&quot;)
[1] &quot;symbolic_units&quot;

$class
[1] &quot;units&quot;</code></pre>
</div>
<p>The <strong>units</strong> package can be used to convert between units:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>units</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/units/man/set_units.html'>set_units</a></span><span class='op'>(</span><span class='va'>a</span>, <span class='va'>km</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span> <span class='co'># result in square kilometers</span>
</code></pre>
</div>
<pre><code>1137.389 [km^2]</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>units</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/units/man/set_units.html'>set_units</a></span><span class='op'>(</span><span class='va'>a</span>, <span class='va'>ha</span><span class='op'>)</span> <span class='co'># result in hectares</span>
</code></pre>
</div>
<pre><code>113738.9 [ha]</code></pre>
</div>
<p>The result can be stripped of their attributes if needs be:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='va'>a</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] 1137388604</code></pre>
</div>
<h2 id="how-attributes-relate-to-geometries">How attributes relate to geometries</h2>
<p>(This will eventually be the topic of a new vignette; now here to explain the last attribute of <code>sf</code> objects)</p>
<p>The standard documents about simple features are very detailed about the geometric aspects of features, but say nearly nothing about attributes, except that their values should be understood in another reference system (their units of measurement, e.g.as implemented in the package <a href="https://CRAN.R-project.org/package=units"><strong>units</strong></a>). But there is more to it. For variables like air temperature, interpolation usually makes sense, for others like human body temperature it doesnt. The difference is that air temperature is a field, which continues between sensors, where body temperature is an object property that doesnt extend beyond the body  in spatial statistics bodies would be called a point pattern, their temperature the point marks. For geometries that have a non-zero size (positive length or area), attribute values may refer to the every sub-geometry (every point), or may summarize the geometry. For example, a states population density summarizes the whole state, and is not a meaningful estimate of population density for a give point inside the state without the context of the state. On the other hand, land use or geological maps give polygons with constant land use or geology, every point inside the polygon is of that class. Some properties are spatially <a href="https://en.wikipedia.org/wiki/Intensive_and_extensive_properties">extensive</a>, meaning that attributes would summed up when two geometries are merged: population is an example. Other properties are spatially intensive, and should be averaged, with population density the example.</p>
<p>Simple feature objects of class <code>sf</code> have an <em>agr</em> attribute that points to the <em>attribute-geometry-relationship</em>, how attributes relate to their geometry. It can be defined at creation time:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nc</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"shape/nc.shp"</span>, package<span class='op'>=</span><span class='st'>"sf"</span><span class='op'>)</span>,
    agr <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>AREA <span class='op'>=</span> <span class='st'>"aggregate"</span>, PERIMETER <span class='op'>=</span> <span class='st'>"aggregate"</span>, CNTY_ <span class='op'>=</span> <span class='st'>"identity"</span>,
        CNTY_ID <span class='op'>=</span> <span class='st'>"identity"</span>, NAME <span class='op'>=</span> <span class='st'>"identity"</span>, FIPS <span class='op'>=</span> <span class='st'>"identity"</span>, FIPSNO <span class='op'>=</span> <span class='st'>"identity"</span>,
        CRESS_ID <span class='op'>=</span> <span class='st'>"identity"</span>, BIR74 <span class='op'>=</span> <span class='st'>"aggregate"</span>, SID74 <span class='op'>=</span> <span class='st'>"aggregate"</span>, NWBIR74 <span class='op'>=</span> <span class='st'>"aggregate"</span>,
        BIR79 <span class='op'>=</span> <span class='st'>"aggregate"</span>, SID79 <span class='op'>=</span> <span class='st'>"aggregate"</span>, NWBIR79 <span class='op'>=</span> <span class='st'>"aggregate"</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `nc&#39; from data source `C:\Users\blancb\Local\R\win-library\4.0\sf\shape\nc.shp&#39; using driver `ESRI Shapefile&#39;
Simple feature collection with 100 features and 14 fields
Attribute-geometry relationship: 0 constant, 8 aggregate, 6 identity
geometry type:  MULTIPOLYGON
dimension:      XY
bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
geographic CRS: NAD27</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_agr.html'>st_agr</a></span><span class='op'>(</span><span class='va'>nc</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>     AREA PERIMETER     CNTY_   CNTY_ID      NAME      FIPS    FIPSNO 
aggregate aggregate  identity  identity  identity  identity  identity 
 CRESS_ID     BIR74     SID74   NWBIR74     BIR79     SID79   NWBIR79 
 identity aggregate aggregate aggregate aggregate aggregate aggregate 
Levels: constant aggregate identity</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>meuse</span>, package <span class='op'>=</span> <span class='st'>"sp"</span><span class='op'>)</span>
<span class='va'>meuse_sf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_sf.html'>st_as_sf</a></span><span class='op'>(</span><span class='va'>meuse</span>, coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"x"</span>, <span class='st'>"y"</span><span class='op'>)</span>, crs <span class='op'>=</span> <span class='fl'>28992</span>, agr <span class='op'>=</span> <span class='st'>"constant"</span><span class='op'>)</span>
<span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_agr.html'>st_agr</a></span><span class='op'>(</span><span class='va'>meuse_sf</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code> cadmium   copper     lead     zinc     elev     dist       om 
constant constant constant constant constant constant constant 
   ffreq     soil     lime  landuse   dist.m 
constant constant constant constant constant 
Levels: constant aggregate identity</code></pre>
</div>
<p>When not specified, this field is filled with <code>NA</code> values, but if non-<code>NA</code>, it has one of three possibilities</p>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 82%" />
</colgroup>
<thead>
<tr class="header">
<th>value</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>constant</td>
<td>a variable that has a constant value at every location over a spatial extent; examples: soil type, climate zone, land use</td>
</tr>
<tr class="even">
<td>aggregate</td>
<td>values are summary values (aggregates) over the geometry, e.g.population density, dominant land use</td>
</tr>
<tr class="odd">
<td>identity</td>
<td>values identify the geometry: they refer to (the whole of) this and only this geometry</td>
</tr>
</tbody>
</table>
<p>With this information (still to be done) we can for instance</p>
<ul>
<li>either return missing values or generate warnings when a <em>aggregate</em> value at a point location inside a polygon is retrieved, or</li>
<li>list the implicit assumptions made when retrieving attribute values at points inside a polygon when <code>relation_to_geometry</code> is missing.</li>
<li>decide what to do with attributes when a geometry is split: do nothing in case the attribute is constant, give an error or warning in case it is an aggregate, change the <code>relation_to_geometry</code> to <em>constant</em> in case it was <em>identity</em>.</li>
</ul>
<h3 id="further-reading">Further reading:</h3>
<p>I recommend skimming the other articles (#2-#6) on the <a href="https://r-spatial.github.io/sf/articles/">sf documentation website</a>. They go in depth on contents covered in article #1 copied above.</p>
<h1 id="leaflet">Leaflet</h1>
<p><em><strong>Acknowledgment:</strong> This portion of this module heavily draws upon, including direct copy-paste of markdown content, the the <a href="https://rstudio.github.io/leaflet/">documentation website</a> developed for the <code>leaflet</code> package.</em></p>
<h2 id="introduction-1">Introduction</h2>
<p><a href="http://leafletjs.com">Leaflet</a> is one of the most popular open-source JavaScript libraries for interactive maps. Its used by websites ranging from <a href="http://www.nytimes.com/projects/elections/2013/nyc-primary/mayor/map.html">The New York Times</a> and <a href="http://www.washingtonpost.com/sf/local/2013/11/09/washington-a-world-apart/">The Washington Post</a> to <a href="https://github.com/blog/1528-there-s-a-map-for-that">GitHub</a> and <a href="https://www.flickr.com/map">Flickr</a>, as well as GIS specialists like <a href="http://www.openstreetmap.org/">OpenStreetMap</a>, <a href="http://www.mapbox.com/">Mapbox</a>, and <a href="http://cartodb.com/">CartoDB</a>.</p>
<p>This R package makes it easy to integrate and control Leaflet maps in R.</p>
<h3 id="features">Features</h3>
<ul>
<li>Interactive panning/zooming</li>
<li>Compose maps using arbitrary combinations of:
<ul>
<li>Map tiles</li>
<li>Markers</li>
<li>Polygons</li>
<li>Lines</li>
<li>Popups</li>
<li>GeoJSON</li>
</ul></li>
<li>Create maps right from the R console or RStudio</li>
<li>Embed maps in <a href="http://yihui.name/knitr/">knitr</a>/<a href="http://rmarkdown.rstudio.com/">R Markdown</a> documents and <a href="http://shiny.rstudio.com/">Shiny</a> apps</li>
<li>Easily render spatial objects from the <code>sp</code> or <code>sf</code> packages, or data frames with latitude/longitude columns</li>
<li>Use map bounds and mouse events to drive Shiny logic</li>
<li>Display maps in non spherical mercator projections</li>
<li>Augment map features using chosen plugins from <a href="http://leafletjs.com/plugins">leaflet plugins repository</a></li>
</ul>
<h3 id="installation">Installation</h3>
<p>To install this R package, run <code>install.packages("leaflet")</code> command at your R prompt. Once installed, you can use this package at the R console, within <a href="http://rmarkdown.rstudio.com/">R Markdown</a> documents, and within <a href="http://shiny.rstudio.com/">Shiny</a> applications.</p>
<h3 id="basic-usage">Basic Usage</h3>
<p>You create a Leaflet map with these basic steps:</p>
<ol type="1">
<li>Create a map widget by calling <code>leaflet()</code>.</li>
<li>Add <em>layers</em> (i.e., features) to the map by using layer functions (e.g.<code>addTiles</code>, <code>addMarkers</code>, <code>addPolygons</code>) to modify the map widget.</li>
<li>Repeat step 2 as desired.</li>
<li>Print the map widget to display it.</li>
</ol>
<p>Heres a basic example:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://rstudio.github.io/leaflet/'>leaflet</a></span><span class='op'>)</span>
<span class='va'>m</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>  <span class='co'># Add default OpenStreetMap map tiles</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span>lng<span class='op'>=</span><span class='fl'>174.768</span>, lat<span class='op'>=</span><span class='op'>-</span><span class='fl'>36.852</span>, popup<span class='op'>=</span><span class='st'>"The birthplace of R"</span><span class='op'>)</span>
<span class='va'>m</span>  <span class='co'># Print the map</span>
</code></pre>
</div>
<div id="htmlwidget-679354faedec9004ef06" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-679354faedec9004ef06">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[-36.852,174.768,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},"The birthplace of R",null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-36.852,-36.852],"lng":[174.768,174.768]}},"evals":[],"jsHooks":[]}</script>
</div>
<h2 id="the-map-widget">The Map Widget</h2>
<p>The function <code>leaflet()</code> returns a Leaflet map widget, which stores a list of objects that can be modified or updated later. Most functions in this package have an argument <code>map</code> as their first argument, which makes it easy to use the pipe operator <code>%&gt;%</code> in the <strong>magrittr</strong> package, as you have seen from the example in the <a href="./">Introduction</a>.</p>
<h3 id="initializing-options">Initializing Options</h3>
<p>The map widget can be initialized with certain parameters. This is achieved by populating the <code>options</code> argument as shown below.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Set value for the minZoom and maxZoom settings.</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span>options <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leafletOptions</a></span><span class='op'>(</span>minZoom <span class='op'>=</span> <span class='fl'>0</span>, maxZoom <span class='op'>=</span> <span class='fl'>18</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>The <code>leafletOptions()</code> can be passed any option described in the leaflet <a href="http://leafletjs.com/reference-1.0.0.html#map-option">reference document</a>. Using the <code>leafletOptions()</code>, you can set a custom <a href="https://en.wikipedia.org/wiki/Spatial_reference_system">CRS</a> and have your map displayed in a non spherical mercator projection as described in <a href="https://rstudio.github.io/leaflet/projections.html">projections</a>.</p>
<h3 id="map-methods">Map Methods</h3>
<p>You can manipulate the attributes of the map widget using a series of methods. Please see the help page <code>?setView</code> for details.</p>
<ul>
<li><code>setView()</code> sets the center of the map view and the zoom level;</li>
<li><code>fitBounds()</code> fits the view into the rectangle <code>[lng1, lat1]</code>  <code>[lng2, lat2]</code>;</li>
<li><code>clearBounds()</code> clears the bound, so that the view will be automatically determined by the range of latitude/longitude data in the map layers if provided;</li>
</ul>
<h3 id="the-data-object">The Data Object</h3>
<p>Both <code>leaflet()</code> and the map layer functions have an optional <code>data</code> parameter that is designed to receive spatial data in one of several forms:</p>
<ul>
<li>From base R:
<ul>
<li>lng/lat matrix</li>
<li>data frame with lng/lat columns</li>
</ul></li>
<li>From the <a href="http://cran.rstudio.com/package=sp"><strong>sp</strong> package</a>:
<ul>
<li><code>SpatialPoints[DataFrame]</code></li>
<li><code>Line</code>/<code>Lines</code></li>
<li><code>SpatialLines[DataFrame]</code></li>
<li><code>Polygon</code>/<code>Polygons</code></li>
<li><code>SpatialPolygons[DataFrame]</code></li>
</ul></li>
<li>From the <a href="http://cran.rstudio.com/package=maps"><strong>maps</strong> package</a>:
<ul>
<li>the data frame from returned from <code>map()</code></li>
</ul></li>
</ul>
<p>The <code>data</code> argument is used to derive spatial data for functions that need it; for example, if <code>data</code> is a <code>SpatialPolygonsDataFrame</code> object, then calling <code>addPolygons</code> on that map widget will know to add the polygons from that <code>SpatialPolygonsDataFrame</code>.</p>
<p>It is straightforward to derive these variables from <strong>sp</strong> objects since they always represent spatial data in the same way. On the other hand, for a normal matrix or data frame, any numeric column could potentially contain spatial data. So we resort to guessing based on column names:</p>
<ul>
<li>the latitude variable is guessed by looking for columns named <code>lat</code> or <code>latitude</code> (case-insensitive)</li>
<li>the longitude variable is guessed by looking for <code>lng</code>, <code>long</code>, or <code>longitude</code></li>
</ul>
<p>You can always explicitly identify latitude/longitude columns by providing <code>lng</code> and <code>lat</code> arguments to the layer function.</p>
<p>For example, we do not specify the values for the arguments <code>lat</code> and <code>lng</code> in <code>addCircles()</code> below, but the columns <code>Lat</code> and <code>Long</code> in the data frame <code>df</code> will be automatically used:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># add some circles to a map</span>
<span class='va'>df</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>Lat <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, Long <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircles</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>You can also explicitly specify the <code>Lat</code> and <code>Long</code> columns (see below for more info on the <code>~</code> syntax):</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircles</a></span><span class='op'>(</span>lng <span class='op'>=</span> <span class='op'>~</span><span class='va'>Long</span>, lat <span class='op'>=</span> <span class='op'>~</span><span class='va'>Lat</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>A map layer may use a different data object to override the data provided in <code>leaflet()</code>. We can rewrite the above example as:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircles</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>df</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircles</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>df</span>, lat <span class='op'>=</span> <span class='op'>~</span> <span class='va'>Lat</span>, lng <span class='op'>=</span> <span class='op'>~</span> <span class='va'>Long</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p>Below are examples of using <code>sf</code>:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#TODO</span>
</code></pre>
</div>
</div>
<h3 id="the-formula-interface">The Formula Interface</h3>
<p>The arguments of all layer functions can take normal R objects, such as a numeric vector for the <code>lat</code> argument, or a character vector of colors for the <code>color</code> argument. They can also take a one-sided formula, in which case the formula will be evaluated using the <code>data</code> argument as the environment. For example, <code>~ x</code> means the variable <code>x</code> in the data object, and you can write arbitrary expressions on the right-hand side, e.g., <code>~ sqrt(x + 1)</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>m</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>df</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>
  lat <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>100</span><span class='op'>)</span>,
  lng <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>100</span><span class='op'>)</span>,
  size <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='fl'>5</span>, <span class='fl'>20</span><span class='op'>)</span>,
  color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/grDevices/colors.html'>colors</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='fl'>100</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='va'>m</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='va'>m</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircleMarkers</a></span><span class='op'>(</span>radius <span class='op'>=</span> <span class='op'>~</span><span class='va'>size</span>, color <span class='op'>=</span> <span class='op'>~</span><span class='va'>color</span>, fill <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='va'>m</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircleMarkers</a></span><span class='op'>(</span>radius <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>100</span>, <span class='fl'>4</span>, <span class='fl'>10</span><span class='op'>)</span>, color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'red'</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="markers">Markers</h2>
<p>Use markers to call out points on the map. Marker locations are expressed in latitude/longitude coordinates, and can either appear as icons or as circles.</p>
<h3 id="data-sources">Data sources</h3>
<p>Point data for markers can come from a variety of sources:</p>
<ul>
<li><code>SpatialPoints</code> or <code>SpatialPointsDataFrame</code> objects (from the <code>sp</code> package)</li>
<li><code>POINT</code>, <code>sfc_POINT</code>, and <code>sf</code> objects (from the <code>sf</code> package); only <code>X</code> and <code>Y</code> dimensions will be considered</li>
<li>Two-column numeric matrices (first column is longitude, second is latitude)</li>
<li>Data frame with latitude and logitude columns. You can explicitly tell the marker function which columns contain the coordinate data (e.g.<code>addMarkers(lng = ~Longitude, lat = ~Latitude)</code>), or let the function look for columns named <code>lat</code>/<code>latitude</code> and <code>lon</code>/<code>lng</code>/<code>long</code>/<code>longitude</code> (case insensitive).</li>
<li>Simply provide numeric vectors as <code>lng</code> and <code>lat</code> arguments</li>
</ul>
<p>Note that <code>MULTIPOINT</code> objects from <code>sf</code> are not supported at this time.</p>
<h3 id="icon-markers">Icon Markers</h3>
<p>Icon markers are added using the <code>addMarkers</code> or the <code>addAwesomeMarkers</code> functions. Their default appearance is a dropped pin. As with most layer functions, the <code>popup</code> argument can be used to add a message to be displayed on click, and the <code>label</code> option can be used to display a text label either on hover or statically.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>quakes</span><span class='op'>)</span>
<span class='co'># Show first 20 rows from the `quakes` dataset</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>quakes</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>20</span>,<span class='op'>]</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>long</span>, <span class='op'>~</span><span class='va'>lat</span>, popup <span class='op'>=</span> <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>mag</span><span class='op'>)</span>, label <span class='op'>=</span> <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>mag</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-ff1d31db023c55092942" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-ff1d31db023c55092942">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[-20.42,-20.62,-26,-17.97,-20.42,-19.68,-11.7,-28.11,-28.74,-17.47,-21.44,-12.26,-18.54,-21,-20.7,-15.94,-13.64,-17.83,-23.5,-22.63],[181.62,181.03,184.1,181.66,181.96,184.31,166.1,181.93,181.74,179.59,180.69,167,182.11,181.66,169.92,184.95,165.96,181.5,179.78,180.31],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["4.8","4.2","5.4","4.1","4","4","4.8","4.4","4.7","4.3","4.4","4.6","4.4","4.4","6.1","4.3","6","4.5","4.4","4.4"],null,null,null,["4.8","4.2","5.4","4.1","4","4","4.8","4.4","4.7","4.3","4.4","4.6","4.4","4.4","6.1","4.3","6","4.5","4.4","4.4"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-28.74,-11.7],"lng":[165.96,184.95]}},"evals":[],"jsHooks":[]}</script>
</div>
<h4 id="customizing-marker-icons">Customizing Marker Icons</h4>
<p>You can provide custom markers in one of several ways, depending on the scenario. For each of these ways, the icon can be provided as either a URL or as a file path.</p>
<p>For the simple case of applying a single icon to a set of markers, use <code>makeIcon()</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>greenLeafIcon</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/makeIcon.html'>makeIcon</a></span><span class='op'>(</span>
  iconUrl <span class='op'>=</span> <span class='st'>"http://leafletjs.com/examples/custom-icons/leaf-green.png"</span>,
  iconWidth <span class='op'>=</span> <span class='fl'>38</span>, iconHeight <span class='op'>=</span> <span class='fl'>95</span>,
  iconAnchorX <span class='op'>=</span> <span class='fl'>22</span>, iconAnchorY <span class='op'>=</span> <span class='fl'>94</span>,
  shadowUrl <span class='op'>=</span> <span class='st'>"http://leafletjs.com/examples/custom-icons/leaf-shadow.png"</span>,
  shadowWidth <span class='op'>=</span> <span class='fl'>50</span>, shadowHeight <span class='op'>=</span> <span class='fl'>64</span>,
  shadowAnchorX <span class='op'>=</span> <span class='fl'>4</span>, shadowAnchorY <span class='op'>=</span> <span class='fl'>62</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>quakes</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>4</span>,<span class='op'>]</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>long</span>, <span class='op'>~</span><span class='va'>lat</span>, icon <span class='op'>=</span> <span class='va'>greenLeafIcon</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-c2c02c9d28d8d2178893" style="width:624px;height:168px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-c2c02c9d28d8d2178893">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[-20.42,-20.62,-26,-17.97],[181.62,181.03,184.1,181.66],{"iconUrl":{"data":"http://leafletjs.com/examples/custom-icons/leaf-green.png","index":0},"iconWidth":38,"iconHeight":95,"iconAnchorX":22,"iconAnchorY":94,"shadowUrl":{"data":"http://leafletjs.com/examples/custom-icons/leaf-shadow.png","index":0},"shadowWidth":50,"shadowHeight":64,"shadowAnchorX":4,"shadowAnchorY":62},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-26,-17.97],"lng":[181.03,184.1]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>If you have several icons to apply that vary only by a couple of parameters (i.e.they share the same size and anchor points but have different URLs), use the <code>icons()</code> function. <code>icons()</code> performs similarly to <code>data.frame()</code>, in that any arguments that are shorter than the number of markers will be recycled to fit.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>quakes1</span> <span class='op'>&lt;-</span> <span class='va'>quakes</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>,<span class='op'>]</span>
<span class='va'>leafIcons</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/icons.html'>icons</a></span><span class='op'>(</span>
  iconUrl <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>quakes1</span><span class='op'>$</span><span class='va'>mag</span> <span class='op'>&lt;</span> <span class='fl'>4.6</span>,
    <span class='st'>"http://leafletjs.com/examples/custom-icons/leaf-green.png"</span>,
    <span class='st'>"http://leafletjs.com/examples/custom-icons/leaf-red.png"</span>
  <span class='op'>)</span>,
  iconWidth <span class='op'>=</span> <span class='fl'>38</span>, iconHeight <span class='op'>=</span> <span class='fl'>95</span>,
  iconAnchorX <span class='op'>=</span> <span class='fl'>22</span>, iconAnchorY <span class='op'>=</span> <span class='fl'>94</span>,
  shadowUrl <span class='op'>=</span> <span class='st'>"http://leafletjs.com/examples/custom-icons/leaf-shadow.png"</span>,
  shadowWidth <span class='op'>=</span> <span class='fl'>50</span>, shadowHeight <span class='op'>=</span> <span class='fl'>64</span>,
  shadowAnchorX <span class='op'>=</span> <span class='fl'>4</span>, shadowAnchorY <span class='op'>=</span> <span class='fl'>62</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>quakes1</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>long</span>, <span class='op'>~</span><span class='va'>lat</span>, icon <span class='op'>=</span> <span class='va'>leafIcons</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-1cb4b879804d3c60fb99" style="width:624px;height:192px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1cb4b879804d3c60fb99">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[-20.42,-20.62,-26,-17.97,-20.42,-19.68,-11.7,-28.11,-28.74,-17.47],[181.62,181.03,184.1,181.66,181.96,184.31,166.1,181.93,181.74,179.59],{"iconUrl":{"data":["http://leafletjs.com/examples/custom-icons/leaf-red.png","http://leafletjs.com/examples/custom-icons/leaf-green.png"],"index":[0,1,0,1,1,1,0,1,0,1]},"iconWidth":38,"iconHeight":95,"iconAnchorX":22,"iconAnchorY":94,"shadowUrl":{"data":"http://leafletjs.com/examples/custom-icons/leaf-shadow.png","index":0},"shadowWidth":50,"shadowHeight":64,"shadowAnchorX":4,"shadowAnchorY":62},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-28.74,-11.7],"lng":[166.1,184.31]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Finally, if you have a set of icons that vary in multiple parameters, it may be more convenient to use the <code>iconList()</code> function. It lets you create a list of (named or unnamed) <code>makeIcon()</code> icons, and select from that list by position or name.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Make a list of icons. We'll index into it based on name.</span>
<span class='va'>oceanIcons</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/iconList.html'>iconList</a></span><span class='op'>(</span>
  ship <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/makeIcon.html'>makeIcon</a></span><span class='op'>(</span><span class='st'>"ferry-18.png"</span>, <span class='st'>"ferry-18@2x.png"</span>, <span class='fl'>18</span>, <span class='fl'>18</span><span class='op'>)</span>,
  pirate <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/makeIcon.html'>makeIcon</a></span><span class='op'>(</span><span class='st'>"danger-24.png"</span>, <span class='st'>"danger-24@2x.png"</span>, <span class='fl'>24</span>, <span class='fl'>24</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='co'># Some fake data</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/SpatialPoints.html'>SpatialPointsDataFrame</a></span><span class='op'>(</span>
  <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span>
    <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>10</span> <span class='op'>-</span> <span class='fl'>90.620130</span>,  <span class='co'># lng</span>
    <span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>.5</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>3.8</span> <span class='op'>+</span> <span class='fl'>25.638077</span>  <span class='co'># lat</span>
  <span class='op'>)</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span>
    <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fl'>20</span><span class='op'>)</span> <span class='op'>&gt;</span> <span class='fl'>0.75</span>, <span class='st'>"pirate"</span>, <span class='st'>"ship"</span><span class='op'>)</span>,
    <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ship"</span>, <span class='st'>"pirate"</span><span class='op'>)</span>
  <span class='op'>)</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'># Select from oceanIcons based on df$type</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span>icon <span class='op'>=</span> <span class='op'>~</span><span class='va'>oceanIcons</span><span class='op'>[</span><span class='va'>type</span><span class='op'>]</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-68c36b0eb005af42b054" style="width:624px;height:168px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-68c36b0eb005af42b054">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[25.3820846842904,27.0055358674214,27.4405867887497,26.8060923361522,26.9401453455281,25.4206831875559,23.7479982694913,23.9167780304164,24.993446858956,26.3908396089286,24.2833439986058,27.4530065927491,24.9408648835797,25.9134613942191,24.4769861022313,25.1243589617148,27.0554894977086,27.2602974037476,26.509582458327,25.6937716193334],[-95.6199082637365,-93.834953496528,-89.5484242097634,-87.1411017350081,-93.5419712702903,-89.7160230552006,-86.9069029878053,-94.2186357405196,-87.9155403420489,-93.323175529779,-93.7991208977225,-94.5430873681951,-92.5041235376309,-88.3593666481945,-94.418610744008,-92.5190666292954,-94.1281727164212,-89.7959378243583,-85.9703537144858,-94.4898255610067],{"iconUrl":{"data":["ferry-18.png","danger-24.png"],"index":[0,0,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,0,1,0]},"iconRetinaUrl":{"data":["ferry-18@2x.png","danger-24@2x.png"],"index":[0,0,0,1,0,0,1,0,0,0,1,1,0,0,1,0,0,0,1,0]},"iconWidth":[18,18,18,24,18,18,24,18,18,18,24,24,18,18,24,18,18,18,24,18],"iconHeight":[18,18,18,24,18,18,24,18,18,18,24,24,18,18,24,18,18,18,24,18]},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[23.7479982694913,27.4530065927491],"lng":[-95.6199082637365,-85.9703537144858]}},"evals":[],"jsHooks":[]}</script>
</div>
<h4 id="awesome-icons">Awesome Icons</h4>
<p>Leaflet supports even more customizable markers using the <a href="https://github.com/lvoogdt/Leaflet.awesome-markers">awesome markers</a> leaflet plugin.</p>
<p>The <code>addAwesomeMarkers()</code> function is similar to <code>addMarkers()</code> function but additionally allows you to specify custom colors for the markers as well as icons from the <a href="http://fontawesome.io/icons/">Font Awesome</a>, <a href="https://getbootstrap.com/components/">Bootstrap Glyphicons</a>, and <a href="http://ionicons.com/">Ion icons</a> icon libraries.</p>
<p>Similar to the <code>makeIcon</code>, <code>icons</code>, and <code>iconList</code> functions described above, you have <code>makeAwesomeIcon</code>, <code>awesomeIcons</code> and <code>awesomeIconList</code> functions, which enable you to add awesome icons.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># first 20 quakes</span>
<span class='va'>df.20</span> <span class='op'>&lt;-</span> <span class='va'>quakes</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>20</span>,<span class='op'>]</span>
<span class='va'>getColor</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>quakes</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>quakes</span><span class='op'>$</span><span class='va'>mag</span>, <span class='kw'>function</span><span class='op'>(</span><span class='va'>mag</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='kw'>if</span><span class='op'>(</span><span class='va'>mag</span> <span class='op'>&lt;=</span> <span class='fl'>4</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='st'>"green"</span>
  <span class='op'>}</span> <span class='kw'>else</span> <span class='kw'>if</span><span class='op'>(</span><span class='va'>mag</span> <span class='op'>&lt;=</span> <span class='fl'>5</span><span class='op'>)</span> <span class='op'>{</span>
    <span class='st'>"orange"</span>
  <span class='op'>}</span> <span class='kw'>else</span> <span class='op'>{</span>
    <span class='st'>"red"</span>
  <span class='op'>}</span> <span class='op'>}</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='va'>icons</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/awesomeIcons.html'>awesomeIcons</a></span><span class='op'>(</span>
  icon <span class='op'>=</span> <span class='st'>'ios-close'</span>,
  iconColor <span class='op'>=</span> <span class='st'>'black'</span>,
  library <span class='op'>=</span> <span class='st'>'ion'</span>,
  markerColor <span class='op'>=</span> <span class='fu'>getColor</span><span class='op'>(</span><span class='va'>df.20</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>df.20</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/addAwesomeMarkers.html'>addAwesomeMarkers</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>long</span>, <span class='op'>~</span><span class='va'>lat</span>, icon<span class='op'>=</span><span class='va'>icons</span>, label<span class='op'>=</span><span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>mag</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-0dbcabd6a1380767e41e" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-0dbcabd6a1380767e41e">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addAwesomeMarkers","args":[[-20.42,-20.62,-26,-17.97,-20.42,-19.68,-11.7,-28.11,-28.74,-17.47,-21.44,-12.26,-18.54,-21,-20.7,-15.94,-13.64,-17.83,-23.5,-22.63],[181.62,181.03,184.1,181.66,181.96,184.31,166.1,181.93,181.74,179.59,180.69,167,182.11,181.66,169.92,184.95,165.96,181.5,179.78,180.31],{"icon":"ios-close","markerColor":["orange","orange","red","orange","green","green","orange","orange","orange","orange","orange","orange","orange","orange","red","orange","red","orange","orange","orange"],"iconColor":"black","spin":false,"squareMarker":false,"iconRotate":0,"font":"monospace","prefix":"ion"},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["4.8","4.2","5.4","4.1","4","4","4.8","4.4","4.7","4.3","4.4","4.6","4.4","4.4","6.1","4.3","6","4.5","4.4","4.4"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-28.74,-11.7],"lng":[165.96,184.95]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>The <code>library</code> argument has to be one of ion, fa, or glyphicon. The <code>icon</code> argument needs to be the name of any valid icon supported by the the respective library (w/o the prefix of the library name).</p>
<h4 id="marker-clusters">Marker Clusters</h4>
<p>When there are a large number of markers on a map, you can cluster them using the <a href="https://github.com/Leaflet/Leaflet.markercluster">Leaflet.markercluster</a> plug-in. To enable this plug-in, you can provide a list of options to the argument <code>clusterOptions</code>, e.g.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>quakes</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span>
  clusterOptions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-options.html'>markerClusterOptions</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-64577a5b2af84dafc8b5" style="width:624px;height:240px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-64577a5b2af84dafc8b5">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[-20.42,-20.62,-26,-17.97,-20.42,-19.68,-11.7,-28.11,-28.74,-17.47,-21.44,-12.26,-18.54,-21,-20.7,-15.94,-13.64,-17.83,-23.5,-22.63,-20.84,-10.98,-23.3,-30.2,-19.66,-17.94,-14.72,-16.46,-20.97,-19.84,-22.58,-16.32,-15.55,-23.55,-16.3,-25.82,-18.73,-17.64,-17.66,-18.82,-37.37,-15.31,-24.97,-15.49,-19.23,-30.1,-26.4,-11.77,-24.12,-18.97,-18.75,-19.26,-22.75,-21.37,-20.1,-19.85,-22.7,-22.06,-17.8,-24.2,-20.69,-21.16,-13.82,-11.49,-20.68,-17.1,-20.14,-21.96,-20.42,-15.46,-15.31,-19.86,-11.55,-23.74,-17.7,-23.54,-19.21,-12.11,-21.81,-28.98,-34.02,-23.84,-19.57,-20.12,-17.7,-19.66,-21.5,-23.64,-15.43,-15.41,-15.48,-13.36,-20.64,-19.72,-15.44,-19.73,-27.24,-18.16,-13.66,-24.57,-16.98,-26.2,-21.88,-33,-21.33,-19.44,-34.89,-20.24,-22.55,-36.95,-15.75,-16.85,-19.06,-26.11,-26.2,-26.13,-13.66,-13.47,-14.6,-18.96,-14.65,-19.9,-22.05,-19.22,-31.24,-17.93,-19.3,-26.53,-27.72,-19.19,-17.43,-17.05,-19.52,-23.71,-21.3,-16.24,-16.14,-23.95,-25.2,-18.84,-12.66,-20.65,-13.23,-29.91,-14.31,-20.1,-17.8,-21.27,-23.58,-17.9,-23.34,-15.56,-23.83,-11.8,-15.54,-20.65,-11.75,-24.81,-20.9,-11.34,-17.98,-24.34,-13.86,-35.56,-35.48,-34.2,-26,-19.89,-23.43,-18.89,-17.82,-25.68,-20.2,-15.2,-15.03,-32.22,-22.64,-17.42,-17.84,-15.02,-18.04,-24.6,-19.88,-20.3,-20.45,-17.67,-22.3,-19.85,-24.27,-15.85,-20.02,-18.56,-17.87,-24.08,-32.2,-20.36,-23.85,-24,-20.41,-17.72,-19.67,-17.7,-16.23,-26.72,-12.95,-21.97,-21.96,-20.32,-30.28,-20.2,-30.66,-16.17,-28.25,-20.47,-23.55,-20.94,-26.67,-18.13,-20.21,-18.31,-16.52,-22.36,-22.43,-20.37,-23.77,-13.65,-21.55,-16.24,-23.73,-22.34,-19.4,-24.64,-16,-19.62,-23.84,-23.54,-28.23,-21.68,-13.44,-24.96,-20.08,-24.36,-14.7,-18.2,-16.65,-18.11,-17.95,-15.5,-23.36,-19.15,-10.97,-14.85,-17.8,-22.5,-29.1,-20.32,-16.09,-19.18,-23.81,-23.79,-19.02,-20.9,-19.06,-17.88,-19.41,-26.17,-14.95,-18.73,-20.21,-21.29,-19.76,-22.09,-23.8,-20.16,-22.13,-17.44,-23.33,-24.78,-22,-19.13,-30.72,-22.32,-16.45,-17.7,-17.95,-24.4,-19.3,-21.13,-18.07,-20.6,-18.48,-13.34,-20.92,-25.31,-15.24,-16.4,-24.57,-17.94,-30.64,-18.64,-13.09,-19.68,-16.44,-21.09,-14.99,-23.3,-17.68,-22,-21.38,-32.62,-13.05,-12.93,-18.6,-21.34,-21.48,-17.4,-17.32,-18.77,-26.16,-12.59,-14.82,-21.79,-19.83,-29.5,-12.49,-26.1,-21.04,-10.78,-20.76,-11.41,-19.1,-23.91,-27.33,-12.25,-23.49,-27.18,-25.8,-27.19,-27.27,-27.1,-27.22,-27.38,-27.27,-27.54,-27.2,-27.71,-27.6,-27.38,-21.54,-27.21,-28.96,-12.01,-17.46,-30.17,-27.27,-17.79,-22.19,-17.1,-27.18,-11.64,-17.98,-16.9,-21.98,-32.14,-18.8,-26.78,-20.43,-18.3,-15.83,-23.44,-23.73,-19.89,-17.59,-19.77,-20.31,-15.33,-18.2,-15.36,-15.29,-15.36,-16.24,-13.47,-25.5,-14.32,-20.04,-28.83,-17.82,-27.23,-10.72,-27,-20.36,-27.17,-20.94,-17.46,-21.04,-23.7,-17.72,-15.87,-17.84,-13.45,-30.8,-11.63,-30.4,-26.18,-15.7,-17.95,-20.51,-15.36,-23.61,-33.2,-17.68,-22.24,-20.07,-25.04,-21.5,-14.28,-14.43,-32.7,-34.1,-19.7,-24.19,-26.6,-17.04,-22.1,-32.6,-33,-20.58,-20.61,-19.47,-17.47,-18.4,-23.33,-18.55,-26.16,-21.8,-27.63,-18.89,-20.3,-20.56,-16.1,-12.66,-21.05,-17.97,-19.83,-22.55,-22.28,-15.72,-20.85,-21.11,-25.31,-26.46,-24.09,-16.96,-23.19,-20.81,-15.03,-18.06,-19,-23.53,-18.18,-15.66,-18,-18.08,-18.05,-29.9,-20.9,-15.61,-16.03,-17.68,-31.94,-19.14,-18,-16.95,-10.79,-20.83,-32.9,-37.93,-29.09,-23.56,-19.6,-21.39,-14.85,-22.7,-32.42,-17.9,-23.58,-34.4,-17.61,-21.07,-13.84,-30.24,-18.49,-23.45,-16.04,-17.14,-22.54,-15.9,-30.04,-24.03,-18.89,-16.51,-20.1,-21.06,-13.07,-23.46,-19.41,-11.81,-11.76,-12.08,-25.59,-26.54,-20.9,-16.99,-23.46,-17.81,-15.17,-11.67,-20.75,-19.5,-26.18,-20.66,-19.22,-24.68,-15.43,-32.45,-21.31,-15.44,-13.26,-15.26,-33.57,-15.77,-15.79,-21,-16.28,-23.28,-16.1,-17.7,-15.96,-15.95,-17.56,-15.9,-15.29,-15.86,-16.2,-15.71,-16.45,-11.54,-19.61,-15.61,-21.16,-20.65,-20.33,-15.08,-23.28,-23.44,-23.12,-23.65,-22.91,-22.06,-13.56,-17.99,-23.92,-30.69,-21.92,-25.04,-19.92,-27.75,-17.71,-19.6,-34.68,-14.46,-18.85,-17.02,-20.41,-18.18,-16.49,-17.74,-20.49,-18.51,-27.28,-15.9,-20.57,-11.25,-20.04,-20.89,-16.62,-20.09,-24.96,-20.95,-23.31,-20.95,-21.58,-13.62,-12.72,-21.79,-20.48,-12.84,-17.02,-23.89,-23.07,-27.98,-28.1,-21.24,-21.24,-19.89,-32.82,-22,-21.57,-24.5,-33.03,-30.09,-22.75,-17.99,-19.6,-15.65,-17.78,-22.04,-20.06,-18.07,-12.85,-33.29,-34.63,-24.18,-23.78,-22.37,-23.97,-34.12,-25.25,-22.87,-18.48,-21.46,-28.56,-28.56,-21.3,-20.08,-18.82,-19.51,-12.05,-17.4,-23.93,-21.23,-16.23,-28.15,-20.81,-20.72,-23.29,-38.46,-15.48,-37.03,-20.48,-18.12,-18.17,-11.4,-23.1,-14.28,-22.87,-17.59,-27.6,-17.94,-17.88,-30.01,-19.19,-18.14,-23.46,-18.44,-18.21,-18.26,-15.85,-23.82,-18.6,-17.8,-10.78,-18.12,-19.34,-15.34,-24.97,-15.97,-23.47,-23.11,-20.54,-18.92,-20.16,-25.48,-18.19,-15.35,-18.69,-18.89,-17.61,-20.93,-17.6,-17.96,-18.8,-20.61,-20.74,-25.23,-23.9,-18.07,-15.43,-14.3,-18.04,-13.9,-17.64,-17.98,-25,-19.45,-16.11,-23.73,-17.74,-21.56,-20.97,-15.45,-15.93,-21.47,-21.44,-22.16,-13.36,-21.22,-26.1,-18.35,-17.2,-22.42,-17.91,-26.53,-26.5,-16.31,-18.76,-17.1,-19.28,-23.5,-21.26,-17.97,-26.02,-30.3,-24.89,-14.57,-15.4,-22.06,-25.14,-20.3,-25.28,-20.63,-19.02,-22.1,-38.59,-19.3,-31.03,-30.51,-22.55,-22.14,-25.6,-18.04,-21.29,-21.08,-20.64,-24.41,-12.16,-17.1,-21.13,-12.34,-16.43,-20.7,-21.18,-17.78,-21.57,-13.7,-12.27,-19.1,-19.85,-11.37,-20.7,-20.24,-16.4,-19.6,-21.63,-21.6,-21.77,-21.8,-21.05,-10.8,-17.9,-22.26,-22.33,-24.04,-20.4,-15,-27.87,-14.12,-23.61,-21.56,-21.19,-18.07,-26,-20.21,-28,-20.74,-31.8,-18.91,-20.45,-22.9,-18.11,-23.8,-23.42,-23.2,-12.93,-21.14,-19.13,-21.08,-20.07,-20.9,-25.04,-21.85,-19.34,-15.83,-23.73,-18.1,-22.12,-15.39,-16.21,-21.75,-22.1,-24.97,-19.36,-22.14,-21.48,-18.54,-21.62,-13.4,-15.5,-15.67,-21.78,-30.63,-15.7,-19.2,-19.7,-19.4,-15.85,-17.38,-24.33,-20.89,-18.97,-17.99,-15.8,-25.42,-21.6,-26.06,-17.56,-25.63,-25.46,-22.23,-21.55,-15.18,-13.79,-15.18,-18.78,-17.9,-18.5,-14.82,-15.65,-30.01,-13.16,-21.03,-21.4,-17.93,-20.87,-12.01,-19.1,-22.85,-17.08,-21.14,-12.23,-20.91,-11.38,-11.02,-22.09,-17.8,-18.94,-18.85,-21.91,-22.03,-18.1,-18.4,-21.2,-12,-11.7,-26.72,-24.39,-19.64,-21.35,-22.82,-38.28,-12.57,-22.24,-13.8,-21.07,-17.74,-23.87,-21.29,-22.2,-15.24,-17.82,-32.14,-19.3,-33.09,-20.18,-17.46,-17.44,-24.71,-21.53,-19.17,-28.05,-23.39,-22.33,-15.28,-20.27,-10.96,-21.52,-19.57,-23.08,-25.06,-17.85,-15.99,-20.56,-17.98,-18.4,-27.64,-20.99,-14.86,-29.33,-25.81,-14.1,-17.63,-23.47,-23.92,-20.88,-20.25,-19.33,-18.14,-22.41,-20.77,-17.95,-20.83,-27.84,-19.94,-23.6,-23.7,-30.39,-18.98,-27.89,-23.5,-23.73,-17.93,-35.94,-18.68,-23.47,-23.49,-23.85,-27.08,-20.88,-20.97,-21.71,-23.9,-15.78,-12.57,-19.69,-22.04,-17.99,-23.5,-21.4,-15.86,-23.95,-25.79,-23.75,-24.1,-18.56,-23.3,-17.03,-20.77,-28.1,-18.83,-23,-20.82,-22.95,-28.22,-27.99,-15.54,-12.37,-22.33,-22.7,-17.86,-16,-20.73,-15.45,-20.05,-17.95,-17.7,-25.93,-12.28,-20.13,-17.4,-21.59],[181.62,181.03,184.1,181.66,181.96,184.31,166.1,181.93,181.74,179.59,180.69,167,182.11,181.66,169.92,184.95,165.96,181.5,179.78,180.31,181.16,166.32,180.16,182,180.28,181.49,167.51,180.79,181.47,182.37,179.24,166.74,185.05,180.8,186,179.33,169.23,181.28,181.4,169.33,176.78,186.1,179.82,186.04,169.41,182.3,181.7,166.32,180.08,185.25,182.35,184.42,173.2,180.67,182.16,182.13,181,180.6,181.35,179.2,181.55,182.4,172.38,166.22,181.41,184.93,181.6,179.62,181.86,187.81,185.8,184.35,166.2,179.99,181.23,180.04,184.7,167.06,181.71,181.11,180.21,180.99,182.38,183.4,181.7,184.31,170.5,179.96,186.3,186.44,167.53,167.06,182.02,169.71,185.26,182.4,181.11,183.41,166.54,179.92,185.61,178.41,180.39,181.6,180.69,183.5,180.6,169.49,185.9,177.81,185.23,182.31,182.45,178.3,178.35,178.31,172.23,172.29,167.4,169.48,166.97,178.9,180.4,182.43,180.6,167.89,183.84,178.57,181.7,183.51,185.43,181.22,168.98,180.3,180.82,168.02,187.32,182.8,182.6,184.16,169.46,181.4,167.1,181.43,173.5,184.4,185.17,173.49,180.17,181.5,184.5,167.62,182.56,165.8,167.68,181.32,166.07,180,169.84,166.24,180.5,179.52,167.16,180.2,179.9,179.43,182.12,183.84,180,169.42,181.83,180.34,180.9,184.68,182.29,180.2,180.64,185.16,181.48,184.24,181.75,183.5,184.3,183,181.85,187.09,181.9,181.85,179.88,185.13,184.09,169.31,182,179.5,179.61,181.19,182.53,182.75,181.74,180.3,182.18,182.2,183.59,183.35,169.09,182.32,180.54,181.69,180.62,182.3,180.13,184.1,181.71,185.68,180.27,181.58,182.4,181.52,183.83,182.39,185.7,171.65,184.48,182.1,180.16,166.66,182.9,185.75,182.53,171.52,180.94,180.81,182.82,185.35,180.13,179.93,182.68,180.63,166.53,180.22,182.74,182.84,166,183.68,185.51,181.67,181.65,186.9,180.01,169.5,166.26,167.24,181.38,170.4,182.1,180.88,184.89,169.33,179.36,179.89,184.23,181.51,169.01,181.47,183.05,184.2,167.24,168.8,182.37,180.85,181.41,180.38,179.9,181.99,180.38,181.4,180.18,179.22,180.52,182.51,180.1,180.54,177.77,185,184.68,179.85,180.6,185.32,181.57,182.28,181.49,166.2,181.5,179.69,186.21,185.86,178.4,181.51,181.2,169.32,169.28,184.14,185.74,181.38,171.39,179.7,181.36,180.53,181.39,181.5,169.58,169.63,181.91,181.41,183.78,181.02,181.03,169.24,179.5,167.1,167.32,183.48,182.04,182.31,166.36,182.3,181.2,165.77,185.77,166.24,183.87,180,182.6,166.6,179.07,182.18,182.1,182.18,182.38,182.18,182.28,181.7,182.5,182.5,182.39,182.47,182.4,182.39,185.48,182.43,182.61,166.29,181.32,182.02,182.36,181.32,171.4,182.68,182.53,166.47,181.58,185.72,179.6,179.9,169.21,183.61,182.37,183.2,182.51,182.93,179.99,184.08,181.09,181.4,184.06,186.75,181.6,186.66,186.42,186.71,167.95,167.14,182.82,167.33,182.01,181.66,181.49,180.98,165.99,183.88,186.16,183.68,181.26,181.9,181.2,179.6,181.42,188.13,181.3,170.3,182.16,166.14,181.4,178.59,184.5,181.5,182.3,167.51,180.23,181.6,186.8,184.56,169.14,180.1,185.2,167.26,167.26,181.7,181.8,186.2,180.38,182.77,186.8,179.71,180.9,182.4,181.24,182.6,169.15,180.96,183.4,180.26,182.23,178.47,183.2,182.93,169.48,182.3,182.04,185.32,166.37,184.68,168.52,182.54,183.81,183.52,185.64,181.59,181.5,180.15,182.5,179.68,167.7,182.8,184.7,167.32,181.59,185.6,179.99,180.63,186.8,180.62,180.7,180.86,181.16,181.9,167.5,185.43,181.11,180.57,184.36,185.48,185.94,166.06,185.9,181.6,177.47,183.2,180.23,185.2,180.68,184.87,183.3,181.21,181.3,183.4,180.5,181.2,181.13,170.62,181.63,169.04,180.23,183.54,185.31,172.91,185.3,181.2,180.22,184.46,187.1,186.3,183.81,166.87,180.09,182.3,165.98,165.96,165.76,180.02,183.63,184.28,187,180.17,181.82,187.2,166.02,184.52,186.9,179.79,185.77,182.54,183.33,167.38,181.15,180.84,167.18,167.01,183.13,180.8,167.01,166.83,183.2,166.94,184.6,167.25,181.31,166.69,167.34,181.59,167.42,166.9,166.85,166.8,166.91,167.54,166.18,181.91,187.15,181.41,182.22,168.71,166.62,184.61,184.6,184.42,184.46,183.95,180.47,166.49,181.57,184.47,182.1,182.8,180.97,183.91,182.26,181.18,183.84,179.82,167.26,187.55,182.41,186.51,182.04,187.8,181.31,181.69,182.64,183.4,167.16,181.33,166.36,181.87,181.25,186.74,168.75,179.87,181.42,179.27,181.06,181.9,167.15,166.28,185,169.76,166.78,182.93,182.39,184.03,181.96,182.25,180.81,180.86,174.46,179.8,185.5,185.62,180.92,180.2,182.4,170.99,168.98,181.87,186.26,181.53,184.91,168.69,181.54,165.67,181.3,179.1,179.02,180.31,171.5,179.91,181.75,179.86,172.65,182.37,181.02,183.47,183.59,180.92,183.22,182.21,183.97,167.39,186.54,180.18,181.09,167.91,183.4,185.01,181.41,184,176.03,186.73,177.52,181.38,181.88,181.98,166.07,180.12,170.34,171.72,180.98,182.1,180.6,180.58,180.8,182.3,180.87,180.11,181.04,180.87,180.98,184.83,180.09,184.28,181.32,166.1,181.71,182.62,167.1,182.85,186.08,180.24,179.15,181.66,169.37,184.27,180.94,181.74,186.4,169.1,181.24,183.32,181.54,181.5,181.4,182.41,182.44,181.53,179.86,179.9,181.58,185.19,167.32,181.57,167.18,177.01,181.51,180,184.48,187.48,179.98,186.78,183.23,181.72,186.73,167.91,185.86,170.45,180.49,172.76,181.51,182.5,185.27,182.9,171.4,181.48,178.3,178.29,168.08,169.71,182.8,182.78,180,181.69,181.48,181.2,180.8,179.67,167.24,186.87,183.95,178.42,181.4,181.17,181.61,186.83,185.3,175.7,183,181.59,181.3,183.34,180.64,180.3,181.84,185.77,180.85,169.66,180.03,167.03,185.9,185.6,167.43,186.73,184.3,180.92,185.33,183.86,166.75,167.41,184.52,184.51,166.55,186.3,185.1,182.73,184.53,180.77,180.5,181,183.6,180.9,165.8,181.5,171.44,171.46,184.85,186.1,184.62,183.4,166.64,180.27,185.5,181.58,181.65,178.43,181.9,182,180.7,180.6,169.46,182.1,183.8,181.63,184.7,180.21,184.8,169.52,181.06,184.97,181.3,181.75,182.02,179.84,180.89,186.59,167.1,183,181.72,180.49,185.1,186.52,180.67,180.4,179.54,186.36,179.62,182.44,168.93,182.4,166.9,185.3,185.23,183.11,180.9,185.1,184.37,182.44,182.29,185.9,168.63,179.97,185.26,169.44,181.62,185.25,182.65,169.9,180.05,181.23,180.26,179.98,180.48,181.39,185.93,166.56,167.23,186.72,181.41,185.4,171.17,185.17,181.15,167.24,180.78,180.78,181.89,181.7,166.66,169.63,181.37,185.96,174.21,167.02,181.57,167.05,167.01,180.58,181.2,182.43,182.2,181.28,179.77,181.63,184.84,181.4,166.2,166.3,182.69,178.98,169.5,170.04,184.52,177.1,167.11,180.28,166.53,183.78,181.25,180.15,185.8,180.58,185.11,181.27,180,185.86,180.94,181.62,181.42,181.33,179.85,170.52,169.53,182.39,179.97,171.51,185.98,181.51,165.97,169.75,184.47,183.45,182.8,181.44,167.95,184.41,181.61,181.77,182.22,181.02,167.32,182.72,182.54,166.01,185.13,180.21,180.21,185.18,184.75,186.16,181.71,183.99,181.16,181.73,181.01,182.1,182.39,183.99,184.13,182.4,182.32,182.92,184.9,184.49,181.62,178.52,184.5,179.95,180.06,180.26,183.44,184.95,181.2,183.58,184.6,167.44,166.72,184.23,183.95,181.59,180.13,180.74,166.98,184.64,182.38,184.5,184.5,169.05,184.68,185.74,183.71,183.5,182.26,170.7,181.67,170.56,183.6,183.5,187.15,166.93,171.66,170.3,181.3,184.53,181.42,181.42,183.86,181.37,188.1,179.54,167.06,184.2,187.8,170.56],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-38.59,-10.72],"lng":[165.67,188.13]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Using the <code>freezeAtZoom</code> argument of the <code>markerClusterOptions()</code> function you can set the clustering to freeze as a specific zoom level. For example <code>markerClusterOptions(freezeAtZoom = 5)</code> will freeze the cluster at zoom level 5 regardless of the users actual zoom level.</p>
<h3 id="circle-markers">Circle Markers</h3>
<p>Circle markers are much like regular circles (see <a href="https://rstudio.github.io/leaflet/shapes.html">Lines and Shapes</a>), except that their radius in onscreen pixels stays constant regardless of zoom level.</p>
<p>You can use their default appearance:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircleMarkers</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-e9b84964d56a2bb19442" style="width:624px;height:168px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-e9b84964d56a2bb19442">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[25.3820846842904,27.0055358674214,27.4405867887497,26.8060923361522,26.9401453455281,25.4206831875559,23.7479982694913,23.9167780304164,24.993446858956,26.3908396089286,24.2833439986058,27.4530065927491,24.9408648835797,25.9134613942191,24.4769861022313,25.1243589617148,27.0554894977086,27.2602974037476,26.509582458327,25.6937716193334],[-95.6199082637365,-93.834953496528,-89.5484242097634,-87.1411017350081,-93.5419712702903,-89.7160230552006,-86.9069029878053,-94.2186357405196,-87.9155403420489,-93.323175529779,-93.7991208977225,-94.5430873681951,-92.5041235376309,-88.3593666481945,-94.418610744008,-92.5190666292954,-94.1281727164212,-89.7959378243583,-85.9703537144858,-94.4898255610067],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[23.7479982694913,27.4530065927491],"lng":[-95.6199082637365,-85.9703537144858]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Or customize their color, radius, stroke, opacity, etc.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Create a palette that maps factor levels to colors</span>
<span class='va'>pal</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/colorNumeric.html'>colorFactor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"navy"</span>, <span class='st'>"red"</span><span class='op'>)</span>, domain <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ship"</span>, <span class='st'>"pirate"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircleMarkers</a></span><span class='op'>(</span>
    radius <span class='op'>=</span> <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>type</span> <span class='op'>==</span> <span class='st'>"ship"</span>, <span class='fl'>6</span>, <span class='fl'>10</span><span class='op'>)</span>,
    color <span class='op'>=</span> <span class='op'>~</span><span class='fu'>pal</span><span class='op'>(</span><span class='va'>type</span><span class='op'>)</span>,
    stroke <span class='op'>=</span> <span class='cn'>FALSE</span>, fillOpacity <span class='op'>=</span> <span class='fl'>0.5</span>
  <span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-5853d6ce6cc3699ebb88" style="width:624px;height:168px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5853d6ce6cc3699ebb88">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircleMarkers","args":[[25.3820846842904,27.0055358674214,27.4405867887497,26.8060923361522,26.9401453455281,25.4206831875559,23.7479982694913,23.9167780304164,24.993446858956,26.3908396089286,24.2833439986058,27.4530065927491,24.9408648835797,25.9134613942191,24.4769861022313,25.1243589617148,27.0554894977086,27.2602974037476,26.509582458327,25.6937716193334],[-95.6199082637365,-93.834953496528,-89.5484242097634,-87.1411017350081,-93.5419712702903,-89.7160230552006,-86.9069029878053,-94.2186357405196,-87.9155403420489,-93.323175529779,-93.7991208977225,-94.5430873681951,-92.5041235376309,-88.3593666481945,-94.418610744008,-92.5190666292954,-94.1281727164212,-89.7959378243583,-85.9703537144858,-94.4898255610067],[6,6,6,10,6,6,10,6,6,6,10,10,6,6,10,6,6,6,10,6],null,null,{"interactive":true,"className":"","stroke":false,"color":["#FF0000","#FF0000","#FF0000","#000080","#FF0000","#FF0000","#000080","#FF0000","#FF0000","#FF0000","#000080","#000080","#FF0000","#FF0000","#000080","#FF0000","#FF0000","#FF0000","#000080","#FF0000"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["#FF0000","#FF0000","#FF0000","#000080","#FF0000","#FF0000","#000080","#FF0000","#FF0000","#FF0000","#000080","#000080","#FF0000","#FF0000","#000080","#FF0000","#FF0000","#FF0000","#000080","#FF0000"],"fillOpacity":0.5},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[23.7479982694913,27.4530065927491],"lng":[-95.6199082637365,-85.9703537144858]}},"evals":[],"jsHooks":[]}</script>
</div>
<h2 id="popups">Popups</h2>
<p>Popups are small boxes containing arbitrary HTML, that point to a specific point on the map.</p>
<p>Use the <code>addPopups()</code> function to add standalone popup to the map.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>content</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span>sep <span class='op'>=</span> <span class='st'>"&lt;br/&gt;"</span>,
  <span class='st'>"&lt;b&gt;&lt;a href='http://www.samurainoodle.com'&gt;Samurai Noodle&lt;/a&gt;&lt;/b&gt;"</span>,
  <span class='st'>"606 5th Ave. S"</span>,
  <span class='st'>"Seattle, WA 98138"</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addPopups</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>122.327298</span>, <span class='fl'>47.597131</span>, <span class='va'>content</span>,
    options <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-options.html'>popupOptions</a></span><span class='op'>(</span>closeButton <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
  <span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-567701afb4c4d4382297" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-567701afb4c4d4382297">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addPopups","args":[47.597131,-122.327298,"<b><a href='http://www.samurainoodle.com'>Samurai Noodle<\/a><\/b><br/>606 5th Ave. S<br/>Seattle, WA 98138",null,null,{"maxWidth":300,"minWidth":50,"autoPan":true,"keepInView":false,"closeButton":false,"className":""}]}],"limits":{"lat":[47.597131,47.597131],"lng":[-122.327298,-122.327298]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>A common use for popups is to have them appear when markers or shapes are clicked. Marker and shape functions in the Leaflet package take a <code>popup</code> argument, where you can pass in HTML to easily attach a simple popup.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/rstudio/htmltools'>htmltools</a></span><span class='op'>)</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/textconnections.html'>textConnection</a></span><span class='op'>(</span>
<span class='st'>"Name,Lat,Long
Samurai Noodle,47.597131,-122.327298
Kukai Ramen,47.6154,-122.327157
Tsukushinbo,47.59987,-122.326726"</span>
<span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>Long</span>, <span class='op'>~</span><span class='va'>Lat</span>, popup <span class='op'>=</span> <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/htmlEscape.html'>htmlEscape</a></span><span class='op'>(</span><span class='va'>Name</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-3adb46d15cb342db8cdf" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3adb46d15cb342db8cdf">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[47.597131,47.6154,47.59987],[-122.327298,-122.327157,-122.326726],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Samurai Noodle","Kukai Ramen","Tsukushinbo"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[47.597131,47.6154],"lng":[-122.327298,-122.326726]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>In the preceding example, <code>htmltools::htmlEscape</code> was used to santize any characters in the name that might be interpreted as HTML. While it wasnt necessary for this example (as the restaurant names contained no HTML markup), doing so is important in any situation where the data may come from a file or database, or from the user.</p>
<p>In addition to markers you can also add popups on shapes like lines, circles and other polygons.</p>
<h2 id="labels">Labels</h2>
<p>A label is a textual or HTML content that can attached to markers and shapes to be always displayed or displayed on mouse over. Unlike popups you dont need to click a marker/polygon for the label to be shown.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/rstudio/htmltools'>htmltools</a></span><span class='op'>)</span>
<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/textconnections.html'>textConnection</a></span><span class='op'>(</span>
<span class='st'>"Name,Lat,Long
Samurai Noodle,47.597131,-122.327298
Kukai Ramen,47.6154,-122.327157
Tsukushinbo,47.59987,-122.326726"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>df</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>Long</span>, <span class='op'>~</span><span class='va'>Lat</span>, label <span class='op'>=</span> <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/pkg/htmltools/man/htmlEscape.html'>htmlEscape</a></span><span class='op'>(</span><span class='va'>Name</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-d05365aecca4b8a4c399" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-d05365aecca4b8a4c399">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[47.597131,47.6154,47.59987],[-122.327298,-122.327157,-122.326726],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Samurai Noodle","Kukai Ramen","Tsukushinbo"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[47.597131,47.6154],"lng":[-122.327298,-122.326726]}},"evals":[],"jsHooks":[]}</script>
</div>
<h4 id="customizing-marker-labels">Customizing Marker Labels</h4>
<p>You can customize marker labels using the <code>labelOptions</code> argument of the <code>addMarkers</code> function. The <code>labelOptions</code> argument can be populated using the <code>labelOptions()</code> function. If <code>noHide</code> is false (the default) then the label is displayed only when you hover the mouse over the marker; if <code>noHide</code> is set to true then the label is always displayed.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Change Text Size and text Only and also a custom CSS</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-methods.html'>setView</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>118.456554</span>, <span class='fl'>34.09</span>, <span class='fl'>13</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span>
    lng <span class='op'>=</span> <span class='op'>-</span><span class='fl'>118.456554</span>, lat <span class='op'>=</span> <span class='fl'>34.105</span>,
    label <span class='op'>=</span> <span class='st'>"Default Label"</span>,
    labelOptions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-options.html'>labelOptions</a></span><span class='op'>(</span>noHide <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span>
    lng <span class='op'>=</span> <span class='op'>-</span><span class='fl'>118.456554</span>, lat <span class='op'>=</span> <span class='fl'>34.095</span>,
    label <span class='op'>=</span> <span class='st'>"Label w/o surrounding box"</span>,
    labelOptions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-options.html'>labelOptions</a></span><span class='op'>(</span>noHide <span class='op'>=</span> <span class='cn'>T</span>, textOnly <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span>
    lng <span class='op'>=</span> <span class='op'>-</span><span class='fl'>118.456554</span>, lat <span class='op'>=</span> <span class='fl'>34.085</span>,
    label <span class='op'>=</span> <span class='st'>"label w/ textsize 15px"</span>,
    labelOptions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-options.html'>labelOptions</a></span><span class='op'>(</span>noHide <span class='op'>=</span> <span class='cn'>T</span>, textsize <span class='op'>=</span> <span class='st'>"15px"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span>
    lng <span class='op'>=</span> <span class='op'>-</span><span class='fl'>118.456554</span>, lat <span class='op'>=</span> <span class='fl'>34.075</span>,
    label <span class='op'>=</span> <span class='st'>"Label w/ custom CSS style"</span>,
    labelOptions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-options.html'>labelOptions</a></span><span class='op'>(</span>noHide <span class='op'>=</span> <span class='cn'>T</span>, direction <span class='op'>=</span> <span class='st'>"bottom"</span>,
      style <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
        <span class='st'>"color"</span> <span class='op'>=</span> <span class='st'>"red"</span>,
        <span class='st'>"font-family"</span> <span class='op'>=</span> <span class='st'>"serif"</span>,
        <span class='st'>"font-style"</span> <span class='op'>=</span> <span class='st'>"italic"</span>,
        <span class='st'>"box-shadow"</span> <span class='op'>=</span> <span class='st'>"3px 3px rgba(0,0,0,0.25)"</span>,
        <span class='st'>"font-size"</span> <span class='op'>=</span> <span class='st'>"12px"</span>,
        <span class='st'>"border-color"</span> <span class='op'>=</span> <span class='st'>"rgba(0,0,0,0.5)"</span>
      <span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-814ea100d1836e9c6b76" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-814ea100d1836e9c6b76">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[34.105,-118.456554,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"Default Label",{"interactive":false,"permanent":true,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[34.095,-118.456554,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"Label w/o surrounding box",{"interactive":false,"permanent":true,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":true,"className":"","sticky":true},null]},{"method":"addMarkers","args":[34.085,-118.456554,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"label w/ textsize 15px",{"interactive":false,"permanent":true,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"15px","textOnly":false,"className":"","sticky":true},null]},{"method":"addMarkers","args":[34.075,-118.456554,null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,"Label w/ custom CSS style",{"interactive":false,"permanent":true,"direction":"bottom","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"style":{"color":"red","font-family":"serif","font-style":"italic","box-shadow":"3px 3px rgba(0,0,0,0.25)","font-size":"12px","border-color":"rgba(0,0,0,0.5)"},"className":"","sticky":true},null]}],"setView":[[34.09,-118.456554],13,[]],"limits":{"lat":[34.075,34.105],"lng":[-118.456554,-118.456554]}},"evals":[],"jsHooks":[]}</script>
</div>
<h4 id="labels-without-markers">Labels without markers</h4>
<p>You can create labels without the accompanying markers using the <code>addLabelOnlyMarkers</code> function.</p>
<h2 id="lines-and-shapes">Lines and Shapes</h2>
<p>Leaflet makes it easy to take spatial lines and shapes from R and add them to maps.</p>
<h3 id="polygons-and-polylines">Polygons and Polylines</h3>
<p>Line and polygon data can come from a variety of sources:</p>
<ul>
<li><code>SpatialPolygons</code>, <code>SpatialPolygonsDataFrame</code>, <code>Polygons</code>, and <code>Polygon</code> objects (from the <code>sp</code> package)</li>
<li><code>SpatialLines</code>, <code>SpatialLinesDataFrame</code>, <code>Lines</code>, and <code>Line</code> objects (from the <code>sp</code> package)</li>
<li><code>MULTIPOLYGON</code>, <code>POLYGON</code>, <code>MULTILINESTRING</code>, and <code>LINESTRING</code> objects (from the <code>sf</code> package)</li>
<li><code>map</code> objects (from the <code>maps</code> packages <code>map()</code> function); use <code>map(fill = TRUE)</code> for polygons, <code>FALSE</code> for polylines</li>
<li>Two-column numeric matrix; the first column is longitude and the second is latitude. Polygons are separated by rows of <code>(NA, NA)</code>. It is not possible to represent multi-polygons nor polygons with holes using this method; use <code>SpatialPolygons</code> instead.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://rgdal.r-forge.r-project.org'>rgdal</a></span><span class='op'>)</span>
<span class='co'># From https://www.census.gov/geo/maps-data/data/cbf/cbf_state.html</span>
<span class='va'>states</span> <span class='op'>&lt;-</span> <span class='fu'><a href='http://rgdal.r-forge.r-project.org/reference/readOGR.html'>readOGR</a></span><span class='op'>(</span><span class='st'>"data/shp/cb_2013_us_state_20m.shp"</span>,
  layer <span class='op'>=</span> <span class='st'>"cb_2013_us_state_20m"</span>, GDAL1_integer64_policy <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>OGR data source with driver: ESRI Shapefile 
Source: &quot;C:\Users\blancb\OneDrive - Perkins and Will\Documents\Internal\R Training\nn_r_training\distill_blog\_posts\2021-01-14-geospatial-data\data\shp\cb_2013_us_state_20m.shp&quot;, layer: &quot;cb_2013_us_state_20m&quot;
with 52 features
It has 9 fields
Integer64 fields read as doubles:  ALAND AWATER </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>neStates</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/subset.html'>subset</a></span><span class='op'>(</span><span class='va'>states</span>, <span class='va'>states</span><span class='op'>$</span><span class='va'>STUSPS</span> <span class='op'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span>
  <span class='st'>"CT"</span>,<span class='st'>"ME"</span>,<span class='st'>"MA"</span>,<span class='st'>"NH"</span>,<span class='st'>"RI"</span>,<span class='st'>"VT"</span>,<span class='st'>"NY"</span>,<span class='st'>"NJ"</span>,<span class='st'>"PA"</span>
<span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>neStates</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addPolygons</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"#444444"</span>, weight <span class='op'>=</span> <span class='fl'>1</span>, smoothFactor <span class='op'>=</span> <span class='fl'>0.5</span>,
    opacity <span class='op'>=</span> <span class='fl'>1.0</span>, fillOpacity <span class='op'>=</span> <span class='fl'>0.5</span>,
    fillColor <span class='op'>=</span> <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/colorNumeric.html'>colorQuantile</a></span><span class='op'>(</span><span class='st'>"YlOrRd"</span>, <span class='va'>ALAND</span><span class='op'>)</span><span class='op'>(</span><span class='va'>ALAND</span><span class='op'>)</span>,
    highlightOptions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>highlightOptions</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='st'>"white"</span>, weight <span class='op'>=</span> <span class='fl'>2</span>,
      bringToFront <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-78ab498ea7453b93d025" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-78ab498ea7453b93d025">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addPolygons","args":[[[[{"lng":[-73.6959488909347,-73.639672,-73.632153,-73.514617,-73.509487,-73.482709,-73.550961,-73.5447279999999,-73.5438149689906,-73.5436683872264,-73.5436412260038,-73.537673,-73.537469,-73.536969,-73.536067,-73.535986,-73.535885,-73.5358569999999,-73.535769,-73.534369,-73.534269,-73.534269,-73.53415,-73.534055,-73.533969,-73.530067,-73.521457,-73.5174731929068,-73.505008,-73.504944,-73.487314,-73.29442,-73.293097,-73.231056,-73.229798,-73.1272760899221,-73.053254,-73.0087393050431,-72.8637329999999,-72.863619,-72.813541,-72.816741,-72.7747567856785,-72.766739,-72.766139,-72.758151,-72.757467,-72.755838,-72.695927,-72.5091865567729,-72.3974284906805,-72.1988275090473,-72.1357150078587,-72.135687,-72.1021598794927,-72.059752,-71.8843442162069,-71.80065,-71.799242,-71.794161,-71.794161,-71.792786,-71.792767,-71.789678,-71.789677581832,-71.789464590839,-71.789356,-71.7893586727423,-71.7917190617471,-71.7976829999999,-71.81839,-71.839649,-71.842563,-71.843472,-71.842131,-71.833443,-71.8316129999999,-71.8312399281427,-71.832530438866,-71.8397818814344,-71.8595697162474,-71.8682345726004,-71.8863017274908,-71.9167101117149,-71.922092,-71.923282,-71.936284,-71.945652,-71.9567471661891,-71.9709552070317,-71.9794470711579,-71.982193509498,-71.9881533088002,-72.0218975550033,-72.0844873356551,-72.0944427051131,-72.09982,-72.11182,-72.134221,-72.161580000104,-72.173922,-72.177622,-72.184122,-72.191022,-72.201422,-72.203022,-72.204022,-72.2129238986392,-72.2252759325705,-72.235531,-72.2481606540194,-72.2518946090566,-72.250515,-72.251323,-72.261487,-72.3177603462832,-72.327595015024,-72.3338939362417,-72.3414601527993,-72.3486426346461,-72.348068,-72.386629,-72.398688,-72.40593,-72.451925,-72.472539,-72.485693,-72.499534,-72.506634,-72.5186604018755,-72.5213124502059,-72.5294159293121,-72.5332466648377,-72.536745893965,-72.5377761338559,-72.547235,-72.571136,-72.583336,-72.598036,-72.617237,-72.641538,-72.653838,-72.6547149283877,-72.662838,-72.672339,-72.684939,-72.685539,-72.690439,-72.694744,-72.710595,-72.7136739733598,-72.7112076083495,-72.7124597624633,-72.7224390506857,-72.7328127528092,-72.7544440570056,-72.757476695808,-72.786142,-72.8187373177451,-72.8193723262764,-72.826882962741,-72.8477670206718,-72.8502099719188,-72.854055,-72.861344,-72.881445,-72.895445,-72.904345,-72.905245,-72.903045,-72.894745,-72.893845,-72.9082002065586,-72.9168267141436,-72.917036903185,-72.9200616510053,-72.9206578375193,-72.920846,-72.935646,-72.962047,-72.9850951901769,-72.986247,-72.997948,-73.007548,-73.014948,-73.020149,-73.020449,-73.022549,-73.05065,-73.05935,-73.07945,-73.105493,-73.107987,-73.110352,-73.109952,-73.1083515079185,-73.111052,-73.130253,-73.1643701881119,-73.1700741317383,-73.1707013917016,-73.1777742862742,-73.202656,-73.2282953294052,-73.235058,-73.247958,-73.262358,-73.286759,-73.296359,-73.31186,-73.33066,-73.3722958164764,-73.392162,-73.4001542050479,-73.4136699707419,-73.435063,-73.450364,-73.4682388679225,-73.477364,-73.4933271144183,-73.5169034770433,-73.516766,-73.522666,-73.528866,-73.5311686219898,-73.530188985206,-73.5327861644652,-73.5353377810504,-73.5514936126958,-73.561968,-73.567668,-73.570068,-73.583968,-73.5849882519983,-73.5956989062807,-73.6039517074836,-73.6434779250641,-73.651175,-73.657336,-73.657306163973,-73.654671,-73.6553709999999,-73.670472,-73.679973,-73.6871729999999,-73.694273,-73.727775,-73.6959488909347],"lat":[41.1154341295047,41.141495,41.144921,41.198434,41.200814,41.21276,41.295422,41.366375,41.3751144732893,41.3765175443786,41.3767775298305,41.433905,41.43589,41.441094,41.451331,41.45306,41.455236,41.455709,41.457159,41.475894,41.476394,41.476911,41.47806,41.478968,41.479693,41.527194,41.616429,41.6666459431535,41.823773,41.824285,42.049638,42.046984,42.04694,42.044945,42.044877,42.0419641289823,42.039861,42.0393557730919,42.03771,42.037709,42.036494,41.997595,42.0021291137822,42.002995,42.007695,42.020865,42.020947,42.036195,42.036788,42.034607072683,42.0333018587989,42.0309824131634,42.0302453271016,42.030245,42.0289619314256,42.027339,42.0247867721326,42.023569,42.008065,41.841101,41.840141,41.80867,41.807001,41.724734,41.7245680002953,41.6400171907069,41.59691,41.5968521603427,41.545772004335,41.416709,41.419599,41.412119,41.409855,41.40583,41.395359,41.384524,41.370899,41.3446450928394,41.3412037300917,41.3346897237535,41.3223991449254,41.3309410994081,41.3364104070997,41.332216844508,41.334518,41.335113,41.337959,41.337799,41.3298707791293,41.3245260076111,41.3299873185588,41.3298610458411,41.3205767016128,41.3168376629151,41.3196337706732,41.3141644629816,41.306998,41.299098,41.299398,41.3102622077257,41.317597,41.322497,41.323997,41.323197,41.315697,41.313197,41.299097,41.2913654412443,41.2990470540538,41.300413,41.2994875399931,41.298619969503,41.294386,41.289997,41.282926,41.2777820681203,41.2784603363924,41.2829156712027,41.2801098659519,41.2774463623202,41.269698,41.261798,41.278172,41.278398,41.278885,41.270103,41.270881,41.265866,41.260099,41.2612532125757,41.2655996239275,41.2644209367324,41.2626897376839,41.2562069552555,41.2556463199468,41.250499,41.268098,41.271698,41.268698,41.271998,41.266998,41.265897,41.2662185404088,41.269197,41.266997,41.257597,41.251297,41.246697,41.24497,41.24448,41.2490070987147,41.2510181340873,41.2541674917157,41.2591381634829,41.2547274490268,41.2669133977837,41.2669133977837,41.264796,41.2522438404381,41.25406128295,41.2567546004101,41.2566897426067,41.2555436664966,41.24774,41.245297,41.242597,41.243697,41.247297,41.248297,41.252797,41.256197,41.259897,41.2829319123064,41.2820333171858,41.2819048683775,41.2800564120998,41.2715741025116,41.268897,41.258497,41.251597,41.234358477595,41.233497,41.222697,41.210197,41.204297,41.204097,41.206397,41.207197,41.210197,41.206697,41.194015,41.172194,41.168738,41.159697,41.156997,41.153718009873,41.150797,41.146797,41.1585649902098,41.1605324428772,41.1649448907348,41.1666968918774,41.158096,41.1426023882342,41.143996,41.126396,41.117496,41.127896,41.125696,41.116296,41.109996,41.1040201821738,41.087696,41.0862991549312,41.0732584172517,41.056696,41.057096,41.0513466475716,41.035997,41.0481730713356,41.0387375179864,41.029497,41.019297,41.016397,41.0219187582978,41.0287762264908,41.0316695768173,41.0319201825616,41.0243364633736,41.016797,41.010897,41.001597,41.000897,41.0105365965247,41.0159948857123,41.0150537771078,41.0021708202563,40.995229,40.985171,40.985467972027,41.011697,41.012797,41.030097,41.041797,41.050697,41.059296,41.100696,41.1154341295047]}]],[[{"lng":[-70.2755261402452,-70.2606323209613,-70.2492757842984,-70.2444352962782,-70.2401533248576,-70.2295414697787,-70.2086901256675,-70.1963039999999,-70.1244599999999,-70.092142,-70.082072,-70.062565,-70.046088,-70.031332,-70.028805483994,-70.0309243977764,-70.0351622253411,-70.0384583154749,-70.045586,-70.049564,-70.0490528935118,-70.0335141802744,-70.0184463357524,-69.960277,-69.9601809999999,-69.9644219999999,-69.965725,-69.975,-70.001586,-70.015225,-70.0528069999999,-70.083239,-70.096967,-70.118669,-70.170681,-70.2371745552283,-70.2561641773408,-70.2667760215963,-70.2734782424387,-70.2755261402452],"lat":[41.3104639010334,41.3100915494181,41.3056234094053,41.3032031671991,41.2953839131575,41.2901710735218,41.2901710735218,41.294612,41.293851,41.297741,41.299093,41.308726,41.321651,41.339332,41.3599186172926,41.3674525349912,41.3721612358339,41.3763990725236,41.383598,41.3879,41.3917023468409,41.3858164650844,41.3686297159049,41.278731,41.264546,41.25457,41.252466,41.247392,41.239353,41.237964,41.242685,41.2444,41.24085,41.242351,41.255881,41.2827241602721,41.2881231684999,41.2944530485502,41.3015276065768,41.3104639010334]}],[{"lng":[-70.832044491502,-70.823735,-70.8209179999999,-70.8217427449082,-70.82191,-70.830087,-70.8384521310828,-70.832044491502],"lat":[41.6065040037231,41.598569,41.587673,41.5836556941569,41.582841,41.585385,41.596459911356,41.6065040037231]}],[{"lng":[-70.833802,-70.812309,-70.800289,-70.783291,-70.774974,-70.768901,-70.729225,-70.724366,-70.712432,-70.711493,-70.701378,-70.686881,-70.64933,-70.603555,-70.598444,-70.59628,-70.57485,-70.567356,-70.56328,-70.553277,-70.552943,-70.555588,-70.553096,-70.547567,-70.538301,-70.528581,-70.5175839999999,-70.506984,-70.502372,-70.501306,-70.498959,-70.490758,-70.484503,-70.4726039999999,-70.473035,-70.470788,-70.463833,-70.450431,-70.446233,-70.449268,-70.448262,-70.451084,-70.496162,-70.538294,-70.599157,-70.709826,-70.733253,-70.747541,-70.7641879999999,-70.768015,-70.766166,-70.7686869999999,-70.775665,-70.802083,-70.8194149999999,-70.838777,-70.833802],"lat":[41.353386,41.355745,41.3538,41.347829,41.349176,41.353246,41.397728,41.398942,41.40885,41.41546,41.430925,41.441334,41.461068,41.482384,41.481151,41.471905,41.468259,41.471208,41.469127,41.452955,41.443394,41.430882,41.423952,41.415831,41.409241,41.4051,41.403769,41.400242,41.392005,41.385391,41.384339,41.383634,41.38629,41.399128,41.408757,41.412875,41.419145,41.420703,41.39648,41.380422,41.353651,41.348161,41.346452,41.348958,41.349272,41.341723,41.336226,41.329952,41.318706,41.311959,41.308962,41.303702,41.300982,41.314207,41.327212,41.347209,41.353386]}],[{"lng":[-73.508142,-73.410647401743,-73.3835563469972,-73.352527,-73.3070040761806,-73.264957,-73.1424865920119,-73.022903,-73.018645853029,-72.9302707464521,-72.8641799765264,-72.5166890388952,-72.458519,-72.4512567568816,-72.412011288873,-72.2829683292889,-72.2036857753901,-72.0813838334013,-71.928811,-71.8987144838182,-71.8054495273814,-71.636214,-71.631814,-71.294205,-71.2545323428329,-71.245504,-71.208302,-71.2082269999999,-71.208137,-71.181803,-71.186104,-71.165603,-71.149703,-71.1138579476739,-71.0584070060572,-71.037901,-70.996901,-70.931699,-70.930799,-70.914899,-70.914886,-70.902768,-70.886136,-70.848625,-70.817296,-70.817731,-70.80522,-70.792867,-70.7722669999999,-70.770453,-70.7785522328027,-70.7786711101813,-70.7644209999999,-70.748752,-70.7444269999999,-70.72982,-70.728845,-70.689402,-70.682594,-70.681594,-70.663548,-70.645101,-70.630077,-70.620031,-70.622864,-70.623815,-70.6227909999999,-70.61482,-70.595474,-70.591742,-70.591469,-70.594014,-70.605611,-70.61842,-70.635635,-70.654727,-70.664887,-70.6680223724085,-70.6681154433567,-70.668487734364,-70.6704422711705,-70.6725829498734,-70.6757474342572,-70.6788188440856,-70.6814282631182,-70.6845019758551,-70.698574,-70.729688,-70.737044,-70.757283,-70.804091,-70.815391,-70.823291,-70.848492,-70.8713815915808,-70.8723570651314,-70.8662791257328,-70.8597509639695,-70.8571246934999,-70.842091,-70.831091,-70.835991,-70.841591,-70.847391,-70.8577909999999,-70.879692,-70.8864929999999,-70.887992,-70.887292,-70.894292,-70.908092,-70.917693,-70.921993,-70.934993,-70.9342641201558,-70.9331550472276,-70.9282257890563,-70.913192,-70.908392,-70.901992,-70.905692,-70.936393,-70.9432951421321,-70.9436120192344,-70.9470196107773,-70.960470132041,-70.9606474923013,-70.9608349999999,-70.982994,-70.9860837293712,-70.987694,-70.9890256253117,-70.990595,-70.989195,-70.9850680480389,-70.983426186556,-70.9803356214526,-70.9727057913685,-70.9701947073389,-70.9717399889549,-70.9725126278912,-70.9727057913685,-70.9722228864185,-70.953292,-70.953022,-70.963578231407,-70.9748969387053,-70.9799274721875,-70.9822817138618,-70.9982529919893,-71.0068767606888,-71.0086732892561,-71.0156801942828,-71.0131649310233,-71.0053987069513,-71.0009479201432,-71.0061581150381,-71.0049004781859,-70.9960970480736,-70.9890902286068,-70.9673511384819,-70.9489705199025,-70.9455466385201,-70.9358864067557,-70.9231691438823,-70.9109410004886,-70.9063020124699,-70.8962672312601,-70.8957781070409,-70.8971231962738,-70.9155876900494,-70.9174895821622,-70.907556377186,-70.882764,-70.881242,-70.8708729999999,-70.861807,-70.851093,-70.8310749999999,-70.8246607239285,-70.811742,-70.7887239999999,-70.7807224526948,-70.7709640575636,-70.764757,-70.754488,-70.74723,-70.7305599999999,-70.722269,-70.7187069999999,-70.714301,-70.706264,-70.685315,-70.6794649147252,-70.663931,-70.640169,-70.63848,-70.647349,-70.64819,-70.643208,-70.6443368052116,-70.650874,-70.66936,-70.6716659999999,-70.667512,-70.670934,-70.678798,-70.6867980908651,-70.6958089503962,-70.712204,-70.710034,-70.698981,-70.6624760464287,-70.6516733652277,-70.6483650411497,-70.631251,-70.6235125176287,-70.616491,-70.608166,-70.598078,-70.583572,-70.552941,-70.546386,-70.54741,-70.545949,-70.532084,-70.525567,-70.535487,-70.542065,-70.543168,-70.54103,-70.5372893339932,-70.532656,-70.517411,-70.494048,-70.471552,-70.412476,-70.375341,-70.290957,-70.275203,-70.272289,-70.263654,-70.259205,-70.23485,-70.216073,-70.189254,-70.182076,-70.141533,-70.1219779999999,-70.096061,-70.064314,-70.0247339999999,-70.008462,-70.003842,-70.004486,-70.009013,-70.000188,-70.002922,-70.0121539999999,-70.024335,-70.025553,-70.030537,-70.044995,-70.054464,-70.0656709999999,-70.0657230043003,-70.0653718760515,-70.0640844118541,-70.0660021058093,-70.0675658478127,-70.0708888028844,-70.0730389505065,-70.074006,-70.0754230209596,-70.077421,-70.0837749999999,-70.0895779999999,-70.095595,-70.10806,-70.1230429999999,-70.148294,-70.1554149999999,-70.169781,-70.178468,-70.186816,-70.194456,-70.195345,-70.193074,-70.1862948316261,-70.1867078839547,-70.190834,-70.196693,-70.208016,-70.218701,-70.233256,-70.238875,-70.24354,-70.245385,-70.238087,-70.225626,-70.206899,-70.1893049999999,-70.160166,-70.115968,-70.0826239999999,-70.058531,-70.0335009999999,-70.011898,-69.9971251342739,-69.986085,-69.968598,-69.945314,-69.935952,-69.928652,-69.928261,-69.933114,-69.9475991477749,-69.951169,-69.958272,-69.9632337458669,-69.9678690720453,-69.9764775001175,-69.982768284349,-69.988215,-69.998071,-70.004136,-70.011504,-70.014456,-70.016584,-70.015059,-70.010644,-70.00153,-69.9943565805465,-69.987192,-69.973035,-69.973153484588,-69.975719,-69.996359,-70.007011,-70.014211,-70.029346,-70.055523,-70.089238,-70.140877,-70.158621,-70.191061,-70.245867,-70.25621,-70.25542,-70.259601,-70.265424,-70.267587,-70.269687,-70.2691299999999,-70.2745219999999,-70.28132,-70.29062,-70.321588,-70.3299239999999,-70.338067,-70.351634,-70.360352,-70.364892,-70.364744,-70.369854,-70.379151,-70.400581,-70.408535,-70.437246,-70.445289,-70.4612779999999,-70.476256,-70.485571,-70.493244,-70.522327,-70.5596889999999,-70.611081,-70.633607,-70.643627,-70.654104,-70.663856,-70.6695181559949,-70.675379,-70.705181,-70.734306,-70.7571709999999,-70.756481,-70.760863,-70.79027,-70.817478,-70.835867,-70.8575279999999,-70.866946,-70.902763,-70.928197,-70.937282,-70.948431,-70.9510449999999,-70.9498609999999,-70.928165,-70.923698,-70.9189825881956,-70.9116402370138,-70.9060111022673,-70.883247,-70.855265,-70.828546,-70.8021859999999,-70.787769,-70.775268,-70.753905,-70.745053,-70.6947997905558,-70.658659,-70.6543019999999,-70.655365,-70.653899,-70.64878,-70.642748,-70.640948,-70.64204,-70.652449,-70.651986,-70.640003,-70.645251,-70.652614,-70.650419,-70.6386950310687,-70.6376317515425,-70.646308113729,-70.6492852993694,-70.6614748579409,-70.6459622068206,-70.6254402386456,-70.6236523408959,-70.6265285244943,-70.6429141477928,-70.6446407129878,-70.6510926950984,-70.656596,-70.6704529999999,-70.708193144096,-70.718738596918,-70.7263313221434,-70.728933019112,-70.721302,-70.717451,-70.7195754902438,-70.729395297111,-70.7443964776698,-70.7553473804679,-70.7614808120401,-70.7614969948868,-70.7623598934694,-70.758198,-70.757622,-70.765463,-70.769318,-70.773654,-70.775798,-70.7767087951913,-70.8091183088371,-70.8132856428791,-70.8157285631869,-70.8163512673986,-70.8046635714231,-70.800215,-70.801063,-70.810279,-70.8352959881423,-70.8431769204954,-70.8441647765299,-70.8525175599458,-70.8550306607933,-70.8551620711308,-70.8542320664628,-70.8501806891396,-70.8531211415763,-70.857239,-70.868904,-70.86836,-70.869624,-70.872665,-70.889209,-70.9132024663077,-70.9045222475448,-70.899981,-70.901381,-70.9108141814883,-70.9165808743311,-70.9200741621255,-70.9271716332153,-70.9297222856122,-70.9299995308117,-70.9273934285152,-70.931338,-70.937978,-70.9415883685457,-70.9469114729376,-70.9487967372854,-70.947299615787,-70.93783,-70.931545,-70.941785,-70.9792252545114,-70.983354,-71.0032749999999,-71.019354,-71.0235227155905,-71.0355139999999,-71.0584179999999,-71.085663,-71.12057,-71.134484,-71.134478,-71.134688,-71.135188,-71.14587,-71.153989,-71.17609,-71.17609,-71.1759899999999,-71.18129,-71.191175,-71.191178,-71.19439,-71.1956401791165,-71.2012175157499,-71.2247976828309,-71.2613919999999,-71.3177899497036,-71.317795,-71.327896,-71.339297,-71.339597,-71.337597,-71.339298,-71.339298,-71.352699,-71.354699,-71.362499,-71.364699,-71.365399,-71.370999,-71.373799,-71.3766,-71.3817,-71.3816,-71.381401,-71.381501,-71.3814658758777,-71.381401,-71.4581035191943,-71.4982581900398,-71.499905,-71.500905,-71.527306,-71.527606,-71.559439,-71.576908,-71.5911038317156,-71.6062419037219,-71.799242,-71.80065,-71.8843442162069,-72.059752,-72.1021598794927,-72.135687,-72.1357150078587,-72.1988275090473,-72.3974284906805,-72.5091865567729,-72.695927,-72.755838,-72.757467,-72.758151,-72.766139,-72.766739,-72.7747567856785,-72.816741,-72.813541,-72.863619,-72.8637329999999,-73.0087393050431,-73.053254,-73.1272760899221,-73.229798,-73.231056,-73.293097,-73.29442,-73.487314,-73.496879,-73.508142],"lat":[42.086257,42.3517381460233,42.4255080203494,42.510002,42.6326534514115,42.74594,42.7435078350649,42.741133,42.741025285999,42.7387892259372,42.7371170024253,42.7283248137924,42.726853,42.7266525749882,42.725569469774,42.7220081132792,42.7198200556031,42.7164447392214,42.712234,42.7114783907221,42.7091368616908,42.704888,42.704788,42.69699,42.7341357155738,42.742589,42.743314,42.743294,42.743273,42.73759,42.790689,42.808689,42.815489,42.8278646195755,42.8470092354716,42.854089,42.864589,42.884189,42.884589,42.886589,42.886564,42.88653,42.88261,42.860939,42.87229,42.850613,42.781798,42.747118,42.711064,42.704824,42.6985199438958,42.6936222010573,42.68565,42.683878,42.682092,42.669602,42.663877,42.653319,42.654525,42.662342,42.677603,42.689423,42.692699,42.688006,42.67599,42.665481,42.660873,42.65765,42.660336,42.648508,42.639821,42.63503,42.634898,42.62864,42.600243,42.582234,42.580436,42.58173153725,42.585361385393,42.5896427437005,42.5922487897698,42.5942963939172,42.5946686867282,42.5943894666691,42.5931730328705,42.5888580133313,42.577393,42.57151,42.576863,42.570455,42.561595,42.554195,42.551495,42.550195,42.5464037866173,42.5429521147801,42.5226172758465,42.5204412233795,42.5214917315673,42.519495,42.503596,42.490496,42.487596,42.491496,42.490296,42.478796,42.470197,42.467096,42.464896,42.460896,42.466896,42.467996,42.466696,42.457896,42.4446455922373,42.4378327130469,42.4309863429523,42.427697,42.425197,42.420297,42.416197,42.418097,42.4362483244654,42.4520922256322,42.4562355347006,42.4461660155285,42.4437870621377,42.441272,42.423996,42.4191970586362,42.416696,42.4122902986069,42.407098,42.402598,42.4020405711171,42.3962457603784,42.3915133356636,42.3899680540477,42.388036451092,42.3870706486784,42.3850424677272,42.3817587410181,42.3773160549687,42.349698,42.343973,42.3468595170105,42.3558426154987,42.3563815962552,42.3559199807493,42.3527883610379,42.3470391819048,42.3427495100284,42.3260187304675,42.315418679265,42.3071956175715,42.3024830192524,42.2881100644565,42.2827202064081,42.2712218420492,42.2674489415023,42.268167588894,42.272504552204,42.2690806731912,42.2641894155968,42.2632111647888,42.2654122296992,42.2716362051787,42.2850995363923,42.2924364210066,42.2958603000194,42.3024634959353,42.3056864663422,42.3078889652923,42.30886,42.300663,42.285668,42.275965,42.26827,42.267424,42.2659346457723,42.262935,42.25392,42.251791930401,42.2491966143675,42.244062,42.228673,42.221816,42.21094,42.207959,42.184853,42.168783,42.163137,42.133025,42.1262707559227,42.1083360000001,42.088633,42.081579,42.076331,42.068441,42.050821,42.0458945069369,42.046247,42.037116,42.02139,42.01232,42.007786,42.00551,42.0127637949365,42.0133461294889,42.007586,41.999544,41.987103,41.9605916024546,41.9587011330481,41.961671870313,41.950475,41.9432725826758,41.940204,41.940701,41.947772,41.950007,41.929641,41.916751,41.911934,41.907158,41.889568,41.85873,41.839381,41.831263,41.824446,41.815754,41.8108590611294,41.804796,41.790953,41.773883,41.761563,41.744397,41.738779,41.734312,41.726143,41.721346,41.714115,41.713954,41.733733,41.742981,41.751982,41.750885,41.760072,41.758841,41.766549,41.772845,41.787364,41.800786,41.80852,41.838826,41.876625,41.886938,41.890315,41.891656,41.89882,41.911699,41.929154,41.930049,41.927366,41.911658,41.899640605553,41.8877022859186,41.8789241120183,41.8770108704361,41.8777927414378,41.8829726389548,41.8997828740142,41.93865,41.958088705972,41.985497,42.012041,42.024896,42.032832,42.043601,42.051668,42.06195,42.062409,42.059736,42.05642,42.05045,42.03947,42.034163,42.027576,42.0213083060743,42.0199039303981,42.020028,42.022429,42.03073,42.045848,42.057714,42.060479,42.060569,42.063733,42.072878,42.078601,42.0819,42.082337,42.078628,42.067638,42.054657,42.040363,42.017736,41.98972,41.9667574736944,41.949597,41.9117,41.845222,41.809422,41.74125,41.6917,41.670014,41.6453944173499,41.640799,41.639429,41.6337938183384,41.627503034107,41.6036642687565,41.5818120800175,41.554704,41.54365,41.54212,41.542924,41.545534,41.550772,41.553037,41.552692,41.561953,41.5768456673614,41.608579,41.641046,41.6469625244529,41.653738,41.667184,41.671579,41.671971,41.667744,41.664843,41.662813,41.650423,41.650438,41.645259,41.628479,41.620698,41.617541,41.610863,41.609333,41.610912,41.617775,41.625742,41.632927,41.635125,41.635196,41.630508,41.634578,41.636338,41.634687,41.631069,41.626721,41.623671,41.615888,41.611361,41.606382,41.607345,41.605329,41.591815,41.57182,41.558502,41.554244,41.552044,41.548965,41.54833,41.542989,41.538254,41.532357,41.519025,41.514031,41.5133391388839,41.512623,41.496677,41.486335,41.469917,41.465977,41.460947,41.446339,41.445562,41.441877,41.425767,41.422378,41.421061,41.415781,41.411618,41.409193,41.411777,41.415323,41.431265,41.430716,41.4252996450504,41.4244838275498,41.4257075538007,41.432239,41.448892,41.456448,41.460864,41.474609,41.477465,41.492256,41.500966,41.5256400617567,41.543385,41.549926,41.557498,41.56516,41.56987,41.572385,41.577325,41.583066,41.60521,41.610184,41.624616,41.633547,41.637829,41.644202,41.6494271987734,41.6545734737241,41.6784334811726,41.6809428207885,41.6817563451039,41.6937941858324,41.6986914721517,41.7073977589416,41.7129946601747,41.7184096535187,41.7189802353555,41.7157153747965,41.715401,41.721912,41.7309592182658,41.7357398236832,41.7327308543879,41.7234331346164,41.712968,41.69398,41.6850019613916,41.6881400938536,41.6969673182672,41.6943263842033,41.6768080145163,41.6766409844003,41.6677346372932,41.661225,41.654265,41.641575,41.641145,41.645033,41.649145,41.6507558787609,41.656436897293,41.6556704913952,41.6527964669577,41.645994613454,41.6411566730911,41.631753,41.629513,41.624873,41.6245321404412,41.6284869341519,41.6289826580913,41.6269186507028,41.6242829593526,41.6241451387434,41.6184291888586,41.5935288087418,41.5873211852426,41.587705,41.614664,41.622664,41.625608,41.627816,41.632904,41.6192657881063,41.6103613154659,41.593504,41.592504,41.5955058947085,41.6074828763666,41.6108098166115,41.6112534072114,41.6094790383644,41.6004408541018,41.5940642209605,41.5842,41.577416,41.5810337105531,41.5810891561545,41.5790375464061,41.5736589942638,41.565239,41.540169,41.540121,41.5304270863926,41.520616,41.511912,41.508857,41.5063263626273,41.499047,41.505967,41.509292,41.497448,41.641198,41.641262,41.660502,41.660502,41.662795,41.664102,41.668102,41.668502,41.671402,41.672502,41.6742920000001,41.674216,41.674802,41.6750904939328,41.6818632832337,41.7104976501041,41.752301,41.7760988689599,41.776101,41.780501,41.8065,41.832,41.8337,41.893399,41.893599,41.896699,41.896499,41.895599,41.895399,41.895299,41.894599,41.894399,41.893999,41.922699,41.922899,41.964799,41.966699,41.9849983164665,42.018798,42.0177623891285,42.0172202346582,42.017198,42.017098,42.015098,42.014998,42.014342,42.014098,42.0137127982192,42.0133020288882,42.008065,42.023569,42.0247867721326,42.027339,42.0289619314256,42.030245,42.0302453271016,42.0309824131634,42.0333018587989,42.034607072683,42.036788,42.036195,42.020947,42.020865,42.007695,42.002995,42.0021291137822,41.997595,42.036494,42.037709,42.03771,42.0393557730919,42.039861,42.0419641289823,42.044877,42.044945,42.04694,42.046984,42.049638,42.049675,42.086257]}]],[[{"lng":[-75.559446,-75.526844,-75.526344,-75.509342,-75.509742,-75.504042,-75.475384,-75.474168,-75.4692389999999,-75.466263,-75.466249,-75.448135,-75.4406232902903,-75.437938,-75.4160946922016,-75.415041,-75.3901692321945,-75.374635,-75.3065,-75.271159,-75.235026,-75.2109723448918,-75.210425,-75.184952,-75.1539249233092,-75.13322,-75.072017,-75.0560387328738,-74.974713,-74.9742901391704,-74.838008,-74.740605,-74.724304,-74.7241792845134,-74.721604,-74.722304,-74.7515110721904,-74.770706,-74.860492,-74.9379541015393,-75.024775,-75.035548,-75.058848,-75.061489,-75.070568,-75.065853,-75.06509,-75.068615,-75.100325,-75.117292,-75.135389,-75.147368,-75.190161,-75.1908580424281,-75.196803,-75.200708,-75.2031992773883,-75.20392,-75.196533,-75.171587,-75.16365,-75.149378,-75.1344,-75.1103104918433,-75.108505,-75.053294,-75.051029,-75.052538,-75.117764,-75.119893,-75.120316,-75.120435,-75.1205635272738,-75.131364,-75.135526,-75.130575,-75.109114,-75.091377,-75.069277,-75.051794,-75.036982,-75.026003,-74.9806737558717,-74.968389,-74.966759,-74.9673892747684,-74.969434,-74.9743378756495,-74.923169,-74.882139,-74.867287,-74.864356,-74.867267,-74.861678,-74.838366,-74.830057,-74.795847,-74.76173,-74.694914,-74.457584,-74.392098,-74.3665552025132,-74.234473,-74.2133725565128,-74.096786,-74.092486,-74.041054,-74.041049,-73.91188,-73.90268,-73.893979,-73.917905,-73.9196898150772,-73.919705,-73.933406,-73.9334079229381,-73.938081,-73.9477203848484,-73.948281,-73.9671734153527,-73.9741193714507,-73.9868635531063,-74.0091839999999,-74.013784,-74.0200961523546,-74.024543,-74.038538,-74.051185,-74.069885,-74.082786,-74.089986,-74.0873971838353,-74.094086,-74.143387,-74.1613974881353,-74.181083,-74.186027,-74.189106,-74.2005322993678,-74.202223,-74.2067310471904,-74.208988,-74.214788,-74.218189,-74.231589,-74.248641,-74.251441,-74.246237,-74.26829,-74.27269,-74.26759,-74.261889,-74.236689,-74.2250347010091,-74.209788,-74.206188,-74.2064191406135,-74.2086554818759,-74.2072048819245,-74.202127781948,-74.1939077170207,-74.1913087251116,-74.187787,-74.174787,-74.1748931631422,-74.175074416585,-74.1768416388604,-74.1753462969689,-74.1699766609249,-74.1670086355235,-74.166192994372,-74.1640287138429,-74.1633139032732,-74.157787,-74.1536110709572,-74.1526855691552,-74.1519515510818,-74.142886,-74.139886,-74.1384151108191,-74.1358234408625,-74.1337268097356,-74.1311351392146,-74.1274660355891,-74.1246922584096,-74.1223272011136,-74.1168625977497,-74.088085,-74.076185,-74.058984,-74.047884,-74.006383,-73.9985053316113,-73.9954863744949,-73.991682,-74.006077,-74.017783,-74.017917,-74.014031,-74.0071,-73.995683,-73.978282,-73.976982,-73.971381,-73.971381,-73.977442,-73.981681,-73.993292,-73.9999135851573,-74.030181,-74.03408,-74.0318605705666,-74.031318,-74.033546,-74.039421,-74.064135,-74.077247,-74.090945,-74.097071,-74.096905648265,-74.0989202499343,-74.101443,-74.113655,-74.141733,-74.190974,-74.240506,-74.249043,-74.27737,-74.291585,-74.311037,-74.3124508024098,-74.313689,-74.308344,-74.304778,-74.302184,-74.304343,-74.334804,-74.36699,-74.406692,-74.406792,-74.408237,-74.412692,-74.459894,-74.521797,-74.5414426079523,-74.551151,-74.553439,-74.560957,-74.581008,-74.597921,-74.614481,-74.636306,-74.646595,-74.651443,-74.67143,-74.714341,-74.71532,-74.714135,-74.704409,-74.705876,-74.738316,-74.778777,-74.786356,-74.792723,-74.807917,-74.819354,-74.850748,-74.864458,-74.865198,-74.870497,-74.882309,-74.90705,-74.920414,-74.933571,-74.963463,-74.967274,-74.971995,-74.955363,-74.94947,-74.93832,-74.903664,-74.897784,-74.892547,-74.885914,-74.887167,-74.905181,-74.9149362674663,-74.962382,-74.976266,-74.998002,-75.026179,-75.028885,-75.027824,-75.023586,-75.023437,-75.026376,-75.035672,-75.041663,-75.047797,-75.052326,-75.062506,-75.086395,-75.101019,-75.107286,-75.114748,-75.12707,-75.136548,-75.139136,-75.165979,-75.164798,-75.170444,-75.177506,-75.205857,-75.21251,-75.241639,-75.244056,-75.242881,-75.244357,-75.251806,-75.271629,-75.28262,-75.285333,-75.288898,-75.30601,-75.315201,-75.326754,-75.327463,-75.333743,-75.341969,-75.355558,-75.365016,-75.39003,-75.394331,-75.395181,-75.399304,-75.40729390306,-75.422099,-75.431803,-75.442393,-75.465212,-75.476279,-75.483572,-75.505672,-75.508383,-75.536431,-75.542894,-75.544368,-75.542693,-75.528088,-75.527141,-75.514756,-75.511932,-75.512732,-75.525677,-75.531133,-75.534477,-75.537213,-75.53954,-75.539949,-75.543965,-75.545405,-75.55587,-75.559446],"lat":[39.629812,39.655713,39.656413,39.685313,39.686113,39.698313,39.731057,39.735473,39.743613,39.750737,39.750769,39.773969,39.7809260056388,39.783413,39.7958301632434,39.801786,39.8165492648381,39.82577,39.849812,39.84944,39.856613,39.8657060853423,39.865913,39.881615,39.9061436158552,39.922512,39.980612,39.9917945208936,40.048711,40.0488724638268,40.10091,40.13521,40.14701,40.1473240982627,40.15381,40.160609,40.1933744810311,40.214908,40.284584,40.3406336063018,40.403455,40.406309,40.418065,40.422848,40.455165,40.519495,40.526148,40.542223,40.567811,40.573211,40.575624,40.573152,40.589321,40.5913421291964,40.60858,40.618356,40.6750860780622,40.691498,40.751631,40.777745,40.778386,40.774786,40.773765,40.7898857602567,40.791094,40.8599,40.865662,40.872051,40.953023,40.961646,40.96263,40.968302,40.9683134661993,40.969277,40.973807,40.991093,41.004102,41.012283,41.019348,41.027142,41.034702,41.042687,41.0781784118553,41.087797,41.093425,41.0940491487333,41.096074,41.1039119925741,41.138146,41.180836,41.208754,41.224854,41.228861,41.241575,41.277286,41.2872,41.318951,41.336398,41.357423,41.248225,41.215594,41.203811336412,41.142883,41.1338279555562,41.083796,41.081896,41.059088,41.059086,41.001297,40.997297,40.997197,40.917577,40.9135125794435,40.913478,40.882078,40.8820749648427,40.874699,40.8592948849972,40.858399,40.82899218604,40.8181805224737,40.7983436846727,40.763601,40.756601,40.7289299649779,40.709436,40.710741,40.695802,40.684502,40.673702,40.659903,40.6536067214332,40.649703,40.641903,40.6440917215128,40.646484,40.646076,40.643832,40.6327001345108,40.631053,40.5945694707129,40.576304,40.560604,40.557204,40.559204,40.549601,40.542301,40.520963,40.499205,40.488405,40.471806,40.464706,40.457806,40.4533008494403,40.447407,40.440707,40.4387888160608,40.4375195411399,40.4354343040208,40.4389399203505,40.4409949368752,40.4429895116254,40.447407,40.455607,40.4544913040603,40.4491443250808,40.4477396101302,40.4466067755634,40.4506396667528,40.4487365042855,40.4471278794861,40.4483118893419,40.4484240979776,40.446607,40.4476472638679,40.4473440823284,40.4480621438367,40.450407,40.453407,40.4544679354318,40.4551959320843,40.4546717745848,40.4532448993851,40.4510609088631,40.4495802460612,40.4482581643359,40.4460693849259,40.438407,40.433707,40.422708,40.418908,40.411108,40.4109110598834,40.4194715054971,40.442908,40.464625,40.472207,40.474338,40.476471,40.475298,40.468707,40.440208,40.408508,40.371709,40.34801,40.299373,40.279411,40.237669,40.2170524974316,40.122814,40.103115,40.101046639623,40.100541,40.099518,40.081437,39.979157,39.910991,39.799978,39.767847,39.7630302626847,39.7595382844191,39.756173,39.740719,39.689435,39.625118,39.554911,39.547994,39.514064,39.507705,39.506715,39.499869360202,39.493874,39.483945,39.482945,39.478935,39.471445,39.432001,39.402017,39.377516,39.373916,39.365071,39.360816,39.345016,39.313816,39.3002453114243,39.293539,39.286915,39.278677,39.270819,39.258851,39.244659,39.220834,39.212002,39.198578,39.179802,39.119804,39.116893,39.114631,39.107858,39.102937,39.074727,39.023073,39.000113,38.991991,38.985948,38.979402,38.954538,38.94041,38.941439,38.943543,38.941759,38.931994,38.929136,38.928519,38.931194,38.933413,38.94037,39.001262,39.015637,39.035185,39.087437,39.098811,39.113183,39.143627,39.158825,39.174945,39.1775531240776,39.190238,39.192271,39.191253,39.193621,39.19456,39.199482,39.202594,39.204791,39.20985,39.215415,39.215511,39.211702,39.213609,39.213564,39.208159,39.211657,39.211403,39.207554,39.189766,39.179425,39.180021,39.201842,39.216606,39.234643,39.242746,39.262619,39.262755,39.274097,39.27769,39.280574,39.2857,39.299913,39.304041,39.299055,39.292212,39.289557,39.301712,39.310593,39.332473,39.33927,39.345335,39.348697,39.347823,39.341388,39.358259,39.363753,39.371398,39.37949,39.3819544443261,39.386521,39.391625,39.402291,39.43893,39.438126,39.440824,39.452927,39.459131,39.460559,39.470447,39.479602,39.496568,39.498114,39.500112,39.562612,39.567616,39.578,39.584048,39.587984,39.590384,39.592944,39.594251,39.594384,39.596,39.596784,39.605824,39.629812]}]],[[{"lng":[-72.0349579999999,-72.029438,-72.023422,-72.0189259999999,-72.0068717460723,-71.991117,-71.980061,-71.9528641720686,-71.943563,-71.9268023807496,-71.935259,-71.9462702387966,-71.9625980950072,-71.9789259755571,-71.994717,-72.002461,-72.036846,-72.0349579999999],"lat":[41.255458,41.26309,41.270994,41.274114,41.2734801942408,41.281331,41.280291,41.2850981024605,41.286675,41.2901220591538,41.280579,41.2763061752049,41.2709682158941,41.2650022635179,41.256451,41.252867,41.249794,41.255458]}],[{"lng":[-72.142929,-72.140737,-72.132225,-72.128352,-72.126704,-72.0842069999999,-72.0811669999999,-72.086975,-72.095711,-72.0972,-72.097136,-72.103152,-72.1064,-72.12056,-72.139233,-72.141921,-72.142929],"lat":[41.097811,41.100835,41.104387,41.108131,41.115139,41.101524,41.09394,41.058292,41.05402,41.054884,41.075844,41.086484,41.088883,41.093171,41.092451,41.094371,41.097811]}],[{"lng":[-73.7733612559203,-73.7705522899054,-73.7663333113245,-73.7651278892899,-73.7660319565459,-73.7696482226496,-73.7730384741292,-73.7737165238411,-73.7733612559203],"lat":[40.8594490081549,40.8603302521856,40.8573166941792,40.8542278003982,40.8449611139451,40.8446597584365,40.8481253471508,40.8548305114155,40.8594490081549]}],[{"lng":[-73.775176,-73.772776,-73.772276,-73.7705759999999,-73.768276,-73.767276,-73.7671759999999,-73.767076,-73.767076,-73.767076,-73.766276,-73.766976,-73.770876,-73.775276,-73.775176],"lat":[40.884199,40.884599,40.887499,40.888399,40.887599,40.886899,40.886299,40.885399,40.884799,40.883499,40.881099,40.880099,40.879299,40.882199,40.884199]}],[{"lng":[-74.0469203510024,-74.0408599758755,-74.0400182561342,-74.0394009963779,-74.0379981303296,-74.0434412468998,-74.0444513087147,-74.0463592056705,-74.047313153061,-74.0469203510024],"lat":[40.6911389180033,40.7001172512209,40.7006783984325,40.7004539385599,40.6989949613494,40.6896799397054,40.6884454180179,40.6891749077105,40.6904655427351,40.6911389180033]}],[{"lng":[-74.256088,-74.2527019999999,-74.242888,-74.241732,-74.2478079999999,-74.229002,-74.216997,-74.210887,-74.204054,-74.19682,-74.195407,-74.196096,-74.200994,-74.201812,-74.20058,-74.1894,-74.180191,-74.174085,-74.170187,-74.1529729999999,-74.120186,-74.086485,-74.0758839999999,-74.0697,-74.067598,-74.060345,-74.053125,-74.059184,-74.068184,-74.090797,-74.1114709999999,-74.112585,-74.1216719999999,-74.137241,-74.1402299999999,-74.1444279999999,-74.148697,-74.160859,-74.177986,-74.182157,-74.199923,-74.210474,-74.219787,-74.23324,-74.246688,-74.250188,-74.254588,-74.256088],"lat":[40.507903,40.513895,40.520903,40.531273,40.543396,40.555041,40.554991,40.560902,40.589336,40.597037,40.601806,40.616169,40.616906,40.619507,40.631448,40.642121,40.645521,40.645109,40.642201,40.638886,40.642201,40.648601,40.648101,40.641216,40.623865,40.611999,40.603678,40.593502,40.584102,40.566463,40.546908,40.547603,40.542691,40.530076,40.533738,40.53516,40.534489,40.52679,40.519603,40.520634,40.511729,40.509448,40.502603,40.501299,40.496103,40.496703,40.502303,40.507903]}],[{"lng":[-79.761964,-79.7619509999999,-79.717825,-79.645358,-79.593992,-79.546262,-79.510999,-79.474794,-79.453533,-79.429119,-79.405458,-79.381943,-79.36213,-79.3519891453114,-79.3423164045491,-79.335129,-79.331483,-79.323079,-79.317740135626,-79.2833639999999,-79.2646239999999,-79.242889,-79.223195,-79.193232,-79.148723,-79.138569,-79.1367251245073,-79.1296297208619,-79.126261,-79.121921,-79.113713,-79.111361,-79.078761,-79.073261,-79.06376,-79.062261,-79.0488599999999,-79.01886,-79.00616,-78.991159,-78.944158,-78.918157,-78.868556,-78.853455,-78.851355,-78.856456,-78.8593559999999,-78.8609855598211,-78.863656,-78.865656,-78.860445,-78.859456,-78.8655915684138,-78.8722270483964,-78.882557,-78.8916549999999,-78.912458,-78.9057579999999,-78.905659,-78.909159,-78.918859,-78.93236,-78.972524,-79.0115629999999,-79.019964,-79.0283532975074,-79.028653,-79.0583987229389,-79.0662686547324,-79.056767,-79.0508659179552,-79.044066,-79.042366,-79.0583987229389,-79.070469,-79.019848,-78.971866,-78.9307639999999,-78.859362,-78.836261,-78.834061,-78.777759,-78.747158,-78.696856,-78.634346,-78.547395,-78.488857,-78.482526,-78.473099,-78.4655021200225,-78.370221,-78.358711,-78.2506409999999,-78.233609,-78.145195,-78.104509,-78.0236089999999,-77.9955913220609,-77.994838,-77.976438,-77.965238,-77.952937,-77.922736,-77.904836,-77.8753349999999,-77.816533,-77.8088692218046,-77.797381,-77.7851319999999,-77.760231,-77.7569309999999,-77.73063,-77.714129,-77.701429,-77.660359,-77.653759,-77.628315,-77.577223,-77.551022,-77.534184,-77.50092,-77.476642,-77.436831,-77.4145159999999,-77.391015,-77.3760378804266,-77.3410919999999,-77.314619,-77.303979,-77.264177,-77.214058,-77.173088,-77.143416,-77.1304289999999,-77.111866,-77.0672949999999,-77.033875,-76.999691,-76.988445,-76.9584019999999,-76.952174,-76.9223509999999,-76.904288,-76.886913,-76.8773969999999,-76.854976,-76.841675,-76.794708,-76.769025,-76.747067,-76.731039,-76.7225013043099,-76.69836,-76.684856,-76.669624,-76.642672,-76.630774,-76.6171093082771,-76.6070929999999,-76.562826,-76.53181,-76.5219993885017,-76.5158822326074,-76.506858,-76.4869619999999,-76.472498,-76.437473,-76.417581,-76.410636,-76.3709178164322,-76.368849,-76.345492,-76.330911,-76.297103,-76.2598579999999,-76.235834,-76.228701,-76.217958,-76.209853,-76.2034729999999,-76.1991379999999,-76.196596,-76.2005002287568,-76.205436,-76.213205,-76.229268,-76.250135,-76.266977,-76.277812,-76.2833070022237,-76.2844811933452,-76.2827199066629,-76.2762618441176,-76.2692166632572,-76.2615844095904,-76.2498424756212,-76.2433844130757,-76.2345779455332,-76.2274849999999,-76.2193134154452,-76.202257,-76.192777,-76.1806039999999,-76.158249,-76.145506,-76.133267,-76.127285,-76.125023,-76.1304459999999,-76.1336971856969,-76.134359,-76.1342959465581,-76.1390860798615,-76.1460716877056,-76.1698019999999,-76.184874,-76.2280504565659,-76.236864,-76.2444388102254,-76.2523178212403,-76.2583058740088,-76.2642939267773,-76.2687061748999,-76.268702,-76.266733,-76.269672,-76.281928,-76.287821,-76.2967554682815,-76.2989615984501,-76.300222237281,-76.2995919239729,-76.2969863510173,-76.3005321858953,-76.3042069624042,-76.360306,-76.360798,-76.3669715910333,-76.363835,-76.3581632272835,-76.355679,-76.312647,-76.286547,-76.245487,-76.206777,-76.191328,-76.164265,-76.118136,-76.045228,-76.000998,-75.978281,-75.970185,-75.94954,-75.912985,-75.871496,-75.8600599283155,-75.82083,-75.807778,-75.765495,-75.696586,-75.491201,-75.433124,-75.333744,-75.301975,-75.30763,-75.283136,-75.216486,-75.189313,-75.139868,-75.064826,-75.027125,-75.005155,-74.999655,-74.99927,-74.992756,-74.972463,-74.826578,-74.801625,-74.724979836325,-74.702018,-74.291307,-74.146814,-74.0273918752465,-73.874597,-73.624588,-73.343124,-73.350188,-73.369647,-73.3534491425926,-73.339958,-73.365326,-73.390231,-73.374389,-73.3619524816717,-73.356788,-73.3386343733687,-73.33863,-73.306707,-73.299885,-73.293613,-73.296031,-73.315016,-73.3232681243901,-73.324681,-73.350806,-73.390583,-73.4036856278336,-73.429239,-73.437429,-73.43688,-73.410776,-73.405999,-73.405525,-73.407742,-73.397256,-73.388389,-73.3793120231026,-73.3792789999999,-73.357547,-73.350431,-73.3607112822931,-73.370724,-73.403517,-73.421606,-73.431229,-73.428636,-73.4002949999999,-73.375594,-73.3665369999999,-73.306234,-73.302552,-73.242042,-73.247061,-73.252582,-73.252674,-73.252832,-73.253084,-73.2548478823402,-73.259159,-73.2694723398386,-73.274294,-73.2743929999999,-73.274466,-73.278673,-73.285388,-73.290944,-73.276421,-73.264957,-73.3070040761806,-73.352527,-73.3835563469972,-73.410647401743,-73.508142,-73.496879,-73.487314,-73.504944,-73.505008,-73.5174731929068,-73.521457,-73.530067,-73.533969,-73.534055,-73.53415,-73.534269,-73.534269,-73.534369,-73.535769,-73.5358569999999,-73.535885,-73.535986,-73.536067,-73.536969,-73.537469,-73.537673,-73.5436412260038,-73.5436683872264,-73.5438149689906,-73.5447279999999,-73.550961,-73.482709,-73.509487,-73.514617,-73.632153,-73.639672,-73.6959488909347,-73.727775,-73.694273,-73.6871729999999,-73.679973,-73.670472,-73.6553709999999,-73.654671,-73.657306163973,-73.657336,-73.6559719999999,-73.659972,-73.662072,-73.664472,-73.678073,-73.683273,-73.686473,-73.697974,-73.7217389999999,-73.7317749999999,-73.756776,-73.781338,-73.7835452253621,-73.784803,-73.7855019999999,-73.7887858359499,-73.7880601281871,-73.7847541310179,-73.7821738416115,-73.7820932062002,-73.7822544738975,-73.7812062323028,-73.7825770124172,-73.7838671571204,-73.7853992049321,-73.788221397447,-73.7910435915244,-73.7895115437128,-73.7922531008165,-73.7937851486281,-73.7972524150572,-73.7995434641273,-73.8069137431192,-73.8128099670268,-73.8155738207561,-73.8152053078777,-73.8118886812602,-73.8045184058389,-73.7973323797156,-73.7859636054264,-73.7813692570466,-73.7760316362797,-73.7684308591267,-73.7683012933897,-73.7540319915311,-73.7544004972682,-73.728275,-73.7266749999999,-73.730675,-73.729575,-73.713674,-73.675573,-73.655872,-73.654372,-73.641072,-73.633771,-73.626972,-73.617571,-73.6018699999999,-73.59517,-73.5699689999999,-73.566169,-73.548068,-73.519267,-73.514999,-73.499941,-73.4970614703723,-73.496642,-73.491765,-73.4853649999999,-73.4783649999999,-73.463708,-73.436664,-73.4298629999999,-73.428836,-73.406074,-73.402963,-73.403462,-73.400862,-73.399762,-73.392862,-73.374462,-73.365961,-73.352761,-73.345561,-73.344161,-73.3313599999999,-73.295059,-73.2369377995271,-73.229285,-73.148994,-73.146242,-73.144673,-73.140785,-73.110368,-73.081582,-73.043701,-73.040445,-72.995931,-72.955163,-72.913834,-72.88825,-72.8260569999999,-72.7741039999999,-72.760030886054,-72.7144248021246,-72.6893414552269,-72.6650182075186,-72.6353742360252,-72.585327,-72.565406,-72.560974,-72.549853,-72.521548,-72.477306,-72.460778,-72.445242,-72.417945,-72.397,-72.356087,-72.3333509999999,-72.3223813527722,-72.291109,-72.278789,-72.272997,-72.2681,-72.245348,-72.2382109999999,-72.237731,-72.2535719999999,-72.265124,-72.300374,-72.300044,-72.3063814920449,-72.3127343826156,-72.3181460984712,-72.32663,-72.335271,-72.335177,-72.317238,-72.297718,-72.2803729999999,-72.276709,-72.283093,-72.273657,-72.260515,-72.241252,-72.229364,-72.217476,-72.201859,-72.190563,-72.183266,-72.17949,-72.174882,-72.162898,-72.16037,-72.153857,-72.137297,-72.135137,-72.137409,-72.116368,-72.1090079999999,-72.10216,-72.095456,-72.083039,-72.079951,-72.0792077328549,-72.076175,-72.0614478994141,-72.057934,-72.0570754513091,-72.0551882048405,-72.0515852694875,-72.0495264587852,-72.0515485494141,-72.0519284046046,-72.0474676347837,-72.0357922404078,-72.0150131166786,-71.99926,-71.9670404637308,-71.961077760244,-71.9603550104283,-71.961563,-71.959595,-71.93825,-71.9193849999999,-71.899256,-71.895496,-71.8895429999999,-71.869558,-71.86447,-71.8574939999999,-71.856214,-71.87391,-71.903736,-71.935689,-72.0293569999999,-72.114448,-72.39585,-72.469996,-72.573441,-72.745208,-72.753112,-72.757176,-72.768152,-72.863164,-72.923214,-73.012545,-73.054963,-73.145266328965,-73.2084399999999,-73.23914,-73.262106,-73.3063959999999,-73.30974,-73.319257,-73.351465,-73.391967,-73.42380607732,-73.450369,-73.4849167607694,-73.562372,-73.583773,-73.6108729999999,-73.646674,-73.754776,-73.7543232607156,-73.7533489999999,-73.774928,-73.806834,-73.834408,-73.878906,-73.934512,-73.934466,-73.9327288162641,-73.9356861008019,-73.9385976888393,-73.9445579544154,-73.9500500636278,-73.991346,-74.002056,-74.00903,-74.012022,-74.012996,-74.007276,-74.0071166533407,-74.0015913294824,-74.010926,-74.032856,-74.039590437876,-74.0424119629985,-74.0383364348109,-74.0358681782583,-74.0320663951838,-74.018272325015,-74.0229114667001,-74.0239821934479,-74.0248271295482,-74.0217208516701,-74.0184900842353,-74.0168002120349,-74.0195263402307,-74.024543,-74.0200961523546,-74.013784,-74.0091839999999,-73.9868635531063,-73.9741193714507,-73.9671734153527,-73.948281,-73.9477203848484,-73.938081,-73.9334079229381,-73.933406,-73.919705,-73.9196898150772,-73.917905,-73.893979,-73.90268,-73.91188,-74.041049,-74.041054,-74.092486,-74.096786,-74.2133725565128,-74.234473,-74.3665552025132,-74.392098,-74.457584,-74.694914,-74.689767,-74.691129,-74.752562,-74.7559499049941,-74.799165,-74.876721,-74.891948,-74.912517,-74.93976,-74.984226,-75.04049,-75.0500737917565,-75.053077,-75.048199,-75.053431,-75.090799,-75.114399,-75.1402409999999,-75.146446,-75.263005,-75.279094,-75.292589,-75.341868,-75.359579,-75.431961,-75.436216,-75.477144,-75.4831501008195,-75.4837379999999,-75.5530975635093,-75.98025,-75.983082,-76.10584,-76.1236959999999,-76.131201,-76.1455192032297,-76.343722,-76.349898,-76.462155,-76.46654,-76.4730304554762,-76.5576241368897,-76.558118,-76.815878,-76.835079,-76.920784,-76.921884,-76.927084,-76.937084,-76.942585,-76.965686,-76.9657279732942,-77.007536,-77.007635,-77.124693,-77.505308,-77.6100277930756,-77.749931,-77.822799,-77.8320299999999,-78.030963,-78.031177,-78.12473,-78.2066062280565,-78.308128,-78.59665,-78.874759,-78.9188541976,-79.061265,-79.538445,-79.551385,-79.6108388547624,-79.625301,-79.625287,-79.761374,-79.762122,-79.761861,-79.761759,-79.761921,-79.761929,-79.761833,-79.762152,-79.761964],"lat":[42.251354,42.26986,42.284711,42.315631,42.341641,42.363417,42.382373,42.404291,42.411157,42.42838,42.453281,42.466491,42.480195,42.4889202766866,42.4896643278453,42.488321,42.489076,42.494795,42.4998844597741,42.511228,42.523159,42.531757,42.536087,42.545881,42.553672,42.564462,42.5696933795434,42.5898242124704,42.590937,42.594234,42.605994,42.613358,42.640058,42.639958,42.644758,42.668358,42.689158,42.701558,42.704558,42.705358,42.731958,42.737258,42.770258,42.783958,42.791758,42.800258,42.800658,42.8053571957635,42.813058,42.826758,42.83511,42.841358,42.8523580825751,42.8533060084181,42.867258,42.884845,42.886557,42.899957,42.923357,42.933257,42.946857,42.955857,42.966804,42.985256,42.994756,43.066896813806,43.069474,43.0752305291377,43.0909702707189,43.126855,43.1320586941109,43.138055,43.143655,43.2389236951748,43.262454,43.273686,43.281254,43.293254,43.310955,43.318455,43.317555,43.327055,43.334555,43.341255,43.357624,43.369541,43.374763,43.374425,43.370812,43.3712323915095,43.376505,43.373988,43.370866,43.36907,43.37551,43.375628,43.366575,43.3652934573297,43.365259,43.369159,43.368059,43.36346,43.35696,43.35696,43.34966,43.34356,43.342078224172,43.339857,43.339261,43.341161,43.337361,43.330161,43.323561,43.308261,43.282998,43.279484,43.271303,43.243263,43.235763,43.234569,43.250363,43.254522,43.265701,43.269263,43.276363,43.2776524189036,43.280661,43.28103,43.27815,43.277363,43.284114,43.281509,43.287561,43.285635,43.287945,43.280937,43.271218,43.271456,43.2745,43.270005,43.270692,43.285006,43.291816,43.293891,43.292926,43.298443,43.305399,43.309632,43.318452,43.331477,43.343421,43.3436861782835,43.344436,43.352691,43.366526,43.401241,43.413356,43.4191367052776,43.423374,43.448537,43.460299,43.4686171373423,43.4711359703417,43.469127,43.47535,43.492781,43.509213,43.521285,43.523159,43.5256901585622,43.525822,43.513437,43.511978,43.51287,43.524728,43.529256,43.532987,43.545156,43.560136,43.574978,43.600454,43.649761,43.6802307671866,43.718751,43.753513,43.804135,43.825713,43.838046,43.841205,43.8439231984789,43.8509683679622,43.858600621629,43.8632974088693,43.8685812802931,43.8732780675334,43.8756264497764,43.8779748547737,43.8773877478358,43.875061,43.8668199822337,43.864898,43.869175,43.877529,43.887542,43.888681,43.892975,43.897889,43.912773,43.933082,43.9403555879287,43.945614,43.9547259839709,43.9621107644334,43.9647054309313,43.962202,43.971128,43.9827365831584,43.9779,43.9758030451594,43.9758030451594,43.9761182109745,43.9780091753281,43.9808456188048,43.987278,43.995578,44.001148,44.009177,44.01142,44.0133071542016,44.017719414539,44.022761982077,44.0309561589069,44.0454546988411,44.0571881935942,44.0594446371513,44.070907,44.087644,44.100409450831,44.111696,44.1233371034592,44.133258,44.199044,44.203773,44.203669,44.214543,44.221244,44.239603,44.29485,44.331724,44.347534,44.34688,44.342835,44.349129,44.368084,44.394839,44.4032818662487,44.432244,44.471644,44.516285,44.567583,44.712947,44.750062,44.806378,44.826637,44.836813,44.849156,44.877478,44.883037,44.896676,44.929449,44.946568,44.958402,44.965921,44.971638,44.977449,44.983402,45.01585,45.014571,45.0059151681189,45.003322,44.992058,44.9915,44.9957654989181,45.001223,45.003954,45.01084,44.994304,44.829136,44.8017241993425,44.778893,44.703294,44.618353,44.575455,44.5630637028053,44.557918,44.5468466671817,44.546844,44.500334,44.476652,44.438903,44.428339,44.388513,44.264796024108,44.243614,44.225943,44.190886,44.1531020562431,44.079414,44.046861,44.042578,44.026944,44.016229,43.948813,43.929887,43.905668,43.832404,43.8084780454188,43.808391,43.785933,43.771438,43.7532680455819,43.735571,43.685032,43.646577,43.588285,43.583994,43.568889,43.61335,43.623462,43.628018,43.625708,43.534925,43.514919,43.370997,43.370285,43.363493,43.354714,43.3146844686886,43.216848,43.0306859127482,42.943652,42.942482,42.940361,42.83341,42.834093,42.80192,42.746019,42.74594,42.6326534514115,42.510002,42.4255080203494,42.3517381460233,42.086257,42.049675,42.049638,41.824285,41.823773,41.6666459431535,41.616429,41.527194,41.479693,41.478968,41.47806,41.476911,41.476394,41.475894,41.457159,41.455709,41.455236,41.45306,41.451331,41.441094,41.43589,41.433905,41.3767775298305,41.3765175443786,41.3751144732893,41.366375,41.295422,41.21276,41.200814,41.198434,41.144921,41.141495,41.1154341295047,41.100696,41.059296,41.050697,41.041797,41.030097,41.012797,41.011697,40.985467972027,40.985171,40.979597,40.968398,40.966198,40.967198,40.962798,40.948998,40.945198,40.939598,40.932037,40.924999,40.912599,40.885447,40.8810395563405,40.878528,40.869079,40.8584854424279,40.8541311989762,40.8517928126782,40.8473579369404,40.8446163798367,40.8423586242622,40.8388913578331,40.8376012131299,40.8367948730811,40.8380043839356,40.8420360888677,40.8465515968915,40.8513896418725,40.8558245176103,40.8555826145018,40.8521959834839,40.8480266761279,40.8495007347828,40.8467368774828,40.8351286896774,40.8310750337325,40.8253630698347,40.8185455601604,40.8155974499919,40.8008618712604,40.7949069300726,40.7952750424031,40.8007041696925,40.8007967166603,40.8209409010113,40.8268371249189,40.8529,40.8568,40.8654,40.8665,40.870099,40.856999,40.863899,40.878199,40.892599,40.898198,40.899397,40.897898,40.902798,40.907298,40.915398,40.915798,40.908698,40.914298,40.912821,40.918166,40.9228008294401,40.923476,40.942097,40.946397,40.942297,40.937697,40.934897,40.9297970000001,40.921506,40.920235,40.925097,40.942197,40.953997,40.955197,40.955297,40.937597,40.931697,40.926697,40.925297,40.927297,40.929597,40.924497,40.9073753960172,40.905121,40.928898,40.935074,40.955842,40.966178,40.971938,40.973058,40.962185,40.964498,40.966498,40.966146,40.962466,40.962962,40.969794,40.965314,40.9753342961639,40.9855956683622,40.989776224951,40.9874959200181,40.9905363241404,40.997587,41.009508,41.015444,41.019844,41.037652,41.052212,41.067012,41.086116,41.087955,41.096307,41.133635,41.138018,41.1406635959796,41.155874,41.158722,41.15501,41.154146,41.161217,41.15949,41.156434,41.137138,41.128482,41.112274,41.132059,41.1378400900725,41.1385459688291,41.1371342158756,41.132162,41.120274,41.106917,41.088659,41.081042,41.080402,41.076722,41.067874,41.051533,41.042065,41.04477,41.044355,41.040611,41.032275,41.032579,41.035619,41.038435,41.046147,41.053187,41.053827,41.051859,41.039684,41.031284,41.023908,40.999796,40.994084,40.991509,40.991349,40.996453,41.003429,41.0064372145911,41.009093,41.0094424996094,41.004789,41.0048931032396,41.0052362383566,41.0064372145911,41.0096970081775,41.0157414286133,41.0205057876383,41.0225646116397,41.0207590289004,41.0283479229739,41.039669,41.0477718785435,41.0542766478935,41.0598779764725,41.064021,41.071237,41.077413,41.080517,41.080837,41.077381,41.075701,41.075046,41.076918,41.073558,41.070598,41.052278,41.040166,41.034182,40.999909,40.972085,40.86666,40.84274,40.813251,40.767091,40.763571,40.764371,40.761587,40.732962,40.713282,40.679651,40.666371,40.645491035999,40.630884,40.6251,40.621476,40.620756,40.622532,40.635795,40.6305,40.617501,40.6098686058614,40.603501,40.5973942299339,40.583703,40.586703,40.587703,40.582804,40.584404,40.5863570925258,40.59056,40.590759,40.584619,40.577201,40.560888,40.545175,40.555281,40.5602664995002,40.5649136603321,40.566161483009,40.5687158809702,40.5733630458955,40.57035,40.570623,40.572846,40.574528,40.578169,40.583616,40.5838141309056,40.5906842932593,40.600789,40.604421,40.6129343866448,40.6248474461405,40.6370740124778,40.6407763925235,40.6464790597679,40.6590191329468,40.6812665482514,40.6823601303064,40.6870072870448,40.693504314444,40.6954566644213,40.7017937261078,40.7069848899218,40.709436,40.7289299649779,40.756601,40.763601,40.7983436846727,40.8181805224737,40.82899218604,40.858399,40.8592948849972,40.874699,40.8820749648427,40.882078,40.913478,40.9135125794435,40.917577,40.997197,40.997297,41.001297,41.059086,41.059088,41.081896,41.083796,41.1338279555562,41.142883,41.203811336412,41.215594,41.248225,41.357423,41.361558,41.367324,41.426518,41.4268039178667,41.430451,41.440338,41.448853,41.475605,41.483371,41.506299,41.569688,41.6068932435363,41.618552,41.632011,41.752538,41.811991,41.843583,41.852078,41.850899,41.885109,41.938917,41.953897,41.993262,41.9994450000001,41.999363,41.999353,41.999407,41.9992585325396,41.999244,41.9992148040314,41.999035,41.999035,41.998858,41.998954,41.998954,41.9989130371419,41.998346,41.99841,41.998934,41.999025,41.9991050870808,42.0001489061203,42.000155,42.001673,42.001773,42.001774,42.001674,42.001674,42.001674,42.001574,42.001274,42.0012735436595,42.000819,42.000848,41.999395,42.00007,41.9995186246449,41.998782,41.998547,41.998524,41.999392,41.999415,42.000452,41.999989041579,41.999415,41.999877,41.997559,41.9979609272083,41.999259,41.998527,41.998666,41.9989893460903,41.999068,41.999003,41.999067,42.131246,42.150712,42.162675,42.173319,42.179693,42.183627,42.243054,42.251354]}]],[[{"lng":[-80.51979,-80.5197311598262,-80.519091,-80.5190000592316,-80.518989,-80.518927,-80.51896,-80.518928,-80.51896,-80.518999,-80.5190879999999,-80.519092,-80.519125,-80.519192,-80.518992,-80.519056,-80.519012,-80.519012,-80.519012,-80.519167,-80.5191668077946,-80.519115,-80.519144,-80.51883,-80.518893,-80.518893,-80.518693,-80.518893,-80.518993,-80.518996,-80.518794,-80.5191289999999,-80.519265,-80.5192650816021,-80.519281,-80.519281,-80.519281,-80.519311,-80.519293,-80.519293,-80.519345,-80.519345,-80.519249,-80.519217,-80.519249,-80.5190249999999,-80.518993,-80.518993,-80.519169,-80.5192086375407,-80.519225,-80.519157,-80.519339,-80.519357,-80.519424,-80.519373,-80.519408,-80.519369,-80.519239,-80.519293557418,-80.519345,-80.519304,-80.519405,-80.519425,-80.435451,-80.409776,-80.373066,-80.371869,-80.363251,-80.349169,-80.329976,-80.296758,-80.230486,-80.188085,-80.165884,-80.154084,-80.136213,-80.13043,-80.117368,-80.088512,-80.077388,-80.073381,-80.080028,-80.071981,-80.078781,-80.076281,-80.07198,-80.06108,-80.0328021726724,-79.989186,-79.931324,-79.923924,-79.90105,-79.886187,-79.867979,-79.844661,-79.798447,-79.7619509999999,-79.761964,-79.762152,-79.761833,-79.761929,-79.761921,-79.761759,-79.761861,-79.762122,-79.761374,-79.625287,-79.625301,-79.6108388547624,-79.551385,-79.538445,-79.061265,-78.9188541976,-78.874759,-78.59665,-78.308128,-78.2066062280565,-78.12473,-78.031177,-78.030963,-77.8320299999999,-77.822799,-77.749931,-77.6100277930756,-77.505308,-77.124693,-77.007635,-77.007536,-76.9657279732942,-76.965686,-76.942585,-76.937084,-76.927084,-76.921884,-76.920784,-76.835079,-76.815878,-76.558118,-76.5576241368897,-76.4730304554762,-76.46654,-76.462155,-76.349898,-76.343722,-76.1455192032297,-76.131201,-76.1236959999999,-76.10584,-75.983082,-75.98025,-75.5530975635093,-75.4837379999999,-75.4831501008195,-75.477144,-75.436216,-75.431961,-75.359579,-75.341868,-75.292589,-75.279094,-75.263005,-75.146446,-75.1402409999999,-75.114399,-75.090799,-75.053431,-75.048199,-75.053077,-75.0500737917565,-75.04049,-74.984226,-74.93976,-74.912517,-74.891948,-74.876721,-74.799165,-74.7559499049941,-74.752562,-74.691129,-74.689767,-74.694914,-74.76173,-74.795847,-74.830057,-74.838366,-74.861678,-74.867267,-74.864356,-74.867287,-74.882139,-74.923169,-74.9743378756495,-74.969434,-74.9673892747684,-74.966759,-74.968389,-74.9806737558717,-75.026003,-75.036982,-75.051794,-75.069277,-75.091377,-75.109114,-75.130575,-75.135526,-75.131364,-75.1205635272738,-75.120435,-75.120316,-75.119893,-75.117764,-75.052538,-75.051029,-75.053294,-75.108505,-75.1103104918433,-75.1344,-75.149378,-75.16365,-75.171587,-75.196533,-75.20392,-75.2031992773883,-75.200708,-75.196803,-75.1908580424281,-75.190161,-75.147368,-75.135389,-75.117292,-75.100325,-75.068615,-75.06509,-75.065853,-75.070568,-75.061489,-75.058848,-75.035548,-75.024775,-74.9379541015393,-74.860492,-74.770706,-74.7515110721904,-74.722304,-74.721604,-74.7241792845134,-74.724304,-74.740605,-74.838008,-74.9742901391704,-74.974713,-75.0560387328738,-75.072017,-75.13322,-75.1539249233092,-75.184952,-75.210425,-75.2109723448918,-75.235026,-75.271159,-75.3065,-75.374635,-75.3901692321945,-75.415041,-75.428038,-75.45374,-75.498843,-75.539346,-75.579849,-75.593666,-75.5948458381425,-75.595756,-75.634706,-75.641518,-75.662822,-75.685991,-75.716969,-75.739705,-75.788359,-75.799563,-75.810068,-75.812080019025,-76.013067,-76.027618,-76.1355844994615,-76.2332587690425,-76.233277,-76.2398049997953,-76.380083,-76.3805829999999,-76.395583,-76.418684,-76.418784,-76.4918869999999,-76.517087,-76.569389,-76.569475004168,-76.711894,-76.715594,-76.7870960084368,-76.787097,-76.806397,-76.809197,-76.8901,-76.897566,-76.9994649631294,-77.047104,-77.058204,-77.058904,-77.216806,-77.217024,-77.239807,-77.243307,-77.4594270595719,-77.469145,-77.533371,-77.534758,-77.672249,-77.674522,-77.724115,-77.732615,-77.743204,-77.768534,-78.0737359999999,-78.075771,-78.0991400639512,-78.202895,-78.20445,-78.240334,-78.2431029999999,-78.268948,-78.26902,-78.330715,-78.337111,-78.339539,-78.340498,-78.34252,-78.3428338892975,-78.3805990179343,-78.8083870742602,-78.9311749995992,-78.931176,-79.228209753027,-79.3924582594505,-79.4766619999999,-79.608223,-79.610623,-79.763774,-79.852904,-79.853131,-79.916265874341,-80.0417024317511,-80.308651,-80.309457,-80.421388,-80.519342,-80.519248,-80.519115,-80.519175,-80.519203,-80.5192168880039,-80.519218,-80.519207,-80.51912,-80.519008,-80.51896,-80.519104,-80.519056,-80.519056,-80.517991,-80.5179979285125,-80.5186918816293,-80.519054,-80.519057,-80.519055,-80.519086,-80.519086,-80.519039,-80.518991,-80.519058,-80.518992,-80.519081,-80.51902,-80.5190389206506,-80.519764,-80.5197774232307,-80.51979],"lat":[40.900761,40.902469806193,40.921061,40.9873800011642,40.995445,41.015387,41.061546,41.070954,41.071866,41.075014,41.082074,41.090658,41.100819,41.105358,41.115958,41.125057,41.125057,41.1250929473469,41.125116,41.133343,41.1333880093236,41.14552,41.171203,41.209213,41.219356,41.232556,41.248855,41.265155,41.268155,41.2683,41.305509,41.312408,41.333495,41.3335075616322,41.335958,41.337145,41.337174,41.339052,41.339054,41.339654,41.340145,41.34074,41.36103,41.372006,41.378918,41.416438,41.416437,41.435454,41.462581,41.4890128693366,41.499924,41.528769,41.539297,41.669767,41.671228,41.701473,41.739359,41.752487,41.765138,41.8495630308932,41.929168,41.943992,41.976158,41.977523,42.005611,42.011578,42.024102,42.023966,42.027973,42.030243,42.036168,42.049076,42.077957,42.094257,42.105857,42.114757,42.149937,42.156331,42.166341,42.173184,42.171262,42.168658,42.163625,42.155357,42.151457,42.147857,42.146057,42.144857,42.1575197586862,42.177051,42.206737,42.207546,42.216701,42.224933,42.230999,42.235486,42.255939,42.26986,42.251354,42.243054,42.183627,42.179693,42.173319,42.162675,42.150712,42.131246,41.999067,41.999003,41.999068,41.9989893460903,41.998666,41.998527,41.999259,41.9979609272083,41.997559,41.999877,41.999415,41.999989041579,42.000452,41.999415,41.999392,41.998524,41.998547,41.998782,41.9995186246449,42.00007,41.999395,42.000848,42.000819,42.0012735436595,42.001274,42.001574,42.001674,42.001674,42.001674,42.001774,42.001773,42.001673,42.000155,42.0001489061203,41.9991050870808,41.999025,41.998934,41.99841,41.998346,41.9989130371419,41.998954,41.998954,41.998858,41.999035,41.999035,41.9992148040314,41.999244,41.9992585325396,41.999407,41.999353,41.999363,41.9994450000001,41.993262,41.953897,41.938917,41.885109,41.850899,41.852078,41.843583,41.811991,41.752538,41.632011,41.618552,41.6068932435363,41.569688,41.506299,41.483371,41.475605,41.448853,41.440338,41.430451,41.4268039178667,41.426518,41.367324,41.361558,41.357423,41.336398,41.318951,41.2872,41.277286,41.241575,41.228861,41.224854,41.208754,41.180836,41.138146,41.1039119925741,41.096074,41.0940491487333,41.093425,41.087797,41.0781784118553,41.042687,41.034702,41.027142,41.019348,41.012283,41.004102,40.991093,40.973807,40.969277,40.9683134661993,40.968302,40.96263,40.961646,40.953023,40.872051,40.865662,40.8599,40.791094,40.7898857602567,40.773765,40.774786,40.778386,40.777745,40.751631,40.691498,40.6750860780622,40.618356,40.60858,40.5913421291964,40.589321,40.573152,40.575624,40.573211,40.567811,40.542223,40.526148,40.519495,40.455165,40.422848,40.418065,40.406309,40.403455,40.3406336063018,40.284584,40.214908,40.1933744810311,40.160609,40.15381,40.1473240982627,40.14701,40.13521,40.10091,40.0488724638268,40.048711,39.9917945208936,39.980612,39.922512,39.9061436158552,39.881615,39.865913,39.8657060853423,39.856613,39.84944,39.849812,39.82577,39.8165492648381,39.801786,39.809212,39.820312,39.833312,39.838211,39.838526,39.837455,39.8372862097586,39.837156,39.830164,39.828363,39.82115,39.811054,39.791998,39.772623,39.721811,39.721882,39.721906,39.7219061387606,39.72192,39.721833,39.7215558114903,39.7213050468054,39.721305,39.7213049555332,39.721304,39.721304,39.721204,39.721304,39.721204,39.721304,39.721304,39.721203,39.7212029396483,39.721103,39.721103,39.7208020041741,39.720802,39.720602,39.720702,39.720401,39.720401,39.7201277484906,39.72,39.7202,39.7201,39.719998,39.719998,39.719998,39.719998,39.7200171393884,39.720018,39.720165,39.720134,39.720778,39.720847,39.720894,39.721094,39.721205,39.721358,39.722314,39.722301,39.7223221403225,39.722416,39.72252,39.722498,39.722481,39.72259,39.722613,39.722689,39.722461,39.722552,39.722514,39.722539,39.7225391258424,39.7225542663835,39.7227257722907,39.7227749995989,39.722775,39.7218509317766,39.7213399567646,39.721078,39.721154,39.721245,39.720776,39.720713,39.720713,39.7207920017527,39.7209489626715,39.721283,39.721264,39.721189,39.721403,39.936967,39.939188,39.956648,39.959394,39.9621993767921,39.962424,39.963381,40.01641,40.077001,40.078089,40.159672,40.172744,40.172771,40.398868,40.3996439803645,40.4773654237981,40.517922,40.517922,40.590173,40.590161,40.616385,40.616391,40.638801,40.792298,40.801221,40.849157,40.850073,40.8513390814385,40.899858,40.9003241991296,40.900761]}]],[[{"lng":[-67.6197611074773,-67.6154097034179,-67.5877381102223,-67.5821125691894,-67.5892585345215,-67.5906269028376,-67.5802880682801,-67.5626512359783,-67.5691890245193,-67.5717737287392,-67.5742064005468,-67.5883462811205,-67.5927554862496,-67.6049188246627,-67.6071994522725,-67.6149535767174,-67.6192107435413,-67.6197611074773],"lat":[44.5197543579197,44.5219733508836,44.516195765653,44.5134590172355,44.5008395491755,44.4941497164367,44.4880680487033,44.4721036672203,44.4555311222049,44.4534025387929,44.4517300798716,44.4497535377109,44.4585719560716,44.5020558850793,44.5035763034858,44.5035763034858,44.5060089694006,44.5197543579197]}],[{"lng":[-68.2747191395203,-68.2621277005224,-68.2541531392995,-68.2465982986745,-68.2411420285046,-68.2363802488073,-68.214641,-68.211329,-68.212474,-68.221383,-68.231469,-68.23713,-68.24031,-68.241545,-68.240806,-68.248913,-68.266669,-68.274427,-68.276857,-68.2747191395203],"lat":[44.2586754316698,44.2607739939915,44.2578359986077,44.2578359986077,44.2603542815272,44.2662540395561,44.263156,44.257074,44.255405,44.257254,44.256016,44.25343,44.251622,44.247543,44.239723,44.235443,44.234033,44.237099,44.240794,44.2586754316698]}],[{"lng":[-68.376591,-68.375382,-68.365514,-68.358388,-68.35301,-68.346724,-68.330716,-68.331032,-68.3380119999999,-68.365176,-68.376593,-68.376591],"lat":[44.113762,44.11646,44.124079,44.125082,44.127884,44.127749,44.110598,44.10758,44.101473,44.101464,44.112207,44.113762]}],[{"lng":[-68.371235,-68.364469,-68.355279,-68.333227,-68.3242299999999,-68.31606,-68.314789,-68.318476,-68.321178,-68.332639,-68.339029,-68.347416,-68.3788719999999,-68.371235],"lat":[44.193003,44.197534,44.199096,44.207308,44.205732,44.200244,44.197157,44.196608,44.199032,44.192131,44.171839,44.169459,44.184222,44.193003]}],[{"lng":[-68.487227,-68.482726,-68.480565,-68.470323,-68.468572,-68.472831,-68.460205,-68.4538429999999,-68.454224,-68.459182,-68.4845199999999,-68.487227],"lat":[44.209517,44.227058,44.228591,44.22832,44.223999,44.219767,44.212498,44.201683,44.199534,44.197681,44.202886,44.209517]}],[{"lng":[-68.500817,-68.4955109999999,-68.474365,-68.453236,-68.437789,-68.4244409999999,-68.416434,-68.4082069999999,-68.384903,-68.3966339999999,-68.427534,-68.438518,-68.448646,-68.447505,-68.4568129999999,-68.4799339999999,-68.484696,-68.496639,-68.502096,-68.500817],"lat":[44.160026,44.162429,44.181875,44.189998,44.188216,44.190753,44.187047,44.176298,44.154955,44.14069,44.119266,44.11618,44.125581,44.133493,44.145268,44.1478,44.146495,44.146855,44.152388,44.160026]}],[{"lng":[-68.518703,-68.511266,-68.506979,-68.499465,-68.492892,-68.491521,-68.502942,-68.51706,-68.518703],"lat":[44.113222,44.125082,44.127237,44.12419,44.116921,44.109833,44.099722,44.10341,44.113222]}],[{"lng":[-68.528635,-68.5206712942998,-68.5219304398263,-68.5185727238446,-68.512696733077,-68.5076601753714,-68.5013644721394,-68.4986372126108,-68.478785,-68.489641,-68.515173,-68.5303939999999,-68.528635],"lat":[44.344605,44.3583574713557,44.3675911699715,44.3810220094977,44.3847994298102,44.385219150408,44.3822811468907,44.3696856022426,44.319563,44.313705,44.324797,44.333583,44.344605]}],[{"lng":[-68.661594,-68.627893,-68.62535,-68.6181,-68.609722,-68.602863,-68.589563,-68.585916,-68.584074,-68.588098,-68.590792,-68.601099,-68.611473,-68.610703,-68.615896,-68.6182119999999,-68.635315,-68.64736,-68.651863,-68.652881,-68.657031,-68.659972,-68.659874,-68.657369,-68.650767,-68.654783,-68.661594],"lat":[44.075837,44.088128,44.092906,44.096706,44.094674,44.08665,44.075585,44.075335,44.070578,44.06127,44.058662,44.058362,44.025176,44.013422,44.009761,44.012367,44.018886,44.0145,44.009859,44.003845,44.003823,44.016013,44.022758,44.024404,44.039908,44.059599,44.075837]}],[{"lng":[-68.7229564270866,-68.7186345652784,-68.7117916185784,-68.7006268100702,-68.6941440313164,-68.6804581309371,-68.6775768920581,-68.6775768920581,-68.6807732446664,-68.6754159611539,-68.6682128604665,-68.6588488358543,-68.6235536334128,-68.6116685169296,-68.6059060531301,-68.6127489858714,-68.6249942493627,-68.6257145712963,-68.6195919325713,-68.6185114775882,-68.6188716106377,-68.6430020045708,-68.6523660361625,-68.6700136373832,-68.6714542533331,-68.6750558001871,-68.6818987538664,-68.6865807696621,-68.6923432474204,-68.700986971037,-68.7096306946536,-68.7132322415077,-68.7164736343743,-68.720435342195,-68.7189947262452,-68.7150330184244,-68.7143127034701,-68.72115565017,-68.7229564270866,-68.7229564270866],"lat":[44.223568448901,44.2286106117049,44.2289707726717,44.2340129494343,44.2487792978173,44.2621050302503,44.2689479909089,44.2754307766421,44.279242418314,44.2797526384504,44.2765112455838,44.2685878299421,44.2556222445172,44.2448175969757,44.2307715495884,44.2077216245969,44.1976372850304,44.1947560461513,44.1893537154013,44.1864724835015,44.1810701527514,44.1576600737725,44.1536983694413,44.1515374420268,44.1385718583467,44.1371312371623,44.1382117026144,44.1472155802185,44.1536983694413,44.1583803887268,44.1587405427142,44.1605413161413,44.1627022470454,44.1691850362682,44.1832310836556,44.1911544923179,44.2037599237554,44.2124036403927,44.2196067410801,44.223568448901]}],[{"lng":[-68.8394215326337,-68.8335242056665,-68.8276268710805,-68.8256309793621,-68.7921393161741,-68.7698330485175,-68.7690467402869,-68.7800550859905,-68.7898839769671,-68.8012854691673,-68.8091485819486,-68.8154390706498,-68.8229090140781,-68.8295926492759,-68.8378489085537,-68.8394215326337],"lat":[44.2365472846937,44.2408719951996,44.2428377733949,44.2425555256826,44.2378193242118,44.2227868525641,44.2133511309404,44.2031290896579,44.2039153978885,44.2086332587003,44.212564815091,44.214137439171,44.2164963638628,44.2168895179781,44.2271115554512,44.2365472846937]}],[{"lng":[-68.908222,-68.902618,-68.889367,-68.880242,-68.8825537071615,-68.876224,-68.886725,-68.898319,-68.899108,-68.8935372258191,-68.8947000050428,-68.8980447832341,-68.903957,-68.908222],"lat":[43.849852,43.868855,43.87553,43.863398,43.8485247795538,43.836597,43.822195,43.820987,43.821925,43.8314979337708,43.8439699160095,43.8495445445257,43.848684,43.849852]}],[{"lng":[-68.944597,-68.9353269999999,-68.917286,-68.888597,-68.8786799999999,-68.847249,-68.825067,-68.819156,-68.822206,-68.82284,-68.818423,-68.792221,-68.786886,-68.782375,-68.780693,-68.792065,-68.802162,-68.818039,-68.819659,-68.820515,-68.81953,-68.8155619999999,-68.806832,-68.790525,-68.781772,-68.772639,-68.77029,-68.77965,-68.785601,-68.790595,-68.807315,-68.818441,-68.828465,-68.862845,-68.8741389999999,-68.8897169999999,-68.899997,-68.905098,-68.913406,-68.907812,-68.908984,-68.943105,-68.944597],"lat":[44.11284,44.13038,44.148239,44.15955,44.166612,44.183017,44.186338,44.180462,44.178815,44.173693,44.160978,44.145998,44.143961,44.14531,44.143274,44.136759,44.137857,44.136852,44.135434,44.130198,44.122056,44.115836,44.116339,44.09292,44.084274,44.078439,44.069566,44.057754,44.053503,44.053832,44.035796,44.032046,44.032118,44.025037,44.025359,44.032516,44.06696,44.077344,44.08519,44.105518,44.110001,44.10973,44.11284]}],[{"lng":[-68.967074,-68.965264,-68.9536859999999,-68.942826,-68.919301,-68.9193249999999,-68.911634,-68.90353,-68.87894,-68.868444,-68.8606489999999,-68.864338,-68.87169,-68.883065,-68.888706,-68.89285,-68.8965869999999,-68.88746,-68.899445,-68.9042549999999,-68.9168719999999,-68.92648,-68.945976,-68.95189,-68.9470899999999,-68.955332,-68.959468,-68.965896,-68.967074],"lat":[44.251968,44.259332,44.272346,44.281073,44.309872,44.335392,44.365027,44.378613,44.386584,44.38144,44.364425,44.355002,44.344662,44.338193,44.338196,44.334653,44.321986,44.303094,44.283775,44.279889,44.242866,44.233035,44.220824,44.218719,44.226792,44.243873,44.247439,44.249754,44.251968]}],[{"lng":[-69.0929943845962,-69.0619664852728,-69.0475826953674,-69.0439812172673,-69.0781996264207,-69.0929943845962],"lat":[43.9790632750346,44.0150227497979,44.0139953430595,44.0056842253008,43.9741316896398,43.9790632750346]}],[{"lng":[-69.323569,-69.321141,-69.313631,-69.307908,-69.306751,-69.3029949999999,-69.3003759999999,-69.300818,-69.314325,-69.322559,-69.323569],"lat":[43.758994,43.765763,43.772762,43.773767,43.775095,43.774591,43.772144,43.768599,43.756707,43.755883,43.758994]}],[{"lng":[-69.441894,-69.433762,-69.429806,-69.421072,-69.42792,-69.423323,-69.422153,-69.423324,-69.438066,-69.440913,-69.441894],"lat":[43.916331,43.949353,43.948438,43.938261,43.928798,43.922871,43.917702,43.915507,43.909539,43.909767,43.916331]}],[{"lng":[-70.118174,-70.115961,-70.1006829999999,-70.095727,-70.093113,-70.092137,-70.097184,-70.091929,-70.0876209999999,-70.093704,-70.099594,-70.115908,-70.118291,-70.118174],"lat":[43.686375,43.689202,43.705962,43.709278,43.710524,43.709468,43.700929,43.698111,43.699913,43.6918,43.695366,43.682978,43.683343,43.686375]}],[{"lng":[-70.1387109918638,-70.127051110421,-70.1196706342434,-70.1130592843229,-70.0973184488941,-70.0949864816438,-70.1002334192549,-70.1078123241165,-70.109561310852,-70.108978330337,-70.1241361400603,-70.1293831002667,-70.1381280113488,-70.1387109918638],"lat":[43.7275589741418,43.7427168177579,43.7486211758162,43.7491297502919,43.7572916582638,43.7532106929802,43.7421338146476,43.734554909786,43.7304739445025,43.7223120365306,43.708320199135,43.708320199135,43.7182310938423,43.7275589741418]}],[{"lng":[-70.171339,-70.163884,-70.156787,-70.146115,-70.135563,-70.154503,-70.168227,-70.170284,-70.173571,-70.171339],"lat":[43.687546,43.692404,43.694706,43.701635,43.700658,43.680933,43.675136,43.675441,43.683734,43.687546]}],[{"lng":[-70.211062,-70.200116,-70.188047,-70.1846589999999,-70.1712445546843,-70.171136,-70.190323,-70.205934,-70.207165,-70.211062],"lat":[43.641842,43.662978,43.673762,43.674699,43.6634982883662,43.6633,43.642986,43.633633,43.63369,43.641842]}],[{"lng":[-70.213948,-70.209627,-70.201893,-70.196535,-70.191041,-70.186213,-70.1875359999999,-70.192574,-70.207341,-70.210825,-70.21313,-70.213948],"lat":[43.666161,43.676308,43.685483,43.688784,43.689071,43.682655,43.678669,43.673139,43.662562,43.661695,43.662973,43.666161]}],[{"lng":[-71.084334,-71.030565,-71.0142679999999,-71.00905,-71.002401,-71.0050869999999,-70.9902329999999,-70.9508239999999,-70.917904,-70.912176,-70.913732,-70.907978,-70.8968979999999,-70.8850289999999,-70.8570419999999,-70.842845,-70.839482,-70.8316116728153,-70.808322,-70.807664,-70.8240529999999,-70.825612,-70.7984829999999,-70.781471,-70.753977,-70.7440769999999,-70.743775,-70.7299719999999,-70.7122859999999,-70.6600289999999,-70.651986,-70.6346609999999,-70.626527,-70.635498,-70.6501609999999,-70.6637010000001,-70.6759099999999,-70.716332,-70.723167,-70.7216109999999,-70.7007759999999,-70.6865309999999,-70.688214,-70.6592859999999,-70.5647889999999,-70.551037946589,-70.4698689999999,-70.4515029999999,-70.39721,-70.40775,-70.417674,-70.396362,-70.398159,-70.397208,-70.387916,-70.36702,-70.34244,-70.3077979999999,-70.2842039999999,-70.2626549999999,-70.2537039999999,-70.2401769999999,-70.252242,-70.2654099999999,-70.3120549999999,-70.313364,-70.3106089999999,-70.2897799999999,-70.284554,-70.2524110000001,-70.237947,-70.2780339999999,-70.2908959999999,-70.2927359999999,-70.207415,-70.188046,-70.1747089999999,-70.133367,-70.056433,-70.0230159227951,-69.997086,-69.8185519999999,-69.5663829999999,-69.22442,-69.1464389999999,-69.0554649999999,-69.042702,-69.032909,-69.031127,-69.04079,-69.0417329999999,-69.03928,-69.043958,-69.0464479999999,-69.053819,-69.050334,-69.0402,-69.033456,-68.9820019999999,-68.9419479999999,-68.926421,-68.9009849999999,-68.85343,-68.723168,-68.5803979999999,-68.4748509999999,-68.3615590000001,-68.33368,-68.284101,-68.2401679999999,-68.2240049999999,-68.153509,-67.9556689999999,-67.952269,-67.9493689999999,-67.9358679999999,-67.889155,-67.8468649999999,-67.816345,-67.7905149999999,-67.7894609999999,-67.7893800000001,-67.789284,-67.782114,-67.7810950000001,-67.7687089999999,-67.763955,-67.7637669999999,-67.7804429999999,-67.8019889999999,-67.806598,-67.817892,-67.8054831422691,-67.8033129999999,-67.754245,-67.64581,-67.5613589999999,-67.51858,-67.499444,-67.4909229999999,-67.4884519999999,-67.4910609999999,-67.489793,-67.476704,-67.4554059999999,-67.449674,-67.4254519999999,-67.423646,-67.4208749999999,-67.425674,-67.4487289999999,-67.463481,-67.5037709999999,-67.4733659999999,-67.4602809999999,-67.4300009999999,-67.422153,-67.4291609999999,-67.4601009999999,-67.465833,-67.4856829999999,-67.489333,-67.4635699999999,-67.4052079999999,-67.354306,-67.345004,-67.3398689999999,-67.3054719999999,-67.302568,-67.2906029999999,-67.2836189999999,-67.2710759999999,-67.1612469999999,-67.128935,-67.1124139999999,-67.090786,-67.105899,-67.117688,-67.099749,-67.0820739999999,-67.0749139999999,-67.072753,-67.068274,-67.05461,-67.038299,-67.033474,-67.002118,-66.990937,-66.9844659999999,-66.983558,-66.9859009999999,-66.9892349999999,-66.990351,-66.981008,-66.978142,-66.99296,-66.9965229999999,-66.9863179999999,-66.975009,-66.966468,-66.9521120000001,-66.949895,-66.9505689999999,-66.9610679999999,-66.9700259999999,-66.97626,-66.979708,-66.9893510000001,-66.995154,-67.0199499999999,-67.02615,-67.04335,-67.0551600900718,-67.0622394364386,-67.063308,-67.0734389999999,-67.0834769999999,-67.0925424806402,-67.0989311554983,-67.103957,-67.1287919999999,-67.1392089999999,-67.148061,-67.1551189999999,-67.154479,-67.1698569999999,-67.1817847992914,-67.186611512965,-67.1920677831349,-67.1914382185053,-67.1894269999999,-67.213025,-67.234275,-67.2472601389314,-67.2512474195429,-67.2741218159503,-67.2770598113342,-67.2730759999999,-67.2791599999999,-67.293403,-67.3024269999999,-67.314938,-67.3229699999999,-67.322491,-67.3107449999999,-67.293665,-67.2924619999999,-67.298449,-67.3096269999999,-67.3079087471058,-67.3001440461819,-67.2991760585382,-67.308538319869,-67.3477815532199,-67.3559659666083,-67.3767417945939,-67.3811487876697,-67.3790502212813,-67.3740136554424,-67.3672982397459,-67.3631579999999,-67.3682690000001,-67.377554,-67.386605065973,-67.3887036282947,-67.395838764589,-67.3989866121382,-67.4054921756691,-67.4118149999999,-67.4189230111286,-67.4206018691194,-67.4283665700432,-67.4436861217591,-67.4474635441049,-67.4485128293324,-67.457746532015,-67.4923729018245,-67.4936320392174,-67.5058037332172,-67.5228021408905,-67.5240612782833,-67.5307767021132,-67.5339245577959,-67.540220261028,-67.5433681167108,-67.5511328176346,-67.5523919631611,-67.5750564972363,-67.569836,-67.5623209999999,-67.5681589999999,-67.6485063655652,-67.6531232108065,-67.6569006392523,-67.6606780595649,-67.6858608806264,-67.6963537247687,-67.7026494361343,-67.6988720076882,-67.7034888610629,-67.7141898437454,-67.7228759999999,-67.7339859999999,-67.7433529999999,-67.7427889999999,-67.7400759999999,-67.7429419425124,-67.7538544828521,-67.7588910649582,-67.7672853305119,-67.7740007462082,-67.7794570245114,-67.7819753074309,-67.7815555949667,-67.7972599999999,-67.8025412751178,-67.8054792705017,-67.8054792705017,-67.8088369783499,-67.8298226747679,-67.8398957983125,-67.8445126476204,-67.8457717890802,-67.8432535061606,-67.85668434162,-67.8537463462362,-67.8512280673834,-67.8516477798478,-67.8555789999999,-67.8609939999999,-67.8668009999999,-67.8687739999999,-67.868875,-67.8517639999999,-67.8516969999999,-67.8551079999999,-67.8688560356197,-67.8785094466999,-67.8873234328514,-67.8873234328514,-67.892033,-67.899571,-67.9116668289843,-67.9133456788416,-67.9213202400645,-67.9263568059034,-67.9305539386803,-67.9276159432964,-67.9314529999999,-67.9365310000001,-67.947342494188,-67.9557367678752,-67.9570892771903,-67.9616127586429,-67.9616127586429,-67.978876,-67.985668,-67.9972883892796,-68.000646105261,-68.0061023754309,-68.0107192369391,-68.0195332230905,-68.01399,-68.0342232162767,-68.0396794864465,-68.0442963479547,-68.0447160522855,-68.0430372024282,-68.0493339999999,-68.0603559999999,-68.0670469999999,-68.076066,-68.0778734264363,-68.0862677082571,-68.0900451285696,-68.0929831239533,-68.103818,-68.1122899542473,-68.1127096667115,-68.1164870870241,-68.1198447948723,-68.1194250824079,-68.115227949631,-68.1177462325506,-68.1232025189873,-68.150903604668,-68.1592978702216,-68.1626555862034,-68.1630752905343,-68.171049851757,-68.1945538310946,-68.1895172652556,-68.1899369858535,-68.1920355563087,-68.213860669522,-68.2239337849331,-68.2272915009146,-68.2243535055308,-68.2293900632363,-68.2444997607533,-68.2524743138426,-68.261708020592,-68.2680037238241,-68.2705220148771,-68.2810148508859,-68.2982231107246,-68.2990625397199,-68.2948654028763,-68.2684234362883,-68.2474377561372,-68.2444997607533,-68.2436603276911,-68.2499560309231,-68.2499560309231,-68.2155395193793,-68.2096635286116,-68.2035399999999,-68.1969369999999,-68.184532,-68.1746869999999,-68.1736079999999,-68.1919239999999,-68.233435,-68.2751388438512,-68.2894091164395,-68.2982231025911,-68.2986428069218,-68.2976405400773,-68.2952654378344,-68.2908184389738,-68.3175879999999,-68.3394979999999,-68.3431324582772,-68.3653639999999,-68.369759,-68.377982,-68.3898479999999,-68.401268,-68.41965,-68.421302,-68.4261069999999,-68.4309459999999,-68.4308525585269,-68.4119654406975,-68.4090274453135,-68.4098668702422,-68.4216188680446,-68.4214705950715,-68.4098668702422,-68.4060894499298,-68.3965517338505,-68.3955164799732,-68.398035,-68.3675647800505,-68.3637195718348,-68.3603180430334,-68.3580996516941,-68.3590815237884,-68.3724452364114,-68.3791004046974,-68.3876781799572,-68.3909318137098,-68.3925586305861,-68.4164119999999,-68.4217829999999,-68.427874,-68.4339009999999,-68.4325560066032,-68.429647686447,-68.4392814982853,-68.4480064657986,-68.4550954966195,-68.4600032926072,-68.4638204641329,-68.4588489999999,-68.4641059999999,-68.4642619999999,-68.4610719535608,-68.4610719535608,-68.4661085193999,-68.478280221533,-68.4833167873721,-68.480798496319,-68.4728239350962,-68.4803787919883,-68.4854153496938,-68.4946490483095,-68.4996856141486,-68.5055616049162,-68.5145203063908,-68.5299050091825,-68.5345218544237,-68.5550878221106,-68.5609638128783,-68.5651609497218,-68.5664200911816,-68.5647412372575,-68.5592849589541,-68.5500512562715,-68.5454344110304,-68.553873,-68.563209,-68.5669359999999,-68.566203,-68.5640049999999,-68.556236,-68.538595,-68.5315319999999,-68.5322659999999,-68.5286109999999,-68.519516,-68.5198189999999,-68.529802,-68.5281529999999,-68.5234799999999,-68.5253019841836,-68.5345953402721,-68.5508023185637,-68.5511624655719,-68.5626874350469,-68.5727717746134,-68.6033849542797,-68.615630217771,-68.6260747183045,-68.627515348213,-68.6300364191459,-68.682979222808,-68.7256569999999,-68.7330039999999,-68.746164,-68.7620209999999,-68.766197,-68.771489,-68.795063,-68.8271969999999,-68.8283769999999,-68.825419,-68.821311,-68.8176469999999,-68.814811,-68.8187029999999,-68.821767,-68.8153249999999,-68.8016339999999,-68.785898,-68.7836789999999,-68.7962061925,-68.810059,-68.8291529999999,-68.8589929999999,-68.880271,-68.886491,-68.8908259999999,-68.8928,-68.892073,-68.897104,-68.900934,-68.9274519999999,-68.9319339999999,-68.946582,-68.982449,-68.990767,-68.984404,-68.9788149999999,-68.9672999999999,-68.961111,-68.948164,-68.954465,-68.9588889999999,-68.9790049999999,-69.003682,-69.005071,-69.017051,-69.0285900682592,-69.029434,-69.0401929999999,-69.0435989999999,-69.0428069999999,-69.0518099999999,-69.0545459999999,-69.06124,-69.077776,-69.0798349999999,-69.080978,-69.079608,-69.0756669999999,-69.080331,-69.100863,-69.1011069999999,-69.0919999999999,-69.0890779999999,-69.076452,-69.0563029999999,-69.0508139999999,-69.043403,-69.031878,-69.048917,-69.0505659999999,-69.0506220118858,-69.0560926447641,-69.0642985777722,-69.0678755181202,-69.079805,-69.0737669588756,-69.0811312679748,-69.0941765975814,-69.1131133679432,-69.1257378896727,-69.1280523819251,-69.1244754415771,-69.1488828366627,-69.1625593984717,-69.1703445174866,-69.1938050826165,-69.1978028389964,-69.1938050826165,-69.196329982885,-69.2036679999999,-69.2142049999999,-69.2373679999999,-69.24271,-69.2598383961039,-69.2652572937079,-69.2675151585942,-69.2804979188809,-69.2839976203929,-69.2885133632916,-69.3077759999999,-69.3142699999999,-69.3197508246944,-69.3051759785396,-69.3043014964696,-69.3314106891908,-69.351961209898,-69.366702,-69.3754779843001,-69.388059,-69.3984549999999,-69.416165,-69.4287599999999,-69.4316855732866,-69.4364952698627,-69.4415964623452,-69.4510701047198,-69.4596369999999,-69.4834979999999,-69.4862430000001,-69.5032899999999,-69.514889,-69.516212,-69.513267,-69.5203005914739,-69.5246730413662,-69.5439118220218,-69.5494502668369,-69.5509077520172,-69.5506162504622,-69.5450279999999,-69.552606,-69.5581223025302,-69.5683246818463,-69.5726971317386,-69.5754663555582,-69.5785270668111,-69.5885509999999,-69.6041787898862,-69.6059277709728,-69.6046160309212,-69.5984945999423,-69.5923731746122,-69.5891667026964,-69.5947051418627,-69.6046160309212,-69.613215185577,-69.6130694404483,-69.6151099117923,-69.6210856032914,-69.6302677497597,-69.6296847522982,-69.6349316899094,-69.6497980263217,-69.6531502377173,-69.6508182648181,-69.6533369999999,-69.6649219999999,-69.685473,-69.6855792632094,-69.6924294367785,-69.6972391333546,-69.6978577185602,-69.7058382823615,-69.714873,-69.7178039999999,-69.7170739999999,-69.719723,-69.7528009999999,-69.7615870439072,-69.7800970876214,-69.7824290605207,-69.7822833097431,-69.7784938573124,-69.7783481065347,-69.835323,-69.8386889999999,-69.8512969999999,-69.855081,-69.8579267247946,-69.8555947462467,-69.8589469632911,-69.8686729999999,-69.862155,-69.8697323485419,-69.8840659999999,-69.8873902869984,-69.9031639999999,-69.9155929999999,-69.9270114551224,-69.948539,-69.953246161537,-69.9580558581131,-69.9825739999999,-69.9891309999999,-69.9944789999999,-69.992396,-69.9926149999999,-70.0016450000001,-70.0069544580934,-70.0052054939533,-70.0011245399672,-69.9987925727168,-70.0017075204823,-70.0413510767163,-70.0407680962014,-70.034355174965,-70.0256102638829,-70.0052054939533,-69.9982095696066,-69.9993755532319,-70.0028735041075,-70.0110354346746,-70.0261932443979,-70.0261932443979,-70.0232782740372,-70.0069544580934,-70.0028735041075,-70.0028735041075,-70.0098694284542,-70.0191973200511,-70.0228452108606,-70.0320231851192,-70.0535939612695,-70.0530109581592,-70.0646708170067,-70.0664198037422,-70.0809946329504,-70.1072293436015,-70.1427919458497,-70.1538688241822,-70.1538688241822,-70.1760225695498,-70.1777715449875,-70.1725246073765,-70.1754395777371,-70.1900144182431,-70.1946783640415,-70.1975933344023,-70.1940953609313,-70.1946783640415,-70.217998104332,-70.2191640879571,-70.2156661370815,-70.216832109409,-70.2279089877417,-70.2319899530252,-70.2518117198447,-70.2541436983927,-70.2529610352397,-70.2473211363642,-70.2422886127659,-70.2395120453548,-70.2401194189505,-70.2419415431005,-70.2409870964767,-70.2229895342863,-70.211204,-70.2170869999999,-70.214369,-70.2011199999999,-70.1969109999999,-70.2061229999999,-70.216782,-70.219784,-70.2319629999999,-70.244331,-70.2619169999999,-70.2724966038161,-70.2991839999999,-70.3077639999999,-70.3417930000001,-70.3528261501838,-70.3533919932721,-70.3612139999999,-70.3791229999999,-70.3848849999999,-70.3856149999999,-70.382928,-70.3802329999999,-70.3722299999999,-70.349684,-70.362015,-70.370514,-70.3849489999999,-70.3839809999999,-70.39089,-70.4000353092043,-70.4016664790428,-70.406416,-70.421282,-70.4276723776486,-70.4244210000001,-70.424986,-70.44243751269,-70.4607174461534,-70.465975,-70.472933,-70.4853119999999,-70.5176949999999,-70.535244,-70.5367023241992,-70.553854,-70.5627789999999,-70.585184,-70.5939069999999,-70.5910215109857,-70.5839640412673,-70.5757869999999,-70.5766919999999,-70.5878139999999,-70.6189729999999,-70.6344549999999,-70.634311,-70.6383549999999,-70.6553219999999,-70.656223,-70.6659579999999,-70.6731140000001,-70.7039355803705,-70.7563969999999,-70.819549285713,-70.8281,-70.8338,-70.8291742928513,-70.8283009999999,-70.816232,-70.817773,-70.817865,-70.822959,-70.823309,-70.825071,-70.826711,-70.828022,-70.83365,-70.839717,-70.839213,-70.863231,-70.86323,-70.9098049999999,-70.91246,-70.916750867889,-70.930783,-70.952356,-70.967229,-70.984335,-70.984305,-70.987733,-70.986812,-70.964433,-70.964542,-70.9637421426714,-70.9547549999999,-70.962556,-70.9589580869365,-70.955337,-70.955346,-70.953322,-70.972716,-70.981946,-70.981978,-70.982238,-70.982083,-70.9890409760162,-70.989067,-70.9929859999999,-71.001367,-71.001335,-71.008764,-71.008736,-71.0102394134267,-71.0134901182201,-71.0192570661535,-71.037518,-71.060101,-71.07564,-71.084334],"lat":[45.305293,45.3126520000001,45.3167610000001,45.3190220000001,45.327956,45.3315450000002,45.336277,45.33453,45.3119239999999,45.296768,45.2927460000001,45.2693160000001,45.2420310000001,45.2348730000001,45.22916,45.2344220000001,45.237829,45.2600545918043,45.325824,45.378118,45.391094,45.4003050000001,45.4247400000002,45.4311590000002,45.427789,45.421091,45.4119250000002,45.3993590000001,45.390611,45.3779010000002,45.377146,45.383608,45.407011,45.427817,45.443685,45.447049,45.4525820000001,45.4869090000001,45.5076060000001,45.5150580000001,45.532777,45.5499899999999,45.5639810000001,45.5868800000001,45.6551500000002,45.6618848580071,45.7016389999999,45.7044320000001,45.7568720000001,45.7736540000001,45.7945700000001,45.802703,45.80412,45.807572,45.819043,45.8349930000001,45.8521920000001,45.8589400000001,45.8720340000001,45.8878530000001,45.9029810000001,45.943729,45.954777,45.9626920000002,45.971544,46.0163830000001,46.064544,46.0943250000001,46.0987129999999,46.1062210000001,46.147378,46.1750010000001,46.185838,46.1915990000001,46.331316,46.3500150000002,46.358472,46.368906,46.4165900000001,46.5734864630461,46.6952300000001,46.87503,47.1250320000001,47.459686,47.4488600000001,47.4322740000002,47.4266509999999,47.407907,47.4031060000002,47.3980800000001,47.3973260000001,47.3850520000001,47.3836820000001,47.3839340000001,47.375036,47.256621,47.2450999999999,47.2409840000001,47.2202950000001,47.206248,47.19786,47.178519,47.1934430000001,47.2395690000001,47.286957,47.2975340000002,47.3556050000001,47.36007,47.3603890000001,47.354217,47.3484560000001,47.314038,47.1995420000001,47.1961420000001,47.182542,47.164843,47.1187720000001,47.092404,47.0811880000001,47.067921,47.0625440000001,46.7655280000001,46.758219,46.2793810000001,45.9430320000001,45.901997,45.8299830000001,45.8203150000001,45.8162059999999,45.8035460000002,45.794723,45.693705,45.6802407212124,45.677886,45.6677910000001,45.613597,45.594906,45.587925,45.587014,45.591488,45.5946430000001,45.598917,45.6011800000001,45.604157,45.6046650000001,45.6028600000001,45.579086,45.572153,45.55056,45.5029170000001,45.510576,45.5085160000001,45.4885220000001,45.4253280000001,45.419594,45.3929650000001,45.3796610000001,45.3442470000001,45.3011790000002,45.297223,45.291433,45.281282,45.2440970000001,45.165686,45.1298860000001,45.1262100000001,45.1255940000001,45.1448259999999,45.161348,45.187589,45.1920220000002,45.1910810000001,45.1628790000001,45.1321679999999,45.112323,45.068721,45.065786,45.05673,45.04501,45.029608,45.019254,45.008329,45.001014,44.986764,44.945433,44.939923,44.918836,44.917835,44.912557,44.903277,44.89715,44.89648,44.882551,44.862813,44.856963,44.849181,44.844654,44.820657,44.8154950000001,44.8190630000001,44.8200700000001,44.8174190000001,44.814539,44.807269,44.805713,44.8083150000001,44.8073600000001,44.79878,44.791073,44.771427,44.7681989999999,44.7650710000001,44.7714418380862,44.7695425008481,44.758238,44.7419570000001,44.739899,44.7426927982965,44.7413114619712,44.7174440000001,44.6954210000001,44.6938490000001,44.684114,44.66944,44.6681140000001,44.6621050000001,44.663699070737,44.6626497855094,44.6555146573488,44.6477499482913,44.6455330000001,44.63922,44.6372010000001,44.6416641053581,44.6408246763628,44.6263445556758,44.6179502779218,44.610873,44.6067820000001,44.5992650000001,44.597323,44.598215,44.6093940000001,44.6124580000001,44.6132120000001,44.6343160000001,44.6484550000001,44.654377,44.659316,44.6912952649022,44.6967515350721,44.7057049079909,44.7074542395132,44.6994796782905,44.6990599576926,44.6818517059874,44.6694701516888,44.6654828710775,44.6629645881579,44.6524717440157,44.6318250000001,44.6246720000001,44.619757,44.6269741347933,44.6265544223289,44.6129137306373,44.6026307467939,44.5942364731067,44.596954,44.6034701717227,44.6078771688652,44.6091363062582,44.60577859841,44.6032603154904,44.60032231604,44.5980138934192,44.6179502924096,44.6288628571498,44.6368374183727,44.63305999806,44.6265544345291,44.6219375811544,44.6215178686902,44.6263445742304,44.6265544345291,44.6219375811544,44.6196291504006,44.5606593783582,44.556788,44.5394350000001,44.531117,44.525403440869,44.5258231451998,44.5358962768777,44.5375751267351,44.5371554224042,44.5337977064225,44.527921715655,44.5157500135217,44.5048374650486,44.4952378058272,44.4985240000001,44.4962520000001,44.4974180000001,44.5061760000002,44.508944,44.52645273423,44.5436609859351,44.546598981319,44.5482778311763,44.5474384062477,44.5436609859351,44.534007574855,44.5205767434622,44.520685,44.5239344431769,44.5298104339446,44.5369455702389,44.544080706533,44.5575115379256,44.5587706834521,44.5562523923991,44.5516355471581,44.5428215610065,44.5239344431769,44.4974924928561,44.492455927017,44.4849010782585,44.4786760000001,44.4775760000001,44.4718120000001,44.465272,44.4568810000001,44.428695,44.4242820000001,44.4194340000001,44.4246721688232,44.4355847254299,44.4330664425102,44.4263510186804,44.4096680000001,44.394078,44.4192158905199,44.4301284471265,44.4330664425102,44.4318072969839,44.4288693015998,44.4213144609749,44.411848,44.411187,44.4158581826716,44.4162778951359,44.4154084253968,44.4125004748235,44.3990696271639,44.387034,44.3869170000001,44.399909060226,44.4066244921892,44.4095624713062,44.407463917118,44.3969710648421,44.3902550000001,44.3604559828431,44.3608756953075,44.3579376999237,44.3512222842273,44.3436674354688,44.3307300000001,44.3319880000001,44.3356920000001,44.3479250000001,44.3730473893071,44.3764051052888,44.3713685394497,44.3709488269853,44.3851110000001,44.4015879263503,44.4213144528416,44.4292890140643,44.4456578733748,44.4595084253652,44.467902690919,44.4750378272131,44.4788152475256,44.4823828319397,44.4794448365558,44.4773462661006,44.4731491089234,44.4702111135396,44.4718899633969,44.4786054116271,44.4849011067257,44.4874193977787,44.4924559636176,44.4869996771807,44.4798645408866,44.4643351227718,44.4634956978431,44.4710505384682,44.4832222568683,44.484061681797,44.4714702590661,44.4597182775306,44.45132399571,44.4492254415218,44.4378931643174,44.4328565984783,44.4404114553704,44.4332763190761,44.4299186030946,44.4206849044786,44.4177469090949,44.414808913711,44.3904655257116,44.3929838086312,44.392365,44.386352,44.3691450000001,44.343604,44.3283970000001,44.3066750000002,44.2885780000001,44.2888948023034,44.2838582527314,44.2763034039729,44.2666499847593,44.2630353962705,44.261721511757,44.2476730340775,44.2251009999999,44.2228930000001,44.2295053381304,44.2378710000002,44.2433110000001,44.2475630000001,44.2470660000001,44.2522440000001,44.274612,44.284468,44.295102,44.2986240000001,44.3126086785406,44.3222620936876,44.3256198015357,44.3293972218482,44.3361126375447,44.3377542610003,44.3562589090341,44.3566786214984,44.3639411230041,44.3695610431448,44.3761909999999,44.3907096840318,44.3889349721067,44.3896744358865,44.392336503774,44.402847122711,44.4236897296323,44.4300491192847,44.4309364723812,44.4273870485311,44.4180698152234,44.397973,44.3964110000001,44.3968,44.401534,44.4265943359088,44.4391364714256,44.4480432085086,44.449497372109,44.4474978998002,44.443317185613,44.4365916904084,44.4121410000001,44.3980780000001,44.391081,44.385638854739,44.3785037265783,44.3772445891852,44.3780840141139,44.388157145792,44.3973908362743,44.4041062682375,44.4326467808804,44.4343256632715,44.4297087854965,44.4141793836486,44.4116611088626,44.41333995872,44.3990697023984,44.3978105568721,44.4036865476398,44.402847122711,44.3990697023984,44.3944528408904,44.3852191504081,44.3743065938015,44.3717883108819,44.3549997635076,44.346256,44.3330390000002,44.317603,44.313007,44.3080220000001,44.300819,44.299902,44.2903880000001,44.28634,44.2761170000001,44.2650460000001,44.2602090000001,44.2495940000001,44.2412629999999,44.235819,44.2275536972207,44.2293309336385,44.236534034326,44.2383348112427,44.2480589898423,44.2527410126175,44.2747104686673,44.2754307766421,44.2804729324667,44.284434647267,44.2862354241836,44.2992010096086,44.3215910000001,44.3283880000001,44.331148,44.3295970000001,44.327015,44.320523,44.3078599999999,44.3121600000001,44.316549,44.334547,44.349594,44.3530930000001,44.362194,44.3750770000001,44.4089400000001,44.4280800000001,44.434803,44.4626110000002,44.4738790000001,44.4714371946992,44.468737,44.462242,44.444923,44.4281120000001,44.430676,44.437995,44.4434149999999,44.4450750000001,44.4506430000001,44.452062,44.4480390000001,44.4386900000001,44.4291080000001,44.4261950000001,44.4150330000001,44.3968790000001,44.3863400000001,44.3811060000002,44.375076,44.3558820000001,44.32405,44.314353,44.296327,44.294582,44.274071,44.257086,44.2491392040609,44.2485580000001,44.2336730000001,44.2250290000001,44.2151729999999,44.1959200000001,44.1715420000001,44.1654980000001,44.1650430000001,44.1609530000001,44.156768,44.143962,44.1299910000001,44.1178240000001,44.104529,44.0936010000001,44.0857340000001,44.0853260000001,44.0906340000001,44.095162,44.094888,44.0921640000001,44.0790360000001,44.062506,44.063152,44.0680171133174,44.0694899735062,44.069910789538,44.0675962972855,44.055256,44.0461346225778,44.0412952178244,44.0389807255719,44.0288811081883,44.0196231310233,44.0173086387707,44.0074194334805,43.9985822723473,43.9990030883793,43.9956365519697,43.9755425232493,43.9675469941797,43.9597618772035,43.9505038979999,43.9418060000001,43.935583,43.931596,43.925465,43.9214266177192,43.9333933366194,43.9436666524795,43.957439667664,43.9585686044825,43.9576654541527,43.943451,43.942951,43.9448698925179,43.9566755077918,43.9620682018294,43.9743110637872,43.9747483104711,43.964755,43.9645844688634,43.9643400000001,43.9718040000001,43.977267,43.9579290000001,43.9645459198573,43.9668778927567,43.9642544183023,43.9419549193328,43.9033160000001,43.8802800000001,43.8691179999999,43.837673,43.8312979999999,43.8372220000002,43.84479,43.8684977260498,43.8756393983496,43.881615078551,43.8800118482419,43.877971371249,43.8725786800358,43.8612410000001,43.841347,43.8406597886203,43.8444492410511,43.8440120000159,43.8419715145498,43.8233157313554,43.81836,43.8135505789526,43.8148623161798,43.8257934437347,43.8255019450041,43.8308946362174,43.8512994061469,43.8588783166572,43.8580038289384,43.8450322243904,43.8374533082312,43.8316233731585,43.8268136822313,43.837016067196,43.8434289997302,43.8459067121094,43.836287324606,43.817194289079,43.8037854378471,43.79103,43.7910330000001,43.8163280000001,43.8205464962381,43.8243359543179,43.8250646954957,43.8249179124967,43.8230242185028,43.810264,43.801047,43.7924030000001,43.786685,43.7559400000001,43.7570001955443,43.7553969652353,43.7537937349262,43.7511702661206,43.7470893093103,43.7446115856334,43.7211250000001,43.7051400000001,43.7035810000001,43.7047460000001,43.7239153127363,43.7326602153453,43.7405306245864,43.742701,43.7589620000001,43.7756559773264,43.778035,43.7770524049583,43.77239,43.7751120000001,43.7801741751718,43.765948,43.7688058023451,43.7677855638485,43.750801,43.743227,43.7284510000001,43.726852,43.7247930000001,43.717666,43.7170650989195,43.7275589741418,43.7333889148633,43.7403848392099,43.7444657931957,43.7380528719593,43.7450487850084,43.7590406337015,43.7695344976264,43.787607322901,43.7986841786382,43.8050971224698,43.8120930242212,43.8109270631912,43.8225869220387,43.8289998432753,43.8342467808862,43.8441576755936,43.8482386295796,43.8529025866758,43.8593154853169,43.8587325048019,43.8562453120729,43.8499876163151,43.8284168401649,43.8214209384135,43.8132590078464,43.819671951678,43.819671951678,43.8091780538604,43.7916882542916,43.7811943790692,43.7747814578328,43.7607896091396,43.7648705631254,43.7736154742076,43.7771134250832,43.7718664874721,43.7660365580484,43.7532106929801,43.7456317768211,43.7421338146477,43.7199800692802,43.7158991152943,43.7077372073224,43.7048222482593,43.7019072778987,43.7048222482593,43.6832514834069,43.6768385508728,43.6750100368046,43.671973168826,43.6695436744431,43.6659862002852,43.6646846856775,43.6632964019719,43.659131554218,43.6390226962759,43.625765,43.5967170000001,43.590445,43.5865150000001,43.5651460000001,43.557627,43.5568740000001,43.5621490000001,43.561118,43.5518490000001,43.553687,43.5626157905153,43.550589,43.5443150000001,43.540484,43.5358549572962,43.5354053402784,43.5291900000001,43.5072019999999,43.4960400000001,43.4870310000001,43.4696740000001,43.46423,43.45508,43.4420320000001,43.439077,43.434133,43.4188390000001,43.4129400000002,43.4026070000002,43.3999271215743,43.4012617141968,43.400942,43.3957769999999,43.3892536105661,43.3796560000001,43.375928,43.3564872523623,43.3432497698449,43.340246,43.3439720000001,43.346391,43.3440370000001,43.3367710000001,43.3356045757279,43.321886,43.3106139999999,43.270113,43.249295,43.2378510295905,43.2304426352761,43.2218590000002,43.2176510000002,43.199858,43.163625,43.1276030000001,43.1221620000001,43.114182,43.0980080000001,43.0931640000001,43.0762340000001,43.070314,43.0596207241543,43.079988,43.1232309734312,43.129086,43.146886,43.1803645449732,43.186685,43.234997,43.237408,43.237911,43.240187,43.240343,43.24093,43.241301,43.241597,43.242868,43.250393,43.251224,43.265098,43.265109,43.306682,43.308289,43.3177308930923,43.329569,43.333983,43.343777,43.376128,43.376814,43.391513,43.414264,43.473276,43.473262,43.4762482865827,43.509802,43.53431,43.5376342942421,43.54098,43.540697,43.552718,43.570255,43.70096,43.701965,43.711865,43.715043,43.7921516010489,43.79244,43.914232,44.092931,44.093205,44.258443,44.258825,44.2847741602021,44.3408818535062,44.4404203125525,44.755607,45.019661,45.224093,45.305293]}]],[[{"lng":[-71.2867552490482,-71.2830046722077,-71.2815709485126,-71.2781705991236,-71.2743153943134,-71.2837911023211,-71.2867552490482],"lat":[41.6427250587484,41.6444336530163,41.6482074636179,41.6473090942378,41.6381252187449,41.63779715478,41.6427250587484]}],[{"lng":[-71.3411216434439,-71.326769,-71.325365,-71.327822,-71.3430130975858,-71.3411216434439],"lat":[41.4985980686211,41.491286,41.487601,41.482985,41.4956153950024,41.4985980686211]}],[{"lng":[-71.3615200759334,-71.3470701908911,-71.3359919504035,-71.3165190182503,-71.3174135363023,-71.3231246818126,-71.3278036917247,-71.3306936681998,-71.3308312910799,-71.3130785795902,-71.3105326509814,-71.3036517549931,-71.2943625479425,-71.2883761673393,-71.2851421456648,-71.2734446248848,-71.2724124946203,-71.2752336609888,-71.2718620217678,-71.2510817242572,-71.2121358546171,-71.1956401791165,-71.19439,-71.191178,-71.191175,-71.18129,-71.1759899999999,-71.17609,-71.17609,-71.153989,-71.14587,-71.135188,-71.134688,-71.134478,-71.134484,-71.12057,-71.136867,-71.141093,-71.140224,-71.1673448894461,-71.170131,-71.19302,-71.1949674390917,-71.1968572635355,-71.1966066435004,-71.1900160990195,-71.1901672837738,-71.1993896262981,-71.1996919980039,-71.2063819759345,-71.2007880935153,-71.2135633044996,-71.2086497600667,-71.2077804383908,-71.2126561842547,-71.212416781637,-71.212003837018,-71.216160450779,-71.2407085768583,-71.2436001316179,-71.2361302693701,-71.2366423117801,-71.2347748476774,-71.2279891967773,-71.2294435317695,-71.2334350127244,-71.2406136982872,-71.2385859584366,-71.237174987793,-71.2367513361322,-71.2377827437294,-71.2407102551893,-71.246703322517,-71.245992,-71.252692,-71.264793,-71.2856388451966,-71.2951109239581,-71.304394,-71.311394,-71.312694,-71.3127178545049,-71.3214098816776,-71.3376949999999,-71.351096,-71.3627427483063,-71.3615200759334],"lat":[41.46483058542,41.4712298199959,41.4696472115451,41.4775602404648,41.4887761038325,41.5030883673281,41.5042581204728,41.5076985698003,41.5183639603156,41.5346716835677,41.5469196785335,41.5599245740048,41.5714156697985,41.5732735120086,41.5771268153088,41.6069899042179,41.6150405546843,41.6194443268367,41.6239857192023,41.6387796414434,41.6419448520112,41.6750904939328,41.674802,41.674216,41.6742920000001,41.672502,41.671402,41.668502,41.668102,41.664102,41.662795,41.660502,41.660502,41.641262,41.641198,41.497448,41.493942,41.489937,41.485855,41.4714046898457,41.463974,41.457931,41.4590370639379,41.4611158702402,41.4647556078702,41.4782754720593,41.4842851101724,41.4917688141057,41.4955106644244,41.4992147191038,41.5143711048004,41.5458177728375,41.5710280230665,41.6006604597694,41.6100717812222,41.6182903746967,41.6229899385402,41.6254899321436,41.6192248871029,41.5875081045733,41.5747671747054,41.5358516155578,41.5325383711568,41.5282974243163,41.5215444231164,41.5140447322853,41.5005565250502,41.4868451399608,41.4865455627441,41.4833690128984,41.481155258901,41.4748718165313,41.4719596204611,41.481302,41.485902,41.488902,41.4878047205529,41.4843501998953,41.454502,41.450802,41.451402,41.4545967161195,41.4555996417504,41.448902,41.450802,41.4603791778455,41.46483058542]}],[{"lng":[-71.3661648412311,-71.3484015400264,-71.338695813957,-71.336181640625,-71.3370476736691,-71.3425140380859,-71.3436660766602,-71.3307113647461,-71.3148893234162,-71.3055498499554,-71.3033523343032,-71.3073811200965,-71.3174743652344,-71.3261032104492,-71.331199645996,-71.3359489087455,-71.3370476736691,-71.3337513859957,-71.3295593261719,-71.3266094352847,-71.3258769371648,-71.3333053588867,-71.3465702627879,-71.3628685571065,-71.3661648412311],"lat":[41.6609797352733,41.6637266404849,41.6587822125236,41.6479606628418,41.646146458487,41.6447906494141,41.6399002075195,41.6329917907715,41.6303975537277,41.6225230977993,41.6065910631869,41.5979840984923,41.5831871032715,41.5785827636719,41.5803184509277,41.5858977269175,41.5946878161421,41.6058585544207,41.6090965270996,41.6161136558544,41.6239881117829,41.6295356750488,41.6322288167712,41.6514571461545,41.6609797352733]}],[{"lng":[-71.40056,-71.3959269891894,-71.3865110895135,-71.3789141752165,-71.3910050402177,-71.3921369181409,-71.3844780987806,-71.379020690918,-71.373617722059,-71.3701937566555,-71.3635598312027,-71.3598683642901,-71.3632923172528,-71.3604033507202,-71.3809471307001,-71.383586,-71.389284,-71.3902749999999,-71.399568,-71.40056],"lat":[41.46094,41.4922154093505,41.4930714017381,41.5049482717527,41.5145781684887,41.5244678361951,41.556735718933,41.5677719116211,41.573213534035,41.573962525819,41.5708595580793,41.5563077206657,41.5019523180943,41.4831205249631,41.4745606166381,41.464782,41.460605,41.455043,41.448596,41.46094]}],[{"lng":[-71.6131329999999,-71.605565,-71.594994,-71.58955,-71.580228,-71.577301,-71.576661,-71.573785,-71.561093,-71.555006,-71.554067,-71.557459,-71.564119,-71.565752,-71.560969,-71.550226,-71.544446,-71.543872,-71.547051,-71.551953,-71.5937,-71.599993,-71.611706,-71.6131329999999],"lat":[41.160281,41.182139,41.188392,41.196557,41.204837,41.21471,41.224434,41.228436,41.224207,41.216822,41.212957,41.204542,41.195372,41.184373,41.176186,41.166787,41.164912,41.161321,41.153684,41.151718,41.146339,41.146932,41.153239,41.160281]}],[{"lng":[-71.862109289618,-71.8595697162474,-71.8397818814344,-71.832530438866,-71.8312399281427,-71.8316129999999,-71.833443,-71.842131,-71.843472,-71.842563,-71.839649,-71.81839,-71.7976829999999,-71.7917190617471,-71.7893586727423,-71.789356,-71.789464590839,-71.789677581832,-71.789678,-71.792767,-71.792786,-71.794161,-71.794161,-71.799242,-71.6062419037219,-71.5911038317156,-71.576908,-71.559439,-71.527606,-71.527306,-71.500905,-71.499905,-71.4982581900398,-71.4581035191943,-71.381401,-71.3814658758777,-71.381501,-71.381401,-71.3816,-71.3817,-71.3766,-71.373799,-71.370999,-71.365399,-71.364699,-71.362499,-71.354699,-71.352699,-71.339298,-71.339298,-71.337597,-71.339597,-71.339297,-71.327896,-71.317795,-71.3177899497036,-71.2613919999999,-71.2247976828309,-71.2278747558594,-71.2409907545199,-71.2376348853171,-71.2415500562989,-71.2595599113161,-71.267054690855,-71.2700749737878,-71.269180077068,-71.2803663164153,-71.2876373761097,-71.2905457991204,-71.2991591995591,-71.3013964543654,-71.3037455604229,-71.3060946708159,-71.3026269373553,-71.2989354753792,-71.2931186336934,-71.2912169673248,-71.3057590823782,-71.3148199355124,-71.342785538216,-71.3500565979105,-71.3531722045789,-71.3537480555511,-71.3657173273604,-71.3657173273604,-71.3729883870549,-71.3779103190144,-71.3820492271827,-71.3898796038303,-71.3907745005501,-71.3894321554704,-71.3905507807057,-71.4180689328817,-71.4413363126315,-71.4430820027717,-71.4418956252492,-71.4459226713275,-71.4493179321289,-71.4444684598222,-71.4300382090266,-71.4254518524983,-71.4093017578124,-71.4086360804932,-71.4037704467773,-71.4477124625996,-71.4425667891182,-71.4216485197613,-71.4173977473352,-71.4148249084268,-71.4149367683491,-71.4214247912458,-71.4199705797405,-71.4179570556175,-71.4176214671797,-71.4184036254883,-71.4211572264684,-71.422991,-71.4307439999999,-71.430926,-71.427935,-71.428652,-71.433612,-71.4376699999999,-71.441199,-71.448948,-71.455845,-71.4553709999999,-71.474918,-71.483295,-71.513401,-71.526724,-71.555381,-71.624505,-71.68807,-71.701631,-71.72074,-71.7292470045153,-71.773702,-71.785957,-71.833755,-71.857432,-71.8627719999999,-71.862109289618],"lat":[41.3166115880123,41.3223991449254,41.3346897237535,41.3412037300917,41.3446450928394,41.370899,41.384524,41.395359,41.40583,41.409855,41.412119,41.419599,41.416709,41.545772004335,41.5968521603427,41.59691,41.6400171907069,41.7245680002953,41.724734,41.807001,41.80867,41.840141,41.841101,42.008065,42.0133020288882,42.0137127982192,42.014098,42.014342,42.014998,42.015098,42.017098,42.017198,42.0172202346582,42.0177623891285,42.018798,41.9849983164665,41.966699,41.964799,41.922899,41.922699,41.893999,41.894399,41.894599,41.895299,41.895399,41.895599,41.896499,41.896699,41.893599,41.893399,41.8337,41.832,41.8065,41.780501,41.776101,41.7760988689599,41.752301,41.7104976501041,41.7054977416992,41.6977435893401,41.6816354093624,41.667205156399,41.642595425066,41.6449445393881,41.6524393215012,41.6549002896487,41.6725745562282,41.6724626876349,41.6623950735231,41.6495308979486,41.6499783446827,41.6547884318942,41.6725745562282,41.6817472736201,41.6815235494402,41.6883471564392,41.7026655478545,41.7186618722454,41.7238075413914,41.7285057621773,41.7278345896374,41.7251910434766,41.7247024424468,41.7116145475697,41.6949470484711,41.672574566525,41.6666458660007,41.6673170428761,41.6719034015721,41.6806286684364,41.6834252315248,41.6840964040648,41.6842082683225,41.6864455144578,41.6883027778049,41.6900251100084,41.6911437352437,41.6874008178711,41.6644086176977,41.6675407670561,41.6707847763368,41.6626434326172,41.6538193058909,41.5893211364746,41.5803999518324,41.5650748108201,41.5378922427464,41.5345363713758,41.5231264045969,41.516302805185,41.498628542941,41.4847576047631,41.4820729081001,41.4779339977641,41.4726524353027,41.4698877608593,41.472682,41.470636,41.465655,41.459529,41.454158,41.444995,41.441302,41.441602,41.438479,41.432986,41.407962,41.386104,41.371722,41.374702,41.376636,41.373316,41.36087,41.342823,41.336968,41.331567,41.3309903573844,41.327977,41.325739,41.315631,41.306318,41.309791,41.3166115880123]}]],[[{"lng":[-72.556214,-72.443762,-72.4422980408529,-72.432661,-72.433097,-72.441904,-72.4521,-72.439407,-72.4311865258611,-72.39715,-72.403949,-72.405253,-72.3969481880572,-72.3969341236136,-72.387852,-72.387642,-72.395825,-72.32962,-72.334745,-72.334401,-72.32966,-72.302867,-72.27118,-72.264245,-72.232713,-72.2057165767744,-72.204792,-72.183743,-72.182203,-72.167224,-72.121002,-72.104421,-72.107042,-72.113078,-72.112813,-72.09156276373,-72.0907098884438,-72.054675,-72.040082,-72.0420872746832,-72.053021,-72.064285,-72.067774,-72.065434,-72.05888,-72.012173,-72.002314,-71.84946549142,-71.816065,-71.814388,-71.793924,-71.7645370136487,-71.761966,-71.756091,-71.745011,-71.708934,-71.67995,-71.59948,-71.580263,-71.536251,-71.553156,-71.598656,-71.625323,-71.627358,-71.623924,-71.5725200969381,-71.495844,-71.493985,-71.516814,-71.537784,-71.538592,-71.53698,-71.530091,-71.505,-71.48645651783,-71.4685668632502,-71.464555,-71.502487,-71.496098,-71.489145,-71.428828,-71.39781,-71.403267,-71.44288,-71.401182,-71.342961,-71.297092,-71.284396,-71.266754,-71.263042,-71.259614,-71.232998,-71.183785,-71.13943,-71.131953,-71.124517,-71.119914,-71.120112,-71.105151,-71.097772,-71.084334,-71.07564,-71.060101,-71.037518,-71.0192570661535,-71.0134901182201,-71.0102394134267,-71.008736,-71.008764,-71.001335,-71.001367,-70.9929859999999,-70.989067,-70.9890409760162,-70.982083,-70.982238,-70.981978,-70.981946,-70.972716,-70.953322,-70.955346,-70.955337,-70.9589580869365,-70.962556,-70.9547549999999,-70.9637421426714,-70.964542,-70.964433,-70.986812,-70.987733,-70.984305,-70.984335,-70.967229,-70.952356,-70.930783,-70.916750867889,-70.91246,-70.9098049999999,-70.86323,-70.863231,-70.839213,-70.839717,-70.83365,-70.828022,-70.826711,-70.825071,-70.823309,-70.822959,-70.817865,-70.817773,-70.816232,-70.8283009999999,-70.8291742928513,-70.8338,-70.8281,-70.819549285713,-70.7563969999999,-70.7039355803705,-70.718936,-70.74457,-70.749024,-70.759975,-70.795596,-70.810069,-70.8146099205384,-70.816321,-70.817296,-70.848625,-70.886136,-70.902768,-70.914886,-70.914899,-70.930799,-70.931699,-70.996901,-71.037901,-71.0584070060572,-71.1138579476739,-71.149703,-71.165603,-71.186104,-71.181803,-71.208137,-71.2082269999999,-71.208302,-71.245504,-71.2545323428329,-71.294205,-71.631814,-71.636214,-71.8054495273814,-71.8987144838182,-71.928811,-72.0813838334013,-72.2036857753901,-72.2829683292889,-72.412011288873,-72.4512567568816,-72.458519,-72.460195,-72.478453,-72.491122,-72.509506,-72.542784,-72.555693,-72.5557682548878,-72.556112,-72.556214],"lat":[42.86695,43.006245,43.0204654884923,43.114077,43.120021,43.136615,43.161414,43.211322,43.2317857417728,43.316515,43.358098,43.389992,43.4289245345803,43.4289904679743,43.471567,43.502481,43.52056,43.600201,43.614519,43.61925,43.634648,43.702718,43.734138,43.734158,43.748286,43.7711431843793,43.771926,43.806644,43.834032,43.886113,43.918956,43.950536,43.969513,43.97279,43.98802,44.0333901207039,44.0352110442075,44.112147,44.155749,44.1576326160831,44.167903,44.187888,44.270976,44.277235,44.28624,44.321408,44.324871,44.3592947206154,44.366817,44.381932,44.399271,44.4064030316084,44.407027,44.406401,44.401359,44.411611,44.427908,44.486455,44.506509,44.587939,44.626645,44.698005,44.729718,44.747544,44.755135,44.8100736776565,44.90498,44.911312,44.947588,44.984298,44.988182,44.994177,44.999656,45.008151,45.0070110589868,45.0102220146519,45.013637,45.013367,45.069235,45.072308,45.123881,45.203553,45.215348,45.234799,45.242544,45.271281,45.298985,45.302434,45.29123,45.277401,45.27324,45.256625,45.244932,45.242958,45.245423,45.25527,45.262287,45.265738,45.294635,45.301906,45.305293,45.224093,45.019661,44.755607,44.4404203125525,44.3408818535062,44.2847741602021,44.258825,44.258443,44.093205,44.092931,43.914232,43.79244,43.7921516010489,43.715043,43.711865,43.701965,43.70096,43.570255,43.552718,43.540697,43.54098,43.5376342942421,43.53431,43.509802,43.4762482865827,43.473262,43.473276,43.414264,43.391513,43.376814,43.376128,43.343777,43.333983,43.329569,43.3177308930923,43.308289,43.306682,43.265109,43.265098,43.251224,43.250393,43.242868,43.241597,43.241301,43.24093,43.240343,43.240187,43.237911,43.237408,43.234997,43.186685,43.1803645449732,43.146886,43.129086,43.1232309734312,43.079988,43.0596207241543,43.03235,43.00009,42.995467,42.988592,42.93629,42.909549,42.8913460968434,42.884487,42.87229,42.860939,42.88261,42.88653,42.886564,42.886589,42.884589,42.884189,42.864589,42.854089,42.8470092354716,42.8278646195755,42.815489,42.808689,42.790689,42.73759,42.743273,42.743294,42.743314,42.742589,42.7341357155738,42.69699,42.704788,42.704888,42.7091368616908,42.7114783907221,42.712234,42.7164447392214,42.7198200556031,42.7220081132792,42.725569469774,42.7266525749882,42.726853,42.732066,42.762296,42.772465,42.781183,42.808482,42.85638,42.8581530698138,42.866252,42.86695]}]],[[{"lng":[-73.437429,-73.429239,-73.4036856278336,-73.390583,-73.350806,-73.324681,-73.3232681243901,-73.315016,-73.296031,-73.293613,-73.299885,-73.306707,-73.33863,-73.3386343733687,-73.356788,-73.3619524816717,-73.374389,-73.390231,-73.365326,-73.339958,-73.3534491425926,-73.369647,-73.350188,-73.343124,-73.1919477737245,-73.1701408039083,-73.085972,-73.015539,-73.014766,-72.845633,-72.67477,-72.554252863,-72.342453,-72.103058,-71.8976223057785,-71.767452,-71.502487,-71.464555,-71.4685668632502,-71.48645651783,-71.505,-71.530091,-71.53698,-71.538592,-71.537784,-71.516814,-71.493985,-71.495844,-71.5725200969381,-71.623924,-71.627358,-71.625323,-71.598656,-71.553156,-71.536251,-71.580263,-71.59948,-71.67995,-71.708934,-71.745011,-71.756091,-71.761966,-71.7645370136487,-71.793924,-71.814388,-71.816065,-71.84946549142,-72.002314,-72.012173,-72.05888,-72.065434,-72.067774,-72.064285,-72.053021,-72.0420872746832,-72.040082,-72.054675,-72.0907098884438,-72.09156276373,-72.112813,-72.113078,-72.107042,-72.104421,-72.121002,-72.167224,-72.182203,-72.183743,-72.204792,-72.2057165767744,-72.232713,-72.264245,-72.27118,-72.302867,-72.32966,-72.334401,-72.334745,-72.32962,-72.395825,-72.387642,-72.387852,-72.3969341236136,-72.3969481880572,-72.405253,-72.403949,-72.39715,-72.4311865258611,-72.439407,-72.4521,-72.441904,-72.433097,-72.432661,-72.4422980408529,-72.443762,-72.556214,-72.556112,-72.5557682548878,-72.555693,-72.542784,-72.509506,-72.491122,-72.478453,-72.460195,-72.458519,-72.5166890388952,-72.8641799765264,-72.9302707464521,-73.018645853029,-73.022903,-73.1424865920119,-73.264957,-73.276421,-73.290944,-73.285388,-73.278673,-73.274466,-73.2743929999999,-73.274294,-73.2694723398386,-73.259159,-73.2548478823402,-73.253084,-73.252832,-73.252674,-73.252582,-73.247061,-73.242042,-73.302552,-73.306234,-73.3665369999999,-73.375594,-73.4002949999999,-73.428636,-73.431229,-73.421606,-73.403517,-73.370724,-73.3607112822931,-73.350431,-73.357547,-73.3792789999999,-73.3793120231026,-73.388389,-73.397256,-73.407742,-73.405525,-73.405999,-73.410776,-73.43688,-73.437429],"lat":[44.046861,44.079414,44.1531020562431,44.190886,44.225943,44.243614,44.264796024108,44.388513,44.428339,44.438903,44.476652,44.500334,44.546844,44.5468466671817,44.557918,44.5630637028053,44.575455,44.618353,44.703294,44.778893,44.8017241993425,44.829136,44.994304,45.01084,45.0135760244411,45.0139706923322,45.015494,45.015072,45.01498,45.016659,45.015459,45.0117943494724,45.005354,45.005598,45.0091722478339,45.011437,45.013367,45.013637,45.0102220146519,45.0070110589868,45.008151,44.999656,44.994177,44.988182,44.984298,44.947588,44.911312,44.90498,44.8100736776565,44.755135,44.747544,44.729718,44.698005,44.626645,44.587939,44.506509,44.486455,44.427908,44.411611,44.401359,44.406401,44.407027,44.4064030316084,44.399271,44.381932,44.366817,44.3592947206154,44.324871,44.321408,44.28624,44.277235,44.270976,44.187888,44.167903,44.1576326160831,44.155749,44.112147,44.0352110442075,44.0333901207039,43.98802,43.97279,43.969513,43.950536,43.918956,43.886113,43.834032,43.806644,43.771926,43.7711431843793,43.748286,43.734158,43.734138,43.702718,43.634648,43.61925,43.614519,43.600201,43.52056,43.502481,43.471567,43.4289904679743,43.4289245345803,43.389992,43.358098,43.316515,43.2317857417728,43.211322,43.161414,43.136615,43.120021,43.114077,43.0204654884923,43.006245,42.86695,42.866252,42.8581530698138,42.85638,42.808482,42.781183,42.772465,42.762296,42.732066,42.726853,42.7283248137924,42.7371170024253,42.7387892259372,42.741025285999,42.741133,42.7435078350649,42.74594,42.746019,42.80192,42.834093,42.83341,42.940361,42.942482,42.943652,43.0306859127482,43.216848,43.3146844686886,43.354714,43.363493,43.370285,43.370997,43.514919,43.534925,43.625708,43.628018,43.623462,43.61335,43.568889,43.583994,43.588285,43.646577,43.685032,43.735571,43.7532680455819,43.771438,43.785933,43.808391,43.8084780454188,43.832404,43.905668,43.929887,43.948813,44.016229,44.026944,44.042578,44.046861]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#444444","weight":1,"opacity":1,"fill":true,"fillColor":["#FFFFB2","#FECC5C","#FECC5C","#E31A1C","#E31A1C","#E31A1C","#FFFFB2","#FD8D3C","#FD8D3C"],"fillOpacity":0.5,"smoothFactor":0.5,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},{"color":"white","weight":2,"bringToFront":true}]}],"limits":{"lat":[38.928519,47.459686],"lng":[-80.51979,-66.949895]}},"evals":[],"jsHooks":[]}</script>
</div>
<h4 id="highlighting-shapes">Highlighting shapes</h4>
<p>The above example uses the <code>highlightOptions</code> parameter to emphasize the currently moused-over polygon. (The <code>bringToFront = TRUE</code> argument is necessary to prevent the thicker, white border of the active polygon from being hidden behind the borders of other polygons that happen to be higher in the z-order.) You can use <code>highlightOptions</code> with all of the shape layers described on this page.</p>
<h3 id="circles">Circles</h3>
<p>Circles are added using <code>addCircles()</code>. Circles are similar to <a href="https://rstudio.github.io/leaflet/markers.html#circle-markers">circle markers</a>; the only difference is that circles have their radii specified in meters, while circle markers are specified in pixels. As a result, circles are scaled with the map as the user zooms in and out, while circle markers remain a constant size on the screen regardless of zoom level.</p>
<p>When plotting circles, only the circle centers (and radii) are required, so the set of valid data sources is different than for polygons and the same as for markers. See the introduction to <a href="https://rstudio.github.io/leaflet/markers.html">Markers</a> for specifics.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>cities</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/textconnections.html'>textConnection</a></span><span class='op'>(</span><span class='st'>"
City,Lat,Long,Pop
Boston,42.3601,-71.0589,645966
Hartford,41.7627,-72.6743,125017
New York City,40.7127,-74.0059,8406000
Philadelphia,39.9500,-75.1667,1553000
Pittsburgh,40.4397,-79.9764,305841
Providence,41.8236,-71.4222,177994
"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>cities</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircles</a></span><span class='op'>(</span>lng <span class='op'>=</span> <span class='op'>~</span><span class='va'>Long</span>, lat <span class='op'>=</span> <span class='op'>~</span><span class='va'>Lat</span>, weight <span class='op'>=</span> <span class='fl'>1</span>,
    radius <span class='op'>=</span> <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='va'>Pop</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>30</span>, popup <span class='op'>=</span> <span class='op'>~</span><span class='va'>City</span>
  <span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-e85bb2f8a1001b4fe6a4" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-e85bb2f8a1001b4fe6a4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircles","args":[[42.3601,41.7627,40.7127,39.95,40.4397,41.8236],[-71.0589,-72.6743,-74.0059,-75.1667,-79.9764,-71.4222],[24111.6030159755,10607.3229421942,86979.3078841169,37385.8261912185,16590.8679700611,12656.8005435813],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":1,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},["Boston","Hartford","New York City","Philadelphia","Pittsburgh","Providence"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null,null]}],"limits":{"lat":[39.95,42.3601],"lng":[-79.9764,-71.0589]}},"evals":[],"jsHooks":[]}</script>
</div>
<h3 id="rectangles">Rectangles</h3>
<p>Rectangles are added using the <code>addRectangles()</code> function. It takes <code>lng1</code>, <code>lng2</code>, <code>lat1</code>, and <code>lat2</code> vector arguments that define the corners of the rectangles. These arguments are always required; the rectangle geometry cannot be inferred from the data object.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addRectangles</a></span><span class='op'>(</span>
    lng1<span class='op'>=</span><span class='op'>-</span><span class='fl'>118.456554</span>, lat1<span class='op'>=</span><span class='fl'>34.078039</span>,
    lng2<span class='op'>=</span><span class='op'>-</span><span class='fl'>118.436383</span>, lat2<span class='op'>=</span><span class='fl'>34.062717</span>,
    fillColor <span class='op'>=</span> <span class='st'>"transparent"</span>
  <span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-e21b9695c6b9e6cd18a8" style="width:624px;height:192px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-e21b9695c6b9e6cd18a8">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addRectangles","args":[34.078039,-118.456554,34.062717,-118.436383,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"transparent","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[34.062717,34.078039],"lng":[-118.456554,-118.436383]}},"evals":[],"jsHooks":[]}</script>
</div>
<h2 id="showhide-layers">Show/Hide Layers</h2>
<p>The Leaflet package includes functions to show and hide map layers. You can allow users to decide what layers to show and hide, or programmatically control the visibility of layers using <a href="https://rstudio.github.io/leaflet/shiny.html">server-side code in Shiny</a>.</p>
<p>In both cases, the fundamental unit of showing/hiding is the <strong>group</strong>.</p>
<h3 id="understanding-groups">Understanding Groups</h3>
<p>A group is a label given to a set of layers. You assign layers to groups by using the <code>group</code> parameter when adding the layers to the map.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">data =</span> coffee_shops, <span class="at">group =</span> <span class="st">&quot;Food &amp; Drink&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">data =</span> restaurants, <span class="at">group =</span> <span class="st">&quot;Food &amp; Drink&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addMarkers</span>(<span class="at">data =</span> restrooms, <span class="at">group =</span> <span class="st">&quot;Restrooms&quot;</span>)</span></code></pre></div>
<p>Many layers can belong to same group. But each layer can only belong to zero or one groups (you cant assign a layer to two groups).</p>
<div class="panel panel-info">
<div class="panel-heading">
<h4 class="panel-title">
Groups vs.Layer IDs
</h4>
</div>
<div class="panel-body">
<p>Groups and <a href="https://rstudio.github.io/leaflet/shiny.html#understanding-layer-ids">Layer IDs</a> may appear similar, in that both are used to assign a name to a layer. However, they differ in that layer IDs are used to provide a <em>unique identifier</em> to <em>individual</em> markers and shapes, etc., while groups are used to give <em>shared labels</em> to <em>many</em> items.</p>
<p>You generally provide one <code>group</code> value for the entire <code>addMarkers</code> call, and you can reuse that same <code>group</code> value in future <code>addXXX</code> calls to add to that groups membership (as in the example above).</p>
<p><code>layerId</code> arguments are <em>always</em> vectorized: when calling e.g.<code>addMarkers</code> you need to provide one layer ID per marker, and they must all be unique. If you add a circle with a layer ID of <code>"foo"</code> and later add a different shape with the same layer ID, the original circle will be removed.</p>
</div>
</div>
<h3 id="interactive-layer-display">Interactive Layer Display</h3>
<p>You can use Leaflets layers control feature to allow users to toggle the visibility of groups.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>outline</span> <span class='op'>&lt;-</span> <span class='va'>quakes</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/grDevices/chull.html'>chull</a></span><span class='op'>(</span><span class='va'>quakes</span><span class='op'>$</span><span class='va'>long</span>, <span class='va'>quakes</span><span class='op'>$</span><span class='va'>lat</span><span class='op'>)</span>,<span class='op'>]</span>
<span class='va'>map</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='va'>quakes</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'># Base groups</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addTiles</a></span><span class='op'>(</span>group <span class='op'>=</span> <span class='st'>"OSM (default)"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/addProviderTiles.html'>addProviderTiles</a></span><span class='op'>(</span><span class='va'>providers</span><span class='op'>$</span><span class='va'>Stamen.Toner</span>, group <span class='op'>=</span> <span class='st'>"Toner"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/addProviderTiles.html'>addProviderTiles</a></span><span class='op'>(</span><span class='va'>providers</span><span class='op'>$</span><span class='va'>Stamen.TonerLite</span>, group <span class='op'>=</span> <span class='st'>"Toner Lite"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'># Overlay groups</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircles</a></span><span class='op'>(</span><span class='op'>~</span><span class='va'>long</span>, <span class='op'>~</span><span class='va'>lat</span>, <span class='op'>~</span><span class='fl'>10</span><span class='op'>^</span><span class='va'>mag</span><span class='op'>/</span><span class='fl'>5</span>, stroke <span class='op'>=</span> <span class='cn'>F</span>, group <span class='op'>=</span> <span class='st'>"Quakes"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addPolygons</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>outline</span>, lng <span class='op'>=</span> <span class='op'>~</span><span class='va'>long</span>, lat <span class='op'>=</span> <span class='op'>~</span><span class='va'>lat</span>,
    fill <span class='op'>=</span> <span class='cn'>F</span>, weight <span class='op'>=</span> <span class='fl'>2</span>, color <span class='op'>=</span> <span class='st'>"#FFFFCC"</span>, group <span class='op'>=</span> <span class='st'>"Outline"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'># Layers control</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/addLayersControl.html'>addLayersControl</a></span><span class='op'>(</span>
    baseGroups <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"OSM (default)"</span>, <span class='st'>"Toner"</span>, <span class='st'>"Toner Lite"</span><span class='op'>)</span>,
    overlayGroups <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Quakes"</span>, <span class='st'>"Outline"</span><span class='op'>)</span>,
    options <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/addLayersControl.html'>layersControlOptions</a></span><span class='op'>(</span>collapsed <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='va'>map</span>
</code></pre>
</div>
<div id="htmlwidget-300f40453ffe236af698" style="width:624px;height:288px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-300f40453ffe236af698">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,"OSM (default)",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["Stamen.Toner",null,"Toner",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Stamen.TonerLite",null,"Toner Lite",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircles","args":[[-20.42,-20.62,-26,-17.97,-20.42,-19.68,-11.7,-28.11,-28.74,-17.47,-21.44,-12.26,-18.54,-21,-20.7,-15.94,-13.64,-17.83,-23.5,-22.63,-20.84,-10.98,-23.3,-30.2,-19.66,-17.94,-14.72,-16.46,-20.97,-19.84,-22.58,-16.32,-15.55,-23.55,-16.3,-25.82,-18.73,-17.64,-17.66,-18.82,-37.37,-15.31,-24.97,-15.49,-19.23,-30.1,-26.4,-11.77,-24.12,-18.97,-18.75,-19.26,-22.75,-21.37,-20.1,-19.85,-22.7,-22.06,-17.8,-24.2,-20.69,-21.16,-13.82,-11.49,-20.68,-17.1,-20.14,-21.96,-20.42,-15.46,-15.31,-19.86,-11.55,-23.74,-17.7,-23.54,-19.21,-12.11,-21.81,-28.98,-34.02,-23.84,-19.57,-20.12,-17.7,-19.66,-21.5,-23.64,-15.43,-15.41,-15.48,-13.36,-20.64,-19.72,-15.44,-19.73,-27.24,-18.16,-13.66,-24.57,-16.98,-26.2,-21.88,-33,-21.33,-19.44,-34.89,-20.24,-22.55,-36.95,-15.75,-16.85,-19.06,-26.11,-26.2,-26.13,-13.66,-13.47,-14.6,-18.96,-14.65,-19.9,-22.05,-19.22,-31.24,-17.93,-19.3,-26.53,-27.72,-19.19,-17.43,-17.05,-19.52,-23.71,-21.3,-16.24,-16.14,-23.95,-25.2,-18.84,-12.66,-20.65,-13.23,-29.91,-14.31,-20.1,-17.8,-21.27,-23.58,-17.9,-23.34,-15.56,-23.83,-11.8,-15.54,-20.65,-11.75,-24.81,-20.9,-11.34,-17.98,-24.34,-13.86,-35.56,-35.48,-34.2,-26,-19.89,-23.43,-18.89,-17.82,-25.68,-20.2,-15.2,-15.03,-32.22,-22.64,-17.42,-17.84,-15.02,-18.04,-24.6,-19.88,-20.3,-20.45,-17.67,-22.3,-19.85,-24.27,-15.85,-20.02,-18.56,-17.87,-24.08,-32.2,-20.36,-23.85,-24,-20.41,-17.72,-19.67,-17.7,-16.23,-26.72,-12.95,-21.97,-21.96,-20.32,-30.28,-20.2,-30.66,-16.17,-28.25,-20.47,-23.55,-20.94,-26.67,-18.13,-20.21,-18.31,-16.52,-22.36,-22.43,-20.37,-23.77,-13.65,-21.55,-16.24,-23.73,-22.34,-19.4,-24.64,-16,-19.62,-23.84,-23.54,-28.23,-21.68,-13.44,-24.96,-20.08,-24.36,-14.7,-18.2,-16.65,-18.11,-17.95,-15.5,-23.36,-19.15,-10.97,-14.85,-17.8,-22.5,-29.1,-20.32,-16.09,-19.18,-23.81,-23.79,-19.02,-20.9,-19.06,-17.88,-19.41,-26.17,-14.95,-18.73,-20.21,-21.29,-19.76,-22.09,-23.8,-20.16,-22.13,-17.44,-23.33,-24.78,-22,-19.13,-30.72,-22.32,-16.45,-17.7,-17.95,-24.4,-19.3,-21.13,-18.07,-20.6,-18.48,-13.34,-20.92,-25.31,-15.24,-16.4,-24.57,-17.94,-30.64,-18.64,-13.09,-19.68,-16.44,-21.09,-14.99,-23.3,-17.68,-22,-21.38,-32.62,-13.05,-12.93,-18.6,-21.34,-21.48,-17.4,-17.32,-18.77,-26.16,-12.59,-14.82,-21.79,-19.83,-29.5,-12.49,-26.1,-21.04,-10.78,-20.76,-11.41,-19.1,-23.91,-27.33,-12.25,-23.49,-27.18,-25.8,-27.19,-27.27,-27.1,-27.22,-27.38,-27.27,-27.54,-27.2,-27.71,-27.6,-27.38,-21.54,-27.21,-28.96,-12.01,-17.46,-30.17,-27.27,-17.79,-22.19,-17.1,-27.18,-11.64,-17.98,-16.9,-21.98,-32.14,-18.8,-26.78,-20.43,-18.3,-15.83,-23.44,-23.73,-19.89,-17.59,-19.77,-20.31,-15.33,-18.2,-15.36,-15.29,-15.36,-16.24,-13.47,-25.5,-14.32,-20.04,-28.83,-17.82,-27.23,-10.72,-27,-20.36,-27.17,-20.94,-17.46,-21.04,-23.7,-17.72,-15.87,-17.84,-13.45,-30.8,-11.63,-30.4,-26.18,-15.7,-17.95,-20.51,-15.36,-23.61,-33.2,-17.68,-22.24,-20.07,-25.04,-21.5,-14.28,-14.43,-32.7,-34.1,-19.7,-24.19,-26.6,-17.04,-22.1,-32.6,-33,-20.58,-20.61,-19.47,-17.47,-18.4,-23.33,-18.55,-26.16,-21.8,-27.63,-18.89,-20.3,-20.56,-16.1,-12.66,-21.05,-17.97,-19.83,-22.55,-22.28,-15.72,-20.85,-21.11,-25.31,-26.46,-24.09,-16.96,-23.19,-20.81,-15.03,-18.06,-19,-23.53,-18.18,-15.66,-18,-18.08,-18.05,-29.9,-20.9,-15.61,-16.03,-17.68,-31.94,-19.14,-18,-16.95,-10.79,-20.83,-32.9,-37.93,-29.09,-23.56,-19.6,-21.39,-14.85,-22.7,-32.42,-17.9,-23.58,-34.4,-17.61,-21.07,-13.84,-30.24,-18.49,-23.45,-16.04,-17.14,-22.54,-15.9,-30.04,-24.03,-18.89,-16.51,-20.1,-21.06,-13.07,-23.46,-19.41,-11.81,-11.76,-12.08,-25.59,-26.54,-20.9,-16.99,-23.46,-17.81,-15.17,-11.67,-20.75,-19.5,-26.18,-20.66,-19.22,-24.68,-15.43,-32.45,-21.31,-15.44,-13.26,-15.26,-33.57,-15.77,-15.79,-21,-16.28,-23.28,-16.1,-17.7,-15.96,-15.95,-17.56,-15.9,-15.29,-15.86,-16.2,-15.71,-16.45,-11.54,-19.61,-15.61,-21.16,-20.65,-20.33,-15.08,-23.28,-23.44,-23.12,-23.65,-22.91,-22.06,-13.56,-17.99,-23.92,-30.69,-21.92,-25.04,-19.92,-27.75,-17.71,-19.6,-34.68,-14.46,-18.85,-17.02,-20.41,-18.18,-16.49,-17.74,-20.49,-18.51,-27.28,-15.9,-20.57,-11.25,-20.04,-20.89,-16.62,-20.09,-24.96,-20.95,-23.31,-20.95,-21.58,-13.62,-12.72,-21.79,-20.48,-12.84,-17.02,-23.89,-23.07,-27.98,-28.1,-21.24,-21.24,-19.89,-32.82,-22,-21.57,-24.5,-33.03,-30.09,-22.75,-17.99,-19.6,-15.65,-17.78,-22.04,-20.06,-18.07,-12.85,-33.29,-34.63,-24.18,-23.78,-22.37,-23.97,-34.12,-25.25,-22.87,-18.48,-21.46,-28.56,-28.56,-21.3,-20.08,-18.82,-19.51,-12.05,-17.4,-23.93,-21.23,-16.23,-28.15,-20.81,-20.72,-23.29,-38.46,-15.48,-37.03,-20.48,-18.12,-18.17,-11.4,-23.1,-14.28,-22.87,-17.59,-27.6,-17.94,-17.88,-30.01,-19.19,-18.14,-23.46,-18.44,-18.21,-18.26,-15.85,-23.82,-18.6,-17.8,-10.78,-18.12,-19.34,-15.34,-24.97,-15.97,-23.47,-23.11,-20.54,-18.92,-20.16,-25.48,-18.19,-15.35,-18.69,-18.89,-17.61,-20.93,-17.6,-17.96,-18.8,-20.61,-20.74,-25.23,-23.9,-18.07,-15.43,-14.3,-18.04,-13.9,-17.64,-17.98,-25,-19.45,-16.11,-23.73,-17.74,-21.56,-20.97,-15.45,-15.93,-21.47,-21.44,-22.16,-13.36,-21.22,-26.1,-18.35,-17.2,-22.42,-17.91,-26.53,-26.5,-16.31,-18.76,-17.1,-19.28,-23.5,-21.26,-17.97,-26.02,-30.3,-24.89,-14.57,-15.4,-22.06,-25.14,-20.3,-25.28,-20.63,-19.02,-22.1,-38.59,-19.3,-31.03,-30.51,-22.55,-22.14,-25.6,-18.04,-21.29,-21.08,-20.64,-24.41,-12.16,-17.1,-21.13,-12.34,-16.43,-20.7,-21.18,-17.78,-21.57,-13.7,-12.27,-19.1,-19.85,-11.37,-20.7,-20.24,-16.4,-19.6,-21.63,-21.6,-21.77,-21.8,-21.05,-10.8,-17.9,-22.26,-22.33,-24.04,-20.4,-15,-27.87,-14.12,-23.61,-21.56,-21.19,-18.07,-26,-20.21,-28,-20.74,-31.8,-18.91,-20.45,-22.9,-18.11,-23.8,-23.42,-23.2,-12.93,-21.14,-19.13,-21.08,-20.07,-20.9,-25.04,-21.85,-19.34,-15.83,-23.73,-18.1,-22.12,-15.39,-16.21,-21.75,-22.1,-24.97,-19.36,-22.14,-21.48,-18.54,-21.62,-13.4,-15.5,-15.67,-21.78,-30.63,-15.7,-19.2,-19.7,-19.4,-15.85,-17.38,-24.33,-20.89,-18.97,-17.99,-15.8,-25.42,-21.6,-26.06,-17.56,-25.63,-25.46,-22.23,-21.55,-15.18,-13.79,-15.18,-18.78,-17.9,-18.5,-14.82,-15.65,-30.01,-13.16,-21.03,-21.4,-17.93,-20.87,-12.01,-19.1,-22.85,-17.08,-21.14,-12.23,-20.91,-11.38,-11.02,-22.09,-17.8,-18.94,-18.85,-21.91,-22.03,-18.1,-18.4,-21.2,-12,-11.7,-26.72,-24.39,-19.64,-21.35,-22.82,-38.28,-12.57,-22.24,-13.8,-21.07,-17.74,-23.87,-21.29,-22.2,-15.24,-17.82,-32.14,-19.3,-33.09,-20.18,-17.46,-17.44,-24.71,-21.53,-19.17,-28.05,-23.39,-22.33,-15.28,-20.27,-10.96,-21.52,-19.57,-23.08,-25.06,-17.85,-15.99,-20.56,-17.98,-18.4,-27.64,-20.99,-14.86,-29.33,-25.81,-14.1,-17.63,-23.47,-23.92,-20.88,-20.25,-19.33,-18.14,-22.41,-20.77,-17.95,-20.83,-27.84,-19.94,-23.6,-23.7,-30.39,-18.98,-27.89,-23.5,-23.73,-17.93,-35.94,-18.68,-23.47,-23.49,-23.85,-27.08,-20.88,-20.97,-21.71,-23.9,-15.78,-12.57,-19.69,-22.04,-17.99,-23.5,-21.4,-15.86,-23.95,-25.79,-23.75,-24.1,-18.56,-23.3,-17.03,-20.77,-28.1,-18.83,-23,-20.82,-22.95,-28.22,-27.99,-15.54,-12.37,-22.33,-22.7,-17.86,-16,-20.73,-15.45,-20.05,-17.95,-17.7,-25.93,-12.28,-20.13,-17.4,-21.59],[181.62,181.03,184.1,181.66,181.96,184.31,166.1,181.93,181.74,179.59,180.69,167,182.11,181.66,169.92,184.95,165.96,181.5,179.78,180.31,181.16,166.32,180.16,182,180.28,181.49,167.51,180.79,181.47,182.37,179.24,166.74,185.05,180.8,186,179.33,169.23,181.28,181.4,169.33,176.78,186.1,179.82,186.04,169.41,182.3,181.7,166.32,180.08,185.25,182.35,184.42,173.2,180.67,182.16,182.13,181,180.6,181.35,179.2,181.55,182.4,172.38,166.22,181.41,184.93,181.6,179.62,181.86,187.81,185.8,184.35,166.2,179.99,181.23,180.04,184.7,167.06,181.71,181.11,180.21,180.99,182.38,183.4,181.7,184.31,170.5,179.96,186.3,186.44,167.53,167.06,182.02,169.71,185.26,182.4,181.11,183.41,166.54,179.92,185.61,178.41,180.39,181.6,180.69,183.5,180.6,169.49,185.9,177.81,185.23,182.31,182.45,178.3,178.35,178.31,172.23,172.29,167.4,169.48,166.97,178.9,180.4,182.43,180.6,167.89,183.84,178.57,181.7,183.51,185.43,181.22,168.98,180.3,180.82,168.02,187.32,182.8,182.6,184.16,169.46,181.4,167.1,181.43,173.5,184.4,185.17,173.49,180.17,181.5,184.5,167.62,182.56,165.8,167.68,181.32,166.07,180,169.84,166.24,180.5,179.52,167.16,180.2,179.9,179.43,182.12,183.84,180,169.42,181.83,180.34,180.9,184.68,182.29,180.2,180.64,185.16,181.48,184.24,181.75,183.5,184.3,183,181.85,187.09,181.9,181.85,179.88,185.13,184.09,169.31,182,179.5,179.61,181.19,182.53,182.75,181.74,180.3,182.18,182.2,183.59,183.35,169.09,182.32,180.54,181.69,180.62,182.3,180.13,184.1,181.71,185.68,180.27,181.58,182.4,181.52,183.83,182.39,185.7,171.65,184.48,182.1,180.16,166.66,182.9,185.75,182.53,171.52,180.94,180.81,182.82,185.35,180.13,179.93,182.68,180.63,166.53,180.22,182.74,182.84,166,183.68,185.51,181.67,181.65,186.9,180.01,169.5,166.26,167.24,181.38,170.4,182.1,180.88,184.89,169.33,179.36,179.89,184.23,181.51,169.01,181.47,183.05,184.2,167.24,168.8,182.37,180.85,181.41,180.38,179.9,181.99,180.38,181.4,180.18,179.22,180.52,182.51,180.1,180.54,177.77,185,184.68,179.85,180.6,185.32,181.57,182.28,181.49,166.2,181.5,179.69,186.21,185.86,178.4,181.51,181.2,169.32,169.28,184.14,185.74,181.38,171.39,179.7,181.36,180.53,181.39,181.5,169.58,169.63,181.91,181.41,183.78,181.02,181.03,169.24,179.5,167.1,167.32,183.48,182.04,182.31,166.36,182.3,181.2,165.77,185.77,166.24,183.87,180,182.6,166.6,179.07,182.18,182.1,182.18,182.38,182.18,182.28,181.7,182.5,182.5,182.39,182.47,182.4,182.39,185.48,182.43,182.61,166.29,181.32,182.02,182.36,181.32,171.4,182.68,182.53,166.47,181.58,185.72,179.6,179.9,169.21,183.61,182.37,183.2,182.51,182.93,179.99,184.08,181.09,181.4,184.06,186.75,181.6,186.66,186.42,186.71,167.95,167.14,182.82,167.33,182.01,181.66,181.49,180.98,165.99,183.88,186.16,183.68,181.26,181.9,181.2,179.6,181.42,188.13,181.3,170.3,182.16,166.14,181.4,178.59,184.5,181.5,182.3,167.51,180.23,181.6,186.8,184.56,169.14,180.1,185.2,167.26,167.26,181.7,181.8,186.2,180.38,182.77,186.8,179.71,180.9,182.4,181.24,182.6,169.15,180.96,183.4,180.26,182.23,178.47,183.2,182.93,169.48,182.3,182.04,185.32,166.37,184.68,168.52,182.54,183.81,183.52,185.64,181.59,181.5,180.15,182.5,179.68,167.7,182.8,184.7,167.32,181.59,185.6,179.99,180.63,186.8,180.62,180.7,180.86,181.16,181.9,167.5,185.43,181.11,180.57,184.36,185.48,185.94,166.06,185.9,181.6,177.47,183.2,180.23,185.2,180.68,184.87,183.3,181.21,181.3,183.4,180.5,181.2,181.13,170.62,181.63,169.04,180.23,183.54,185.31,172.91,185.3,181.2,180.22,184.46,187.1,186.3,183.81,166.87,180.09,182.3,165.98,165.96,165.76,180.02,183.63,184.28,187,180.17,181.82,187.2,166.02,184.52,186.9,179.79,185.77,182.54,183.33,167.38,181.15,180.84,167.18,167.01,183.13,180.8,167.01,166.83,183.2,166.94,184.6,167.25,181.31,166.69,167.34,181.59,167.42,166.9,166.85,166.8,166.91,167.54,166.18,181.91,187.15,181.41,182.22,168.71,166.62,184.61,184.6,184.42,184.46,183.95,180.47,166.49,181.57,184.47,182.1,182.8,180.97,183.91,182.26,181.18,183.84,179.82,167.26,187.55,182.41,186.51,182.04,187.8,181.31,181.69,182.64,183.4,167.16,181.33,166.36,181.87,181.25,186.74,168.75,179.87,181.42,179.27,181.06,181.9,167.15,166.28,185,169.76,166.78,182.93,182.39,184.03,181.96,182.25,180.81,180.86,174.46,179.8,185.5,185.62,180.92,180.2,182.4,170.99,168.98,181.87,186.26,181.53,184.91,168.69,181.54,165.67,181.3,179.1,179.02,180.31,171.5,179.91,181.75,179.86,172.65,182.37,181.02,183.47,183.59,180.92,183.22,182.21,183.97,167.39,186.54,180.18,181.09,167.91,183.4,185.01,181.41,184,176.03,186.73,177.52,181.38,181.88,181.98,166.07,180.12,170.34,171.72,180.98,182.1,180.6,180.58,180.8,182.3,180.87,180.11,181.04,180.87,180.98,184.83,180.09,184.28,181.32,166.1,181.71,182.62,167.1,182.85,186.08,180.24,179.15,181.66,169.37,184.27,180.94,181.74,186.4,169.1,181.24,183.32,181.54,181.5,181.4,182.41,182.44,181.53,179.86,179.9,181.58,185.19,167.32,181.57,167.18,177.01,181.51,180,184.48,187.48,179.98,186.78,183.23,181.72,186.73,167.91,185.86,170.45,180.49,172.76,181.51,182.5,185.27,182.9,171.4,181.48,178.3,178.29,168.08,169.71,182.8,182.78,180,181.69,181.48,181.2,180.8,179.67,167.24,186.87,183.95,178.42,181.4,181.17,181.61,186.83,185.3,175.7,183,181.59,181.3,183.34,180.64,180.3,181.84,185.77,180.85,169.66,180.03,167.03,185.9,185.6,167.43,186.73,184.3,180.92,185.33,183.86,166.75,167.41,184.52,184.51,166.55,186.3,185.1,182.73,184.53,180.77,180.5,181,183.6,180.9,165.8,181.5,171.44,171.46,184.85,186.1,184.62,183.4,166.64,180.27,185.5,181.58,181.65,178.43,181.9,182,180.7,180.6,169.46,182.1,183.8,181.63,184.7,180.21,184.8,169.52,181.06,184.97,181.3,181.75,182.02,179.84,180.89,186.59,167.1,183,181.72,180.49,185.1,186.52,180.67,180.4,179.54,186.36,179.62,182.44,168.93,182.4,166.9,185.3,185.23,183.11,180.9,185.1,184.37,182.44,182.29,185.9,168.63,179.97,185.26,169.44,181.62,185.25,182.65,169.9,180.05,181.23,180.26,179.98,180.48,181.39,185.93,166.56,167.23,186.72,181.41,185.4,171.17,185.17,181.15,167.24,180.78,180.78,181.89,181.7,166.66,169.63,181.37,185.96,174.21,167.02,181.57,167.05,167.01,180.58,181.2,182.43,182.2,181.28,179.77,181.63,184.84,181.4,166.2,166.3,182.69,178.98,169.5,170.04,184.52,177.1,167.11,180.28,166.53,183.78,181.25,180.15,185.8,180.58,185.11,181.27,180,185.86,180.94,181.62,181.42,181.33,179.85,170.52,169.53,182.39,179.97,171.51,185.98,181.51,165.97,169.75,184.47,183.45,182.8,181.44,167.95,184.41,181.61,181.77,182.22,181.02,167.32,182.72,182.54,166.01,185.13,180.21,180.21,185.18,184.75,186.16,181.71,183.99,181.16,181.73,181.01,182.1,182.39,183.99,184.13,182.4,182.32,182.92,184.9,184.49,181.62,178.52,184.5,179.95,180.06,180.26,183.44,184.95,181.2,183.58,184.6,167.44,166.72,184.23,183.95,181.59,180.13,180.74,166.98,184.64,182.38,184.5,184.5,169.05,184.68,185.74,183.71,183.5,182.26,170.7,181.67,170.56,183.6,183.5,187.15,166.93,171.66,170.3,181.3,184.53,181.42,181.42,183.86,181.37,188.1,179.54,167.06,184.2,187.8,170.56],[12619.1468896039,3169.78638492223,50237.7286301916,2517.85082358833,2000,2000,12619.1468896039,5023.77286301917,10023.7446725455,3990.52462993776,5023.77286301917,7962.14341106994,5023.77286301917,5023.77286301917,251785.082358833,3990.52462993776,200000,6324.55532033676,5023.77286301917,5023.77286301917,6324.55532033676,3169.78638492223,5023.77286301917,10023.7446725455,50237.7286301916,2000,7962.14341106994,31697.8638492223,6324.55532033676,5023.77286301917,7962.14341106994,10023.7446725455,12619.1468896039,2000,6324.55532033676,3990.52462993776,6324.55532033676,7962.14341106994,2517.85082358833,5023.77286301917,10023.7446725455,7962.14341106994,5023.77286301917,3990.52462993776,7962.14341106994,15886.5646944856,6324.55532033676,5023.77286301917,3990.52462993776,25178.5082358833,3169.78638492223,2000,7962.14341106994,3990.52462993776,3169.78638492223,5023.77286301917,6324.55532033676,2000,5023.77286301917,3990.52462993776,10023.7446725455,2517.85082358833,20000,7962.14341106994,15886.5646944856,10023.7446725455,2517.85082358833,20000,6324.55532033676,63245.5532033676,2000,6324.55532033676,3990.52462993776,31697.8638492223,5023.77286301917,3990.52462993776,2517.85082358833,6324.55532033676,3169.78638492223,39905.2462993776,31697.8638492223,6324.55532033676,7962.14341106994,3990.52462993776,2000,3990.52462993776,10023.7446725455,6324.55532033676,3169.78638492223,3990.52462993776,25178.5082358833,10023.7446725455,31697.8638492223,3169.78638492223,3169.78638492223,2000,6324.55532033676,31697.8638492223,25178.5082358833,10023.7446725455,2517.85082358833,7962.14341106994,10023.7446725455,10023.7446725455,7962.14341106994,3169.78638492223,5023.77286301917,7962.14341106994,100237.446725455,20000,6324.55532033676,3169.78638492223,2000,12619.1468896039,5023.77286301917,3169.78638492223,39905.2462993776,10023.7446725455,12619.1468896039,3169.78638492223,12619.1468896039,3990.52462993776,10023.7446725455,6324.55532033676,5023.77286301917,25178.5082358833,3169.78638492223,20000,12619.1468896039,3990.52462993776,6324.55532033676,3169.78638492223,6324.55532033676,7962.14341106994,3990.52462993776,10023.7446725455,25178.5082358833,7962.14341106994,15886.5646944856,3169.78638492223,7962.14341106994,2000,20000,5023.77286301917,3169.78638492223,3169.78638492223,5023.77286301917,15886.5646944856,39905.2462993776,2000,100237.446725455,502377.286301916,3990.52462993776,3169.78638492223,10023.7446725455,10023.7446725455,3169.78638492223,3990.52462993776,15886.5646944856,7962.14341106994,2517.85082358833,12619.1468896039,7962.14341106994,7962.14341106994,12619.1468896039,20000,79621.4341106994,39905.2462993776,10023.7446725455,6324.55532033676,3990.52462993776,7962.14341106994,2517.85082358833,2517.85082358833,2517.85082358833,100237.446725455,20000,6324.55532033676,2517.85082358833,7962.14341106994,6324.55532033676,3990.52462993776,5023.77286301917,3169.78638492223,2517.85082358833,15886.5646944856,3990.52462993776,15886.5646944856,7962.14341106994,7962.14341106994,39905.2462993776,10023.7446725455,7962.14341106994,2517.85082358833,7962.14341106994,3169.78638492223,7962.14341106994,6324.55532033676,3990.52462993776,31697.8638492223,3990.52462993776,2000,10023.7446725455,6324.55532033676,6324.55532033676,3990.52462993776,31697.8638492223,6324.55532033676,10023.7446725455,3169.78638492223,10023.7446725455,3990.52462993776,2517.85082358833,50237.7286301916,3990.52462993776,3990.52462993776,3169.78638492223,7962.14341106994,5023.77286301917,3169.78638492223,10023.7446725455,7962.14341106994,15886.5646944856,3169.78638492223,6324.55532033676,15886.5646944856,3169.78638492223,6324.55532033676,20000,20000,10023.7446725455,3990.52462993776,5023.77286301917,15886.5646944856,6324.55532033676,2000,5023.77286301917,20000,10023.7446725455,12619.1468896039,6324.55532033676,2517.85082358833,39905.2462993776,12619.1468896039,20000,7962.14341106994,3990.52462993776,10023.7446725455,39905.2462993776,3169.78638492223,10023.7446725455,6324.55532033676,25178.5082358833,15886.5646944856,5023.77286301917,3169.78638492223,7962.14341106994,10023.7446725455,3169.78638492223,15886.5646944856,25178.5082358833,10023.7446725455,5023.77286301917,5023.77286301917,3169.78638492223,15886.5646944856,7962.14341106994,5023.77286301917,7962.14341106994,6324.55532033676,5023.77286301917,15886.5646944856,2517.85082358833,3169.78638492223,100237.446725455,7962.14341106994,20000,3990.52462993776,6324.55532033676,31697.8638492223,5023.77286301917,3169.78638492223,7962.14341106994,2000,5023.77286301917,10023.7446725455,3169.78638492223,10023.7446725455,6324.55532033676,20000,20000,12619.1468896039,7962.14341106994,7962.14341106994,20000,20000,79621.4341106994,2000,2000,7962.14341106994,5023.77286301917,12619.1468896039,10023.7446725455,7962.14341106994,3990.52462993776,10023.7446725455,2517.85082358833,15886.5646944856,7962.14341106994,12619.1468896039,15886.5646944856,25178.5082358833,50237.7286301916,6324.55532033676,15886.5646944856,5023.77286301917,2517.85082358833,39905.2462993776,6324.55532033676,15886.5646944856,12619.1468896039,31697.8638492223,5023.77286301917,5023.77286301917,15886.5646944856,5023.77286301917,3169.78638492223,7962.14341106994,7962.14341106994,39905.2462993776,39905.2462993776,6324.55532033676,5023.77286301917,20000,25178.5082358833,6324.55532033676,6324.55532033676,50237.7286301916,6324.55532033676,10023.7446725455,3169.78638492223,12619.1468896039,6324.55532033676,3990.52462993776,3990.52462993776,3990.52462993776,7962.14341106994,6324.55532033676,20000,7962.14341106994,7962.14341106994,15886.5646944856,2517.85082358833,63245.5532033676,10023.7446725455,20000,25178.5082358833,63245.5532033676,7962.14341106994,10023.7446725455,3169.78638492223,2000,50237.7286301916,3990.52462993776,5023.77286301917,7962.14341106994,25178.5082358833,6324.55532033676,3169.78638492223,2517.85082358833,25178.5082358833,50237.7286301916,25178.5082358833,25178.5082358833,5023.77286301917,100237.446725455,5023.77286301917,25178.5082358833,7962.14341106994,63245.5532033676,25178.5082358833,5023.77286301917,20000,20000,25178.5082358833,25178.5082358833,3169.78638492223,6324.55532033676,2000,15886.5646944856,3990.52462993776,12619.1468896039,5023.77286301917,3169.78638492223,15886.5646944856,3169.78638492223,39905.2462993776,20000,100237.446725455,39905.2462993776,10023.7446725455,7962.14341106994,3990.52462993776,50237.7286301916,5023.77286301917,3990.52462993776,3990.52462993776,10023.7446725455,5023.77286301917,3169.78638492223,6324.55532033676,12619.1468896039,12619.1468896039,3990.52462993776,5023.77286301917,25178.5082358833,5023.77286301917,5023.77286301917,3990.52462993776,12619.1468896039,3990.52462993776,6324.55532033676,2517.85082358833,25178.5082358833,10023.7446725455,7962.14341106994,10023.7446725455,7962.14341106994,5023.77286301917,3169.78638492223,2517.85082358833,10023.7446725455,2000,12619.1468896039,5023.77286301917,3990.52462993776,5023.77286301917,6324.55532033676,6324.55532033676,10023.7446725455,3990.52462993776,10023.7446725455,12619.1468896039,7962.14341106994,25178.5082358833,10023.7446725455,3990.52462993776,25178.5082358833,63245.5532033676,6324.55532033676,3990.52462993776,3990.52462993776,10023.7446725455,3990.52462993776,3990.52462993776,7962.14341106994,6324.55532033676,6324.55532033676,50237.7286301916,7962.14341106994,5023.77286301917,20000,31697.8638492223,5023.77286301917,25178.5082358833,5023.77286301917,5023.77286301917,12619.1468896039,5023.77286301917,10023.7446725455,10023.7446725455,5023.77286301917,3990.52462993776,20000,6324.55532033676,7962.14341106994,50237.7286301916,7962.14341106994,6324.55532033676,5023.77286301917,6324.55532033676,2517.85082358833,2000,15886.5646944856,2517.85082358833,31697.8638492223,5023.77286301917,2517.85082358833,15886.5646944856,7962.14341106994,6324.55532033676,12619.1468896039,3169.78638492223,3169.78638492223,2517.85082358833,63245.5532033676,5023.77286301917,12619.1468896039,3169.78638492223,12619.1468896039,15886.5646944856,7962.14341106994,6324.55532033676,5023.77286301917,7962.14341106994,3169.78638492223,10023.7446725455,5023.77286301917,6324.55532033676,15886.5646944856,10023.7446725455,63245.5532033676,10023.7446725455,7962.14341106994,2517.85082358833,10023.7446725455,7962.14341106994,3990.52462993776,5023.77286301917,10023.7446725455,3990.52462993776,2517.85082358833,10023.7446725455,6324.55532033676,63245.5532033676,6324.55532033676,7962.14341106994,25178.5082358833,5023.77286301917,10023.7446725455,63245.5532033676,7962.14341106994,2000,7962.14341106994,12619.1468896039,10023.7446725455,10023.7446725455,3169.78638492223,50237.7286301916,7962.14341106994,63245.5532033676,3169.78638492223,6324.55532033676,6324.55532033676,12619.1468896039,7962.14341106994,50237.7286301916,7962.14341106994,20000,3990.52462993776,3990.52462993776,12619.1468896039,10023.7446725455,10023.7446725455,12619.1468896039,3169.78638492223,3169.78638492223,158865.646944856,7962.14341106994,6324.55532033676,15886.5646944856,10023.7446725455,15886.5646944856,39905.2462993776,3169.78638492223,3169.78638492223,6324.55532033676,31697.8638492223,6324.55532033676,79621.4341106994,31697.8638492223,12619.1468896039,6324.55532033676,20000,5023.77286301917,6324.55532033676,7962.14341106994,6324.55532033676,31697.8638492223,25178.5082358833,12619.1468896039,3990.52462993776,25178.5082358833,10023.7446725455,7962.14341106994,12619.1468896039,7962.14341106994,5023.77286301917,7962.14341106994,25178.5082358833,3990.52462993776,5023.77286301917,10023.7446725455,12619.1468896039,2517.85082358833,7962.14341106994,15886.5646944856,2000,10023.7446725455,10023.7446725455,31697.8638492223,7962.14341106994,7962.14341106994,15886.5646944856,100237.446725455,10023.7446725455,5023.77286301917,15886.5646944856,12619.1468896039,7962.14341106994,5023.77286301917,12619.1468896039,10023.7446725455,3169.78638492223,25178.5082358833,12619.1468896039,15886.5646944856,25178.5082358833,3990.52462993776,5023.77286301917,10023.7446725455,10023.7446725455,39905.2462993776,25178.5082358833,15886.5646944856,6324.55532033676,10023.7446725455,3169.78638492223,25178.5082358833,12619.1468896039,3169.78638492223,12619.1468896039,5023.77286301917,6324.55532033676,3990.52462993776,79621.4341106994,2000,20000,3169.78638492223,7962.14341106994,7962.14341106994,6324.55532033676,20000,10023.7446725455,7962.14341106994,12619.1468896039,7962.14341106994,5023.77286301917,79621.4341106994,3169.78638492223,50237.7286301916,12619.1468896039,79621.4341106994,5023.77286301917,10023.7446725455,7962.14341106994,25178.5082358833,7962.14341106994,6324.55532033676,3169.78638492223,12619.1468896039,15886.5646944856,63245.5532033676,20000,3169.78638492223,31697.8638492223,12619.1468896039,5023.77286301917,12619.1468896039,5023.77286301917,2517.85082358833,15886.5646944856,7962.14341106994,6324.55532033676,39905.2462993776,12619.1468896039,7962.14341106994,12619.1468896039,10023.7446725455,15886.5646944856,39905.2462993776,5023.77286301917,7962.14341106994,3990.52462993776,5023.77286301917,3169.78638492223,2517.85082358833,3169.78638492223,20000,2517.85082358833,3990.52462993776,31697.8638492223,3169.78638492223,6324.55532033676,5023.77286301917,5023.77286301917,20000,2000,12619.1468896039,20000,3169.78638492223,31697.8638492223,31697.8638492223,6324.55532033676,3990.52462993776,6324.55532033676,7962.14341106994,25178.5082358833,5023.77286301917,3990.52462993776,10023.7446725455,79621.4341106994,15886.5646944856,25178.5082358833,7962.14341106994,5023.77286301917,12619.1468896039,3169.78638492223,10023.7446725455,2517.85082358833,10023.7446725455,2000,15886.5646944856,20000,6324.55532033676,5023.77286301917,2000,6324.55532033676,10023.7446725455,5023.77286301917,10023.7446725455,10023.7446725455,2000,3169.78638492223,6324.55532033676,10023.7446725455,6324.55532033676,2517.85082358833,7962.14341106994,3990.52462993776,7962.14341106994,31697.8638492223,7962.14341106994,10023.7446725455,20000,31697.8638492223,5023.77286301917,7962.14341106994,6324.55532033676,2000,3169.78638492223,39905.2462993776,158865.646944856,15886.5646944856,6324.55532033676,5023.77286301917,50237.7286301916,39905.2462993776,25178.5082358833,2517.85082358833,3990.52462993776,6324.55532033676,2517.85082358833,25178.5082358833,39905.2462993776,6324.55532033676,2517.85082358833,5023.77286301917,10023.7446725455,2000,25178.5082358833,2000,3990.52462993776,3990.52462993776,2000,2517.85082358833,5023.77286301917,3990.52462993776,3169.78638492223,2000,6324.55532033676,10023.7446725455,20000,3990.52462993776,25178.5082358833,10023.7446725455,39905.2462993776,20000,6324.55532033676,20000,2517.85082358833,15886.5646944856,2517.85082358833,2000,5023.77286301917,6324.55532033676,5023.77286301917,6324.55532033676,3990.52462993776,3990.52462993776,20000,6324.55532033676,6324.55532033676,5023.77286301917,6324.55532033676,2517.85082358833,15886.5646944856,10023.7446725455,3990.52462993776,7962.14341106994,7962.14341106994,31697.8638492223,6324.55532033676,3990.52462993776,7962.14341106994,2000,6324.55532033676,12619.1468896039,7962.14341106994,2517.85082358833,15886.5646944856,10023.7446725455,2517.85082358833,3990.52462993776,5023.77286301917,2000,12619.1468896039,5023.77286301917,5023.77286301917,7962.14341106994,3169.78638492223,2517.85082358833,3169.78638492223,2000,2517.85082358833,2517.85082358833,10023.7446725455,12619.1468896039,25178.5082358833,20000,12619.1468896039,5023.77286301917,20000,31697.8638492223,3169.78638492223,2517.85082358833,12619.1468896039,6324.55532033676,20000,25178.5082358833,2517.85082358833,10023.7446725455,31697.8638492223,12619.1468896039,6324.55532033676,2000,10023.7446725455,2517.85082358833,3990.52462993776,3990.52462993776,2000,10023.7446725455,2517.85082358833,3169.78638492223,12619.1468896039,12619.1468896039,3169.78638492223,3169.78638492223,100237.446725455,200000,3169.78638492223,6324.55532033676,15886.5646944856,5023.77286301917,2000,3990.52462993776,3169.78638492223,6324.55532033676,12619.1468896039,5023.77286301917,3169.78638492223,3169.78638492223,20000,3169.78638492223,31697.8638492223,6324.55532033676,7962.14341106994,20000,20000,50237.7286301916,12619.1468896039,3169.78638492223,63245.5532033676,3990.52462993776,2517.85082358833,5023.77286301917,15886.5646944856,6324.55532033676,15886.5646944856,2000,6324.55532033676,20000,15886.5646944856,6324.55532033676,3169.78638492223,3169.78638492223,3169.78638492223,31697.8638492223,3990.52462993776,25178.5082358833,7962.14341106994,7962.14341106994,5023.77286301917,5023.77286301917,15886.5646944856,25178.5082358833,3169.78638492223,10023.7446725455,2000,79621.4341106994,39905.2462993776,20000,3990.52462993776,2517.85082358833,25178.5082358833,6324.55532033676,15886.5646944856,50237.7286301916,10023.7446725455,12619.1468896039,6324.55532033676,3169.78638492223,7962.14341106994,7962.14341106994,79621.4341106994,50237.7286301916,2000,31697.8638492223,3169.78638492223,10023.7446725455,3990.52462993776,12619.1468896039,7962.14341106994,50237.7286301916,12619.1468896039,7962.14341106994,3169.78638492223,63245.5532033676,10023.7446725455,10023.7446725455,6324.55532033676,63245.5532033676,6324.55532033676,2517.85082358833,2000,3990.52462993776,10023.7446725455,15886.5646944856,6324.55532033676,10023.7446725455,6324.55532033676,12619.1468896039,3990.52462993776,2517.85082358833,50237.7286301916,2517.85082358833,12619.1468896039,3169.78638492223,12619.1468896039,50237.7286301916,5023.77286301917,31697.8638492223,10023.7446725455,15886.5646944856,15886.5646944856,3169.78638492223,5023.77286301917,5023.77286301917,3990.52462993776,15886.5646944856,20000,10023.7446725455,15886.5646944856,3990.52462993776,6324.55532033676,3169.78638492223,31697.8638492223,12619.1468896039,2000,10023.7446725455,3990.52462993776,3990.52462993776,15886.5646944856,2000,3169.78638492223,5023.77286301917,10023.7446725455,6324.55532033676,6324.55532033676,200000],null,"Quakes",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null,null]},{"method":"addPolygons","args":[[[[{"lng":[182.4,181.8,180.2,177.1,175.7,166,165.67,165.77,165.99,187.2,187.81,188.13,188.1],"lat":[-33,-34.1,-35.56,-38.28,-38.59,-14.7,-12.85,-10.78,-10.72,-15.17,-15.46,-15.87,-17.7]}]]],null,"Outline",{"interactive":true,"className":"","stroke":true,"color":"#FFFFCC","weight":2,"opacity":0.5,"fill":false,"fillColor":"#FFFFCC","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["OSM (default)","Toner","Toner Lite"],["Quakes","Outline"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]}],"limits":{"lat":[-38.59,-10.72],"lng":[165.67,188.13]}},"evals":[],"jsHooks":[]}</script>
</div>
<p>The <code>addLayersControl</code> function distinguishes between <em>base groups</em>, which can only be viewed one group at a time, and <em>overlay groups</em>, which can be individually checked or unchecked.</p>
<p>Although base groups are generally tile layers, and overlay groups are usually markers and shapes, there is no restriction on what types of layers can be placed in each category.</p>
<p>Only one layers control can be present on a map at a time. If you call <code>addLayersControl</code> multiple times, the last call will win.</p>
<h3 id="programmatic-layer-display">Programmatic Layer Display</h3>
<p>You can use the <code>showGroup</code> and <code>hideGroup</code> functions to show and hide groups from code. This mostly makes sense in a <a href="https://rstudio.github.io/leaflet/shiny.html">Shiny context with <code>leafletProxy</code></a>, where perhaps you might toggle group visibility based on input controls in a sidebar.</p>
<p>You can also use <code>showGroup</code>/<code>hideGroup</code> in conjuction with <code>addLayersControl</code> to set which groups are checked by default.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>map</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/showGroup.html'>hideGroup</a></span><span class='op'>(</span><span class='st'>"Outline"</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-e81791c06ea7a2612d27" style="width:624px;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-e81791c06ea7a2612d27">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,"OSM (default)",{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addProviderTiles","args":["Stamen.Toner",null,"Toner",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Stamen.TonerLite",null,"Toner Lite",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircles","args":[[-20.42,-20.62,-26,-17.97,-20.42,-19.68,-11.7,-28.11,-28.74,-17.47,-21.44,-12.26,-18.54,-21,-20.7,-15.94,-13.64,-17.83,-23.5,-22.63,-20.84,-10.98,-23.3,-30.2,-19.66,-17.94,-14.72,-16.46,-20.97,-19.84,-22.58,-16.32,-15.55,-23.55,-16.3,-25.82,-18.73,-17.64,-17.66,-18.82,-37.37,-15.31,-24.97,-15.49,-19.23,-30.1,-26.4,-11.77,-24.12,-18.97,-18.75,-19.26,-22.75,-21.37,-20.1,-19.85,-22.7,-22.06,-17.8,-24.2,-20.69,-21.16,-13.82,-11.49,-20.68,-17.1,-20.14,-21.96,-20.42,-15.46,-15.31,-19.86,-11.55,-23.74,-17.7,-23.54,-19.21,-12.11,-21.81,-28.98,-34.02,-23.84,-19.57,-20.12,-17.7,-19.66,-21.5,-23.64,-15.43,-15.41,-15.48,-13.36,-20.64,-19.72,-15.44,-19.73,-27.24,-18.16,-13.66,-24.57,-16.98,-26.2,-21.88,-33,-21.33,-19.44,-34.89,-20.24,-22.55,-36.95,-15.75,-16.85,-19.06,-26.11,-26.2,-26.13,-13.66,-13.47,-14.6,-18.96,-14.65,-19.9,-22.05,-19.22,-31.24,-17.93,-19.3,-26.53,-27.72,-19.19,-17.43,-17.05,-19.52,-23.71,-21.3,-16.24,-16.14,-23.95,-25.2,-18.84,-12.66,-20.65,-13.23,-29.91,-14.31,-20.1,-17.8,-21.27,-23.58,-17.9,-23.34,-15.56,-23.83,-11.8,-15.54,-20.65,-11.75,-24.81,-20.9,-11.34,-17.98,-24.34,-13.86,-35.56,-35.48,-34.2,-26,-19.89,-23.43,-18.89,-17.82,-25.68,-20.2,-15.2,-15.03,-32.22,-22.64,-17.42,-17.84,-15.02,-18.04,-24.6,-19.88,-20.3,-20.45,-17.67,-22.3,-19.85,-24.27,-15.85,-20.02,-18.56,-17.87,-24.08,-32.2,-20.36,-23.85,-24,-20.41,-17.72,-19.67,-17.7,-16.23,-26.72,-12.95,-21.97,-21.96,-20.32,-30.28,-20.2,-30.66,-16.17,-28.25,-20.47,-23.55,-20.94,-26.67,-18.13,-20.21,-18.31,-16.52,-22.36,-22.43,-20.37,-23.77,-13.65,-21.55,-16.24,-23.73,-22.34,-19.4,-24.64,-16,-19.62,-23.84,-23.54,-28.23,-21.68,-13.44,-24.96,-20.08,-24.36,-14.7,-18.2,-16.65,-18.11,-17.95,-15.5,-23.36,-19.15,-10.97,-14.85,-17.8,-22.5,-29.1,-20.32,-16.09,-19.18,-23.81,-23.79,-19.02,-20.9,-19.06,-17.88,-19.41,-26.17,-14.95,-18.73,-20.21,-21.29,-19.76,-22.09,-23.8,-20.16,-22.13,-17.44,-23.33,-24.78,-22,-19.13,-30.72,-22.32,-16.45,-17.7,-17.95,-24.4,-19.3,-21.13,-18.07,-20.6,-18.48,-13.34,-20.92,-25.31,-15.24,-16.4,-24.57,-17.94,-30.64,-18.64,-13.09,-19.68,-16.44,-21.09,-14.99,-23.3,-17.68,-22,-21.38,-32.62,-13.05,-12.93,-18.6,-21.34,-21.48,-17.4,-17.32,-18.77,-26.16,-12.59,-14.82,-21.79,-19.83,-29.5,-12.49,-26.1,-21.04,-10.78,-20.76,-11.41,-19.1,-23.91,-27.33,-12.25,-23.49,-27.18,-25.8,-27.19,-27.27,-27.1,-27.22,-27.38,-27.27,-27.54,-27.2,-27.71,-27.6,-27.38,-21.54,-27.21,-28.96,-12.01,-17.46,-30.17,-27.27,-17.79,-22.19,-17.1,-27.18,-11.64,-17.98,-16.9,-21.98,-32.14,-18.8,-26.78,-20.43,-18.3,-15.83,-23.44,-23.73,-19.89,-17.59,-19.77,-20.31,-15.33,-18.2,-15.36,-15.29,-15.36,-16.24,-13.47,-25.5,-14.32,-20.04,-28.83,-17.82,-27.23,-10.72,-27,-20.36,-27.17,-20.94,-17.46,-21.04,-23.7,-17.72,-15.87,-17.84,-13.45,-30.8,-11.63,-30.4,-26.18,-15.7,-17.95,-20.51,-15.36,-23.61,-33.2,-17.68,-22.24,-20.07,-25.04,-21.5,-14.28,-14.43,-32.7,-34.1,-19.7,-24.19,-26.6,-17.04,-22.1,-32.6,-33,-20.58,-20.61,-19.47,-17.47,-18.4,-23.33,-18.55,-26.16,-21.8,-27.63,-18.89,-20.3,-20.56,-16.1,-12.66,-21.05,-17.97,-19.83,-22.55,-22.28,-15.72,-20.85,-21.11,-25.31,-26.46,-24.09,-16.96,-23.19,-20.81,-15.03,-18.06,-19,-23.53,-18.18,-15.66,-18,-18.08,-18.05,-29.9,-20.9,-15.61,-16.03,-17.68,-31.94,-19.14,-18,-16.95,-10.79,-20.83,-32.9,-37.93,-29.09,-23.56,-19.6,-21.39,-14.85,-22.7,-32.42,-17.9,-23.58,-34.4,-17.61,-21.07,-13.84,-30.24,-18.49,-23.45,-16.04,-17.14,-22.54,-15.9,-30.04,-24.03,-18.89,-16.51,-20.1,-21.06,-13.07,-23.46,-19.41,-11.81,-11.76,-12.08,-25.59,-26.54,-20.9,-16.99,-23.46,-17.81,-15.17,-11.67,-20.75,-19.5,-26.18,-20.66,-19.22,-24.68,-15.43,-32.45,-21.31,-15.44,-13.26,-15.26,-33.57,-15.77,-15.79,-21,-16.28,-23.28,-16.1,-17.7,-15.96,-15.95,-17.56,-15.9,-15.29,-15.86,-16.2,-15.71,-16.45,-11.54,-19.61,-15.61,-21.16,-20.65,-20.33,-15.08,-23.28,-23.44,-23.12,-23.65,-22.91,-22.06,-13.56,-17.99,-23.92,-30.69,-21.92,-25.04,-19.92,-27.75,-17.71,-19.6,-34.68,-14.46,-18.85,-17.02,-20.41,-18.18,-16.49,-17.74,-20.49,-18.51,-27.28,-15.9,-20.57,-11.25,-20.04,-20.89,-16.62,-20.09,-24.96,-20.95,-23.31,-20.95,-21.58,-13.62,-12.72,-21.79,-20.48,-12.84,-17.02,-23.89,-23.07,-27.98,-28.1,-21.24,-21.24,-19.89,-32.82,-22,-21.57,-24.5,-33.03,-30.09,-22.75,-17.99,-19.6,-15.65,-17.78,-22.04,-20.06,-18.07,-12.85,-33.29,-34.63,-24.18,-23.78,-22.37,-23.97,-34.12,-25.25,-22.87,-18.48,-21.46,-28.56,-28.56,-21.3,-20.08,-18.82,-19.51,-12.05,-17.4,-23.93,-21.23,-16.23,-28.15,-20.81,-20.72,-23.29,-38.46,-15.48,-37.03,-20.48,-18.12,-18.17,-11.4,-23.1,-14.28,-22.87,-17.59,-27.6,-17.94,-17.88,-30.01,-19.19,-18.14,-23.46,-18.44,-18.21,-18.26,-15.85,-23.82,-18.6,-17.8,-10.78,-18.12,-19.34,-15.34,-24.97,-15.97,-23.47,-23.11,-20.54,-18.92,-20.16,-25.48,-18.19,-15.35,-18.69,-18.89,-17.61,-20.93,-17.6,-17.96,-18.8,-20.61,-20.74,-25.23,-23.9,-18.07,-15.43,-14.3,-18.04,-13.9,-17.64,-17.98,-25,-19.45,-16.11,-23.73,-17.74,-21.56,-20.97,-15.45,-15.93,-21.47,-21.44,-22.16,-13.36,-21.22,-26.1,-18.35,-17.2,-22.42,-17.91,-26.53,-26.5,-16.31,-18.76,-17.1,-19.28,-23.5,-21.26,-17.97,-26.02,-30.3,-24.89,-14.57,-15.4,-22.06,-25.14,-20.3,-25.28,-20.63,-19.02,-22.1,-38.59,-19.3,-31.03,-30.51,-22.55,-22.14,-25.6,-18.04,-21.29,-21.08,-20.64,-24.41,-12.16,-17.1,-21.13,-12.34,-16.43,-20.7,-21.18,-17.78,-21.57,-13.7,-12.27,-19.1,-19.85,-11.37,-20.7,-20.24,-16.4,-19.6,-21.63,-21.6,-21.77,-21.8,-21.05,-10.8,-17.9,-22.26,-22.33,-24.04,-20.4,-15,-27.87,-14.12,-23.61,-21.56,-21.19,-18.07,-26,-20.21,-28,-20.74,-31.8,-18.91,-20.45,-22.9,-18.11,-23.8,-23.42,-23.2,-12.93,-21.14,-19.13,-21.08,-20.07,-20.9,-25.04,-21.85,-19.34,-15.83,-23.73,-18.1,-22.12,-15.39,-16.21,-21.75,-22.1,-24.97,-19.36,-22.14,-21.48,-18.54,-21.62,-13.4,-15.5,-15.67,-21.78,-30.63,-15.7,-19.2,-19.7,-19.4,-15.85,-17.38,-24.33,-20.89,-18.97,-17.99,-15.8,-25.42,-21.6,-26.06,-17.56,-25.63,-25.46,-22.23,-21.55,-15.18,-13.79,-15.18,-18.78,-17.9,-18.5,-14.82,-15.65,-30.01,-13.16,-21.03,-21.4,-17.93,-20.87,-12.01,-19.1,-22.85,-17.08,-21.14,-12.23,-20.91,-11.38,-11.02,-22.09,-17.8,-18.94,-18.85,-21.91,-22.03,-18.1,-18.4,-21.2,-12,-11.7,-26.72,-24.39,-19.64,-21.35,-22.82,-38.28,-12.57,-22.24,-13.8,-21.07,-17.74,-23.87,-21.29,-22.2,-15.24,-17.82,-32.14,-19.3,-33.09,-20.18,-17.46,-17.44,-24.71,-21.53,-19.17,-28.05,-23.39,-22.33,-15.28,-20.27,-10.96,-21.52,-19.57,-23.08,-25.06,-17.85,-15.99,-20.56,-17.98,-18.4,-27.64,-20.99,-14.86,-29.33,-25.81,-14.1,-17.63,-23.47,-23.92,-20.88,-20.25,-19.33,-18.14,-22.41,-20.77,-17.95,-20.83,-27.84,-19.94,-23.6,-23.7,-30.39,-18.98,-27.89,-23.5,-23.73,-17.93,-35.94,-18.68,-23.47,-23.49,-23.85,-27.08,-20.88,-20.97,-21.71,-23.9,-15.78,-12.57,-19.69,-22.04,-17.99,-23.5,-21.4,-15.86,-23.95,-25.79,-23.75,-24.1,-18.56,-23.3,-17.03,-20.77,-28.1,-18.83,-23,-20.82,-22.95,-28.22,-27.99,-15.54,-12.37,-22.33,-22.7,-17.86,-16,-20.73,-15.45,-20.05,-17.95,-17.7,-25.93,-12.28,-20.13,-17.4,-21.59],[181.62,181.03,184.1,181.66,181.96,184.31,166.1,181.93,181.74,179.59,180.69,167,182.11,181.66,169.92,184.95,165.96,181.5,179.78,180.31,181.16,166.32,180.16,182,180.28,181.49,167.51,180.79,181.47,182.37,179.24,166.74,185.05,180.8,186,179.33,169.23,181.28,181.4,169.33,176.78,186.1,179.82,186.04,169.41,182.3,181.7,166.32,180.08,185.25,182.35,184.42,173.2,180.67,182.16,182.13,181,180.6,181.35,179.2,181.55,182.4,172.38,166.22,181.41,184.93,181.6,179.62,181.86,187.81,185.8,184.35,166.2,179.99,181.23,180.04,184.7,167.06,181.71,181.11,180.21,180.99,182.38,183.4,181.7,184.31,170.5,179.96,186.3,186.44,167.53,167.06,182.02,169.71,185.26,182.4,181.11,183.41,166.54,179.92,185.61,178.41,180.39,181.6,180.69,183.5,180.6,169.49,185.9,177.81,185.23,182.31,182.45,178.3,178.35,178.31,172.23,172.29,167.4,169.48,166.97,178.9,180.4,182.43,180.6,167.89,183.84,178.57,181.7,183.51,185.43,181.22,168.98,180.3,180.82,168.02,187.32,182.8,182.6,184.16,169.46,181.4,167.1,181.43,173.5,184.4,185.17,173.49,180.17,181.5,184.5,167.62,182.56,165.8,167.68,181.32,166.07,180,169.84,166.24,180.5,179.52,167.16,180.2,179.9,179.43,182.12,183.84,180,169.42,181.83,180.34,180.9,184.68,182.29,180.2,180.64,185.16,181.48,184.24,181.75,183.5,184.3,183,181.85,187.09,181.9,181.85,179.88,185.13,184.09,169.31,182,179.5,179.61,181.19,182.53,182.75,181.74,180.3,182.18,182.2,183.59,183.35,169.09,182.32,180.54,181.69,180.62,182.3,180.13,184.1,181.71,185.68,180.27,181.58,182.4,181.52,183.83,182.39,185.7,171.65,184.48,182.1,180.16,166.66,182.9,185.75,182.53,171.52,180.94,180.81,182.82,185.35,180.13,179.93,182.68,180.63,166.53,180.22,182.74,182.84,166,183.68,185.51,181.67,181.65,186.9,180.01,169.5,166.26,167.24,181.38,170.4,182.1,180.88,184.89,169.33,179.36,179.89,184.23,181.51,169.01,181.47,183.05,184.2,167.24,168.8,182.37,180.85,181.41,180.38,179.9,181.99,180.38,181.4,180.18,179.22,180.52,182.51,180.1,180.54,177.77,185,184.68,179.85,180.6,185.32,181.57,182.28,181.49,166.2,181.5,179.69,186.21,185.86,178.4,181.51,181.2,169.32,169.28,184.14,185.74,181.38,171.39,179.7,181.36,180.53,181.39,181.5,169.58,169.63,181.91,181.41,183.78,181.02,181.03,169.24,179.5,167.1,167.32,183.48,182.04,182.31,166.36,182.3,181.2,165.77,185.77,166.24,183.87,180,182.6,166.6,179.07,182.18,182.1,182.18,182.38,182.18,182.28,181.7,182.5,182.5,182.39,182.47,182.4,182.39,185.48,182.43,182.61,166.29,181.32,182.02,182.36,181.32,171.4,182.68,182.53,166.47,181.58,185.72,179.6,179.9,169.21,183.61,182.37,183.2,182.51,182.93,179.99,184.08,181.09,181.4,184.06,186.75,181.6,186.66,186.42,186.71,167.95,167.14,182.82,167.33,182.01,181.66,181.49,180.98,165.99,183.88,186.16,183.68,181.26,181.9,181.2,179.6,181.42,188.13,181.3,170.3,182.16,166.14,181.4,178.59,184.5,181.5,182.3,167.51,180.23,181.6,186.8,184.56,169.14,180.1,185.2,167.26,167.26,181.7,181.8,186.2,180.38,182.77,186.8,179.71,180.9,182.4,181.24,182.6,169.15,180.96,183.4,180.26,182.23,178.47,183.2,182.93,169.48,182.3,182.04,185.32,166.37,184.68,168.52,182.54,183.81,183.52,185.64,181.59,181.5,180.15,182.5,179.68,167.7,182.8,184.7,167.32,181.59,185.6,179.99,180.63,186.8,180.62,180.7,180.86,181.16,181.9,167.5,185.43,181.11,180.57,184.36,185.48,185.94,166.06,185.9,181.6,177.47,183.2,180.23,185.2,180.68,184.87,183.3,181.21,181.3,183.4,180.5,181.2,181.13,170.62,181.63,169.04,180.23,183.54,185.31,172.91,185.3,181.2,180.22,184.46,187.1,186.3,183.81,166.87,180.09,182.3,165.98,165.96,165.76,180.02,183.63,184.28,187,180.17,181.82,187.2,166.02,184.52,186.9,179.79,185.77,182.54,183.33,167.38,181.15,180.84,167.18,167.01,183.13,180.8,167.01,166.83,183.2,166.94,184.6,167.25,181.31,166.69,167.34,181.59,167.42,166.9,166.85,166.8,166.91,167.54,166.18,181.91,187.15,181.41,182.22,168.71,166.62,184.61,184.6,184.42,184.46,183.95,180.47,166.49,181.57,184.47,182.1,182.8,180.97,183.91,182.26,181.18,183.84,179.82,167.26,187.55,182.41,186.51,182.04,187.8,181.31,181.69,182.64,183.4,167.16,181.33,166.36,181.87,181.25,186.74,168.75,179.87,181.42,179.27,181.06,181.9,167.15,166.28,185,169.76,166.78,182.93,182.39,184.03,181.96,182.25,180.81,180.86,174.46,179.8,185.5,185.62,180.92,180.2,182.4,170.99,168.98,181.87,186.26,181.53,184.91,168.69,181.54,165.67,181.3,179.1,179.02,180.31,171.5,179.91,181.75,179.86,172.65,182.37,181.02,183.47,183.59,180.92,183.22,182.21,183.97,167.39,186.54,180.18,181.09,167.91,183.4,185.01,181.41,184,176.03,186.73,177.52,181.38,181.88,181.98,166.07,180.12,170.34,171.72,180.98,182.1,180.6,180.58,180.8,182.3,180.87,180.11,181.04,180.87,180.98,184.83,180.09,184.28,181.32,166.1,181.71,182.62,167.1,182.85,186.08,180.24,179.15,181.66,169.37,184.27,180.94,181.74,186.4,169.1,181.24,183.32,181.54,181.5,181.4,182.41,182.44,181.53,179.86,179.9,181.58,185.19,167.32,181.57,167.18,177.01,181.51,180,184.48,187.48,179.98,186.78,183.23,181.72,186.73,167.91,185.86,170.45,180.49,172.76,181.51,182.5,185.27,182.9,171.4,181.48,178.3,178.29,168.08,169.71,182.8,182.78,180,181.69,181.48,181.2,180.8,179.67,167.24,186.87,183.95,178.42,181.4,181.17,181.61,186.83,185.3,175.7,183,181.59,181.3,183.34,180.64,180.3,181.84,185.77,180.85,169.66,180.03,167.03,185.9,185.6,167.43,186.73,184.3,180.92,185.33,183.86,166.75,167.41,184.52,184.51,166.55,186.3,185.1,182.73,184.53,180.77,180.5,181,183.6,180.9,165.8,181.5,171.44,171.46,184.85,186.1,184.62,183.4,166.64,180.27,185.5,181.58,181.65,178.43,181.9,182,180.7,180.6,169.46,182.1,183.8,181.63,184.7,180.21,184.8,169.52,181.06,184.97,181.3,181.75,182.02,179.84,180.89,186.59,167.1,183,181.72,180.49,185.1,186.52,180.67,180.4,179.54,186.36,179.62,182.44,168.93,182.4,166.9,185.3,185.23,183.11,180.9,185.1,184.37,182.44,182.29,185.9,168.63,179.97,185.26,169.44,181.62,185.25,182.65,169.9,180.05,181.23,180.26,179.98,180.48,181.39,185.93,166.56,167.23,186.72,181.41,185.4,171.17,185.17,181.15,167.24,180.78,180.78,181.89,181.7,166.66,169.63,181.37,185.96,174.21,167.02,181.57,167.05,167.01,180.58,181.2,182.43,182.2,181.28,179.77,181.63,184.84,181.4,166.2,166.3,182.69,178.98,169.5,170.04,184.52,177.1,167.11,180.28,166.53,183.78,181.25,180.15,185.8,180.58,185.11,181.27,180,185.86,180.94,181.62,181.42,181.33,179.85,170.52,169.53,182.39,179.97,171.51,185.98,181.51,165.97,169.75,184.47,183.45,182.8,181.44,167.95,184.41,181.61,181.77,182.22,181.02,167.32,182.72,182.54,166.01,185.13,180.21,180.21,185.18,184.75,186.16,181.71,183.99,181.16,181.73,181.01,182.1,182.39,183.99,184.13,182.4,182.32,182.92,184.9,184.49,181.62,178.52,184.5,179.95,180.06,180.26,183.44,184.95,181.2,183.58,184.6,167.44,166.72,184.23,183.95,181.59,180.13,180.74,166.98,184.64,182.38,184.5,184.5,169.05,184.68,185.74,183.71,183.5,182.26,170.7,181.67,170.56,183.6,183.5,187.15,166.93,171.66,170.3,181.3,184.53,181.42,181.42,183.86,181.37,188.1,179.54,167.06,184.2,187.8,170.56],[12619.1468896039,3169.78638492223,50237.7286301916,2517.85082358833,2000,2000,12619.1468896039,5023.77286301917,10023.7446725455,3990.52462993776,5023.77286301917,7962.14341106994,5023.77286301917,5023.77286301917,251785.082358833,3990.52462993776,200000,6324.55532033676,5023.77286301917,5023.77286301917,6324.55532033676,3169.78638492223,5023.77286301917,10023.7446725455,50237.7286301916,2000,7962.14341106994,31697.8638492223,6324.55532033676,5023.77286301917,7962.14341106994,10023.7446725455,12619.1468896039,2000,6324.55532033676,3990.52462993776,6324.55532033676,7962.14341106994,2517.85082358833,5023.77286301917,10023.7446725455,7962.14341106994,5023.77286301917,3990.52462993776,7962.14341106994,15886.5646944856,6324.55532033676,5023.77286301917,3990.52462993776,25178.5082358833,3169.78638492223,2000,7962.14341106994,3990.52462993776,3169.78638492223,5023.77286301917,6324.55532033676,2000,5023.77286301917,3990.52462993776,10023.7446725455,2517.85082358833,20000,7962.14341106994,15886.5646944856,10023.7446725455,2517.85082358833,20000,6324.55532033676,63245.5532033676,2000,6324.55532033676,3990.52462993776,31697.8638492223,5023.77286301917,3990.52462993776,2517.85082358833,6324.55532033676,3169.78638492223,39905.2462993776,31697.8638492223,6324.55532033676,7962.14341106994,3990.52462993776,2000,3990.52462993776,10023.7446725455,6324.55532033676,3169.78638492223,3990.52462993776,25178.5082358833,10023.7446725455,31697.8638492223,3169.78638492223,3169.78638492223,2000,6324.55532033676,31697.8638492223,25178.5082358833,10023.7446725455,2517.85082358833,7962.14341106994,10023.7446725455,10023.7446725455,7962.14341106994,3169.78638492223,5023.77286301917,7962.14341106994,100237.446725455,20000,6324.55532033676,3169.78638492223,2000,12619.1468896039,5023.77286301917,3169.78638492223,39905.2462993776,10023.7446725455,12619.1468896039,3169.78638492223,12619.1468896039,3990.52462993776,10023.7446725455,6324.55532033676,5023.77286301917,25178.5082358833,3169.78638492223,20000,12619.1468896039,3990.52462993776,6324.55532033676,3169.78638492223,6324.55532033676,7962.14341106994,3990.52462993776,10023.7446725455,25178.5082358833,7962.14341106994,15886.5646944856,3169.78638492223,7962.14341106994,2000,20000,5023.77286301917,3169.78638492223,3169.78638492223,5023.77286301917,15886.5646944856,39905.2462993776,2000,100237.446725455,502377.286301916,3990.52462993776,3169.78638492223,10023.7446725455,10023.7446725455,3169.78638492223,3990.52462993776,15886.5646944856,7962.14341106994,2517.85082358833,12619.1468896039,7962.14341106994,7962.14341106994,12619.1468896039,20000,79621.4341106994,39905.2462993776,10023.7446725455,6324.55532033676,3990.52462993776,7962.14341106994,2517.85082358833,2517.85082358833,2517.85082358833,100237.446725455,20000,6324.55532033676,2517.85082358833,7962.14341106994,6324.55532033676,3990.52462993776,5023.77286301917,3169.78638492223,2517.85082358833,15886.5646944856,3990.52462993776,15886.5646944856,7962.14341106994,7962.14341106994,39905.2462993776,10023.7446725455,7962.14341106994,2517.85082358833,7962.14341106994,3169.78638492223,7962.14341106994,6324.55532033676,3990.52462993776,31697.8638492223,3990.52462993776,2000,10023.7446725455,6324.55532033676,6324.55532033676,3990.52462993776,31697.8638492223,6324.55532033676,10023.7446725455,3169.78638492223,10023.7446725455,3990.52462993776,2517.85082358833,50237.7286301916,3990.52462993776,3990.52462993776,3169.78638492223,7962.14341106994,5023.77286301917,3169.78638492223,10023.7446725455,7962.14341106994,15886.5646944856,3169.78638492223,6324.55532033676,15886.5646944856,3169.78638492223,6324.55532033676,20000,20000,10023.7446725455,3990.52462993776,5023.77286301917,15886.5646944856,6324.55532033676,2000,5023.77286301917,20000,10023.7446725455,12619.1468896039,6324.55532033676,2517.85082358833,39905.2462993776,12619.1468896039,20000,7962.14341106994,3990.52462993776,10023.7446725455,39905.2462993776,3169.78638492223,10023.7446725455,6324.55532033676,25178.5082358833,15886.5646944856,5023.77286301917,3169.78638492223,7962.14341106994,10023.7446725455,3169.78638492223,15886.5646944856,25178.5082358833,10023.7446725455,5023.77286301917,5023.77286301917,3169.78638492223,15886.5646944856,7962.14341106994,5023.77286301917,7962.14341106994,6324.55532033676,5023.77286301917,15886.5646944856,2517.85082358833,3169.78638492223,100237.446725455,7962.14341106994,20000,3990.52462993776,6324.55532033676,31697.8638492223,5023.77286301917,3169.78638492223,7962.14341106994,2000,5023.77286301917,10023.7446725455,3169.78638492223,10023.7446725455,6324.55532033676,20000,20000,12619.1468896039,7962.14341106994,7962.14341106994,20000,20000,79621.4341106994,2000,2000,7962.14341106994,5023.77286301917,12619.1468896039,10023.7446725455,7962.14341106994,3990.52462993776,10023.7446725455,2517.85082358833,15886.5646944856,7962.14341106994,12619.1468896039,15886.5646944856,25178.5082358833,50237.7286301916,6324.55532033676,15886.5646944856,5023.77286301917,2517.85082358833,39905.2462993776,6324.55532033676,15886.5646944856,12619.1468896039,31697.8638492223,5023.77286301917,5023.77286301917,15886.5646944856,5023.77286301917,3169.78638492223,7962.14341106994,7962.14341106994,39905.2462993776,39905.2462993776,6324.55532033676,5023.77286301917,20000,25178.5082358833,6324.55532033676,6324.55532033676,50237.7286301916,6324.55532033676,10023.7446725455,3169.78638492223,12619.1468896039,6324.55532033676,3990.52462993776,3990.52462993776,3990.52462993776,7962.14341106994,6324.55532033676,20000,7962.14341106994,7962.14341106994,15886.5646944856,2517.85082358833,63245.5532033676,10023.7446725455,20000,25178.5082358833,63245.5532033676,7962.14341106994,10023.7446725455,3169.78638492223,2000,50237.7286301916,3990.52462993776,5023.77286301917,7962.14341106994,25178.5082358833,6324.55532033676,3169.78638492223,2517.85082358833,25178.5082358833,50237.7286301916,25178.5082358833,25178.5082358833,5023.77286301917,100237.446725455,5023.77286301917,25178.5082358833,7962.14341106994,63245.5532033676,25178.5082358833,5023.77286301917,20000,20000,25178.5082358833,25178.5082358833,3169.78638492223,6324.55532033676,2000,15886.5646944856,3990.52462993776,12619.1468896039,5023.77286301917,3169.78638492223,15886.5646944856,3169.78638492223,39905.2462993776,20000,100237.446725455,39905.2462993776,10023.7446725455,7962.14341106994,3990.52462993776,50237.7286301916,5023.77286301917,3990.52462993776,3990.52462993776,10023.7446725455,5023.77286301917,3169.78638492223,6324.55532033676,12619.1468896039,12619.1468896039,3990.52462993776,5023.77286301917,25178.5082358833,5023.77286301917,5023.77286301917,3990.52462993776,12619.1468896039,3990.52462993776,6324.55532033676,2517.85082358833,25178.5082358833,10023.7446725455,7962.14341106994,10023.7446725455,7962.14341106994,5023.77286301917,3169.78638492223,2517.85082358833,10023.7446725455,2000,12619.1468896039,5023.77286301917,3990.52462993776,5023.77286301917,6324.55532033676,6324.55532033676,10023.7446725455,3990.52462993776,10023.7446725455,12619.1468896039,7962.14341106994,25178.5082358833,10023.7446725455,3990.52462993776,25178.5082358833,63245.5532033676,6324.55532033676,3990.52462993776,3990.52462993776,10023.7446725455,3990.52462993776,3990.52462993776,7962.14341106994,6324.55532033676,6324.55532033676,50237.7286301916,7962.14341106994,5023.77286301917,20000,31697.8638492223,5023.77286301917,25178.5082358833,5023.77286301917,5023.77286301917,12619.1468896039,5023.77286301917,10023.7446725455,10023.7446725455,5023.77286301917,3990.52462993776,20000,6324.55532033676,7962.14341106994,50237.7286301916,7962.14341106994,6324.55532033676,5023.77286301917,6324.55532033676,2517.85082358833,2000,15886.5646944856,2517.85082358833,31697.8638492223,5023.77286301917,2517.85082358833,15886.5646944856,7962.14341106994,6324.55532033676,12619.1468896039,3169.78638492223,3169.78638492223,2517.85082358833,63245.5532033676,5023.77286301917,12619.1468896039,3169.78638492223,12619.1468896039,15886.5646944856,7962.14341106994,6324.55532033676,5023.77286301917,7962.14341106994,3169.78638492223,10023.7446725455,5023.77286301917,6324.55532033676,15886.5646944856,10023.7446725455,63245.5532033676,10023.7446725455,7962.14341106994,2517.85082358833,10023.7446725455,7962.14341106994,3990.52462993776,5023.77286301917,10023.7446725455,3990.52462993776,2517.85082358833,10023.7446725455,6324.55532033676,63245.5532033676,6324.55532033676,7962.14341106994,25178.5082358833,5023.77286301917,10023.7446725455,63245.5532033676,7962.14341106994,2000,7962.14341106994,12619.1468896039,10023.7446725455,10023.7446725455,3169.78638492223,50237.7286301916,7962.14341106994,63245.5532033676,3169.78638492223,6324.55532033676,6324.55532033676,12619.1468896039,7962.14341106994,50237.7286301916,7962.14341106994,20000,3990.52462993776,3990.52462993776,12619.1468896039,10023.7446725455,10023.7446725455,12619.1468896039,3169.78638492223,3169.78638492223,158865.646944856,7962.14341106994,6324.55532033676,15886.5646944856,10023.7446725455,15886.5646944856,39905.2462993776,3169.78638492223,3169.78638492223,6324.55532033676,31697.8638492223,6324.55532033676,79621.4341106994,31697.8638492223,12619.1468896039,6324.55532033676,20000,5023.77286301917,6324.55532033676,7962.14341106994,6324.55532033676,31697.8638492223,25178.5082358833,12619.1468896039,3990.52462993776,25178.5082358833,10023.7446725455,7962.14341106994,12619.1468896039,7962.14341106994,5023.77286301917,7962.14341106994,25178.5082358833,3990.52462993776,5023.77286301917,10023.7446725455,12619.1468896039,2517.85082358833,7962.14341106994,15886.5646944856,2000,10023.7446725455,10023.7446725455,31697.8638492223,7962.14341106994,7962.14341106994,15886.5646944856,100237.446725455,10023.7446725455,5023.77286301917,15886.5646944856,12619.1468896039,7962.14341106994,5023.77286301917,12619.1468896039,10023.7446725455,3169.78638492223,25178.5082358833,12619.1468896039,15886.5646944856,25178.5082358833,3990.52462993776,5023.77286301917,10023.7446725455,10023.7446725455,39905.2462993776,25178.5082358833,15886.5646944856,6324.55532033676,10023.7446725455,3169.78638492223,25178.5082358833,12619.1468896039,3169.78638492223,12619.1468896039,5023.77286301917,6324.55532033676,3990.52462993776,79621.4341106994,2000,20000,3169.78638492223,7962.14341106994,7962.14341106994,6324.55532033676,20000,10023.7446725455,7962.14341106994,12619.1468896039,7962.14341106994,5023.77286301917,79621.4341106994,3169.78638492223,50237.7286301916,12619.1468896039,79621.4341106994,5023.77286301917,10023.7446725455,7962.14341106994,25178.5082358833,7962.14341106994,6324.55532033676,3169.78638492223,12619.1468896039,15886.5646944856,63245.5532033676,20000,3169.78638492223,31697.8638492223,12619.1468896039,5023.77286301917,12619.1468896039,5023.77286301917,2517.85082358833,15886.5646944856,7962.14341106994,6324.55532033676,39905.2462993776,12619.1468896039,7962.14341106994,12619.1468896039,10023.7446725455,15886.5646944856,39905.2462993776,5023.77286301917,7962.14341106994,3990.52462993776,5023.77286301917,3169.78638492223,2517.85082358833,3169.78638492223,20000,2517.85082358833,3990.52462993776,31697.8638492223,3169.78638492223,6324.55532033676,5023.77286301917,5023.77286301917,20000,2000,12619.1468896039,20000,3169.78638492223,31697.8638492223,31697.8638492223,6324.55532033676,3990.52462993776,6324.55532033676,7962.14341106994,25178.5082358833,5023.77286301917,3990.52462993776,10023.7446725455,79621.4341106994,15886.5646944856,25178.5082358833,7962.14341106994,5023.77286301917,12619.1468896039,3169.78638492223,10023.7446725455,2517.85082358833,10023.7446725455,2000,15886.5646944856,20000,6324.55532033676,5023.77286301917,2000,6324.55532033676,10023.7446725455,5023.77286301917,10023.7446725455,10023.7446725455,2000,3169.78638492223,6324.55532033676,10023.7446725455,6324.55532033676,2517.85082358833,7962.14341106994,3990.52462993776,7962.14341106994,31697.8638492223,7962.14341106994,10023.7446725455,20000,31697.8638492223,5023.77286301917,7962.14341106994,6324.55532033676,2000,3169.78638492223,39905.2462993776,158865.646944856,15886.5646944856,6324.55532033676,5023.77286301917,50237.7286301916,39905.2462993776,25178.5082358833,2517.85082358833,3990.52462993776,6324.55532033676,2517.85082358833,25178.5082358833,39905.2462993776,6324.55532033676,2517.85082358833,5023.77286301917,10023.7446725455,2000,25178.5082358833,2000,3990.52462993776,3990.52462993776,2000,2517.85082358833,5023.77286301917,3990.52462993776,3169.78638492223,2000,6324.55532033676,10023.7446725455,20000,3990.52462993776,25178.5082358833,10023.7446725455,39905.2462993776,20000,6324.55532033676,20000,2517.85082358833,15886.5646944856,2517.85082358833,2000,5023.77286301917,6324.55532033676,5023.77286301917,6324.55532033676,3990.52462993776,3990.52462993776,20000,6324.55532033676,6324.55532033676,5023.77286301917,6324.55532033676,2517.85082358833,15886.5646944856,10023.7446725455,3990.52462993776,7962.14341106994,7962.14341106994,31697.8638492223,6324.55532033676,3990.52462993776,7962.14341106994,2000,6324.55532033676,12619.1468896039,7962.14341106994,2517.85082358833,15886.5646944856,10023.7446725455,2517.85082358833,3990.52462993776,5023.77286301917,2000,12619.1468896039,5023.77286301917,5023.77286301917,7962.14341106994,3169.78638492223,2517.85082358833,3169.78638492223,2000,2517.85082358833,2517.85082358833,10023.7446725455,12619.1468896039,25178.5082358833,20000,12619.1468896039,5023.77286301917,20000,31697.8638492223,3169.78638492223,2517.85082358833,12619.1468896039,6324.55532033676,20000,25178.5082358833,2517.85082358833,10023.7446725455,31697.8638492223,12619.1468896039,6324.55532033676,2000,10023.7446725455,2517.85082358833,3990.52462993776,3990.52462993776,2000,10023.7446725455,2517.85082358833,3169.78638492223,12619.1468896039,12619.1468896039,3169.78638492223,3169.78638492223,100237.446725455,200000,3169.78638492223,6324.55532033676,15886.5646944856,5023.77286301917,2000,3990.52462993776,3169.78638492223,6324.55532033676,12619.1468896039,5023.77286301917,3169.78638492223,3169.78638492223,20000,3169.78638492223,31697.8638492223,6324.55532033676,7962.14341106994,20000,20000,50237.7286301916,12619.1468896039,3169.78638492223,63245.5532033676,3990.52462993776,2517.85082358833,5023.77286301917,15886.5646944856,6324.55532033676,15886.5646944856,2000,6324.55532033676,20000,15886.5646944856,6324.55532033676,3169.78638492223,3169.78638492223,3169.78638492223,31697.8638492223,3990.52462993776,25178.5082358833,7962.14341106994,7962.14341106994,5023.77286301917,5023.77286301917,15886.5646944856,25178.5082358833,3169.78638492223,10023.7446725455,2000,79621.4341106994,39905.2462993776,20000,3990.52462993776,2517.85082358833,25178.5082358833,6324.55532033676,15886.5646944856,50237.7286301916,10023.7446725455,12619.1468896039,6324.55532033676,3169.78638492223,7962.14341106994,7962.14341106994,79621.4341106994,50237.7286301916,2000,31697.8638492223,3169.78638492223,10023.7446725455,3990.52462993776,12619.1468896039,7962.14341106994,50237.7286301916,12619.1468896039,7962.14341106994,3169.78638492223,63245.5532033676,10023.7446725455,10023.7446725455,6324.55532033676,63245.5532033676,6324.55532033676,2517.85082358833,2000,3990.52462993776,10023.7446725455,15886.5646944856,6324.55532033676,10023.7446725455,6324.55532033676,12619.1468896039,3990.52462993776,2517.85082358833,50237.7286301916,2517.85082358833,12619.1468896039,3169.78638492223,12619.1468896039,50237.7286301916,5023.77286301917,31697.8638492223,10023.7446725455,15886.5646944856,15886.5646944856,3169.78638492223,5023.77286301917,5023.77286301917,3990.52462993776,15886.5646944856,20000,10023.7446725455,15886.5646944856,3990.52462993776,6324.55532033676,3169.78638492223,31697.8638492223,12619.1468896039,2000,10023.7446725455,3990.52462993776,3990.52462993776,15886.5646944856,2000,3169.78638492223,5023.77286301917,10023.7446725455,6324.55532033676,6324.55532033676,200000],null,"Quakes",{"interactive":true,"className":"","stroke":false,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null,null]},{"method":"addPolygons","args":[[[[{"lng":[182.4,181.8,180.2,177.1,175.7,166,165.67,165.77,165.99,187.2,187.81,188.13,188.1],"lat":[-33,-34.1,-35.56,-38.28,-38.59,-14.7,-12.85,-10.78,-10.72,-15.17,-15.46,-15.87,-17.7]}]]],null,"Outline",{"interactive":true,"className":"","stroke":true,"color":"#FFFFCC","weight":2,"opacity":0.5,"fill":false,"fillColor":"#FFFFCC","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["OSM (default)","Toner","Toner Lite"],["Quakes","Outline"],{"collapsed":false,"autoZIndex":true,"position":"topright"}]},{"method":"hideGroup","args":["Outline"]}],"limits":{"lat":[-38.59,-10.72],"lng":[165.67,188.13]}},"evals":[],"jsHooks":[]}</script>
</div>
<h1 id="example">Example</h1>
<p>Using the skills learned above, we are going to load in Excel data for Nelson\Nygaards projects and offices, and translate those into geospatial data, and perform some simple geocomputations using buffers and intersections. Then we will map the data using <code>leaflet</code>, and plot a simple summary using <code>ggplot</code>.</p>
<p><strong>Notes on below code:</strong></p>
<ul>
<li><p><strong>Coordinate System Reference Codes</strong>: You will want to get comfortable using the EPSG codes for different coordinate systems, as that is the easiest way to reference them in R/sf. The website I use to find the appropriate EPSG code for a given area is <a href="spatialreference.org">spatialreference.org</a>. You will typically have to use this when using different state plane coordinate systems from different parts of the country. It is always handy to remember that WGS84 (the master geographic coordinate system for the globe in latitude &amp; longitude) can be referenced by EPSG code <code>4326</code>, as is used below.</p></li>
<li><p><strong>Seamless work with spatial and non-spatial attributes</strong>: One of the greatest features of the <code>sf</code> package is how seamlessly it integrates into the tidyverse. Just as we can do spatial operations below, we can also use tidyverse methods like <code>ggplot()</code> to create summaries that rely on spatial computations (in this case, an intersection).</p></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#Load in packages</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://r-spatial.github.io/sf/'>sf</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://readxl.tidyverse.org'>readxl</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/sfirke/janitor'>janitor</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://rstudio.github.io/leaflet/'>leaflet</a></span><span class='op'>)</span>

<span class='co'>#Read in Excel files</span>
<span class='va'>project_cities</span> <span class='op'>=</span> <span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_excel</a></span><span class='op'>(</span><span class='st'>'data/Projects_MASTER.xlsx'</span>,sheet<span class='op'>=</span><span class='st'>'GISJOIN_202004'</span><span class='op'>)</span>
<span class='va'>nn_offices</span> <span class='op'>=</span> <span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_excel</a></span><span class='op'>(</span><span class='st'>'data/Projects_MASTER.xlsx'</span>,sheet<span class='op'>=</span><span class='st'>'nn_offices'</span><span class='op'>)</span>

<span class='co'>#Add geometry to project cities using st_as_sf() function</span>
<span class='va'>project_cities_sf</span> <span class='op'>=</span> <span class='va'>project_cities</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Filter out international projects</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>international</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Select columns of interest</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>city</span>,<span class='va'>state</span>,<span class='va'>x</span>,<span class='va'>y</span>,<span class='va'>all</span><span class='op'>:</span><span class='va'>other</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Can turn data frame into sf data frame by referencing coordinates (for points)</span>
  <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_sf.html'>st_as_sf</a></span><span class='op'>(</span>coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'x'</span>,<span class='st'>'y'</span><span class='op'>)</span>,crs <span class='op'>=</span> <span class='fl'>4326</span><span class='op'>)</span>

<span class='co'>#Same as above</span>
<span class='va'>nn_offices_sf</span> <span class='op'>=</span> <span class='va'>nn_offices</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/janitor/man/clean_names.html'>clean_names</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_as_sf.html'>st_as_sf</a></span><span class='op'>(</span>coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'x'</span>,<span class='st'>'y'</span><span class='op'>)</span>,crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span>

<span class='co'>#Making custom NN icon based on JPEG image stored on website. </span>
<span class='va'>nn_icon</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/makeIcon.html'>makeIcon</a></span><span class='op'>(</span>iconUrl <span class='op'>=</span> <span class='st'>'https://perkinsandwill.github.io/nn_r_training/topics_setup/03_geospatial/graphics/NNlogo_RGB_300dpi_JPEG.jpg'</span>,
                   <span class='co'>#Making icon 10% of original size   </span>
                   iconWidth <span class='op'>=</span> <span class='fl'>331</span><span class='op'>*</span><span class='fl'>0.1</span>,
                   iconHeight <span class='op'>=</span> <span class='fl'>450</span><span class='op'>*</span><span class='fl'>0.1</span>,
                   <span class='co'>#Anchor point at center of icon (halfway in X and Y)</span>
                   iconAnchorX <span class='op'>=</span> <span class='fl'>331</span><span class='op'>*</span><span class='fl'>0.1</span><span class='op'>*</span><span class='fl'>0.5</span>,
                   iconAnchorY <span class='op'>=</span> <span class='fl'>450</span><span class='op'>*</span><span class='fl'>0.1</span><span class='op'>*</span><span class='fl'>0.5</span><span class='op'>)</span>

<span class='co'>#Basic map showing offices as icons (icon assembled above)</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/addProviderTiles.html'>addProviderTiles</a></span><span class='op'>(</span><span class='st'>'CartoDB.Positron'</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span>data <span class='op'>=</span><span class='va'>nn_offices_sf</span>,icon <span class='op'>=</span> <span class='va'>nn_icon</span>,
             <span class='co'>#Using formula notation, as discussed above, can reference attributes</span>
             label<span class='op'>=</span><span class='op'>~</span><span class='va'>city</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-3d7ad3b06cf922fca9bf" style="width:100%;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-3d7ad3b06cf922fca9bf">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[45.511791229248,47.6035690307617,37.7771186828613,37.8050804138183,34.0534896850585,30.2675895690917,38.8903694152832,40.7820014953613,42.3586616516113],[-122.675628662109,-122.329452514648,-122.419639587402,-122.273071289062,-118.245323181152,-97.7429885864257,-77.0319595336914,-73.8317031860351,-71.0567398071289],{"iconUrl":{"data":"https://perkinsandwill.github.io/nn_r_training/topics_setup/03_geospatial/graphics/NNlogo_RGB_300dpi_JPEG.jpg","index":0},"iconWidth":33.1,"iconHeight":45,"iconAnchorX":16.55,"iconAnchorY":22.5},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Portland","Seattle","San Francisco","Oakland","Los Angeles","Austin","Washington","New York","Boston"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[30.2675895690917,47.6035690307617],"lng":[-122.675628662109,-71.0567398071289]}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>nn_office_buffers</span> <span class='op'>=</span> <span class='va'>nn_offices_sf</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Going to use Oregon North (2269) even though this will be slightly inaccurate with a nationwide buffer calculation</span>
  <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>st_transform</a></span><span class='op'>(</span><span class='fl'>2269</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Create fifty mile buffer</span>
  <span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_unary.html'>st_buffer</a></span><span class='op'>(</span><span class='fl'>5280</span><span class='op'>*</span><span class='fl'>50</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Transform back to WGS84</span>
  <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>st_transform</a></span><span class='op'>(</span><span class='fl'>4326</span><span class='op'>)</span>

<span class='co'>#Basic map showing buffer polygons</span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/addProviderTiles.html'>addProviderTiles</a></span><span class='op'>(</span><span class='st'>'CartoDB.Positron'</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addPolygons</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>nn_office_buffers</span>,
              label<span class='op'>=</span><span class='op'>~</span><span class='va'>city</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-5d16472fb6cfeb8c72c4" style="width:100%;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-5d16472fb6cfeb8c72c4">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.Positron",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-121.645854825841,-121.646501384571,-121.649964753723,-121.656229860198,-121.665274072005,-121.677067319169,-121.691572232709,-121.708744300697,-121.728532040447,-121.750877185841,-121.775714888838,-121.80297393421,-121.832576966569,-121.86444072878,-121.898476310877,-121.934589408624,-121.972680590922,-122.012645575268,-122.054375510531,-122.097757266342,-122.142673728438,-122.189004099331,-122.236624203713,-122.285406798064,-122.335221883922,-122.385937024361,-122.437417663204,-122.489527446562,-122.542128546288,-122.595081984985,-122.648247962181,-122.701486181354,-122.754656177451,-122.807617644572,-122.860230763504,-122.912356528753,-122.963857074765,-123.014596000955,-123.064438695224,-123.11325265555,-123.160907809276,-123.207276829674,-123.252235449312,-123.295662769773,-123.337441567186,-123.377458593046,-123.415604869711,-123.451775979972,-123.485872350035,-123.517799525191,-123.547468437468,-123.574795664457,-123.599703678515,-123.622121085489,-123.641982852083,-123.659230520959,-123.673812412635,-123.685683813235,-123.69480714712,-123.701152133424,-123.704695925534,-123.705423232532,-123.703326421652,-123.69840560084,-123.690668680488,-123.68013141353,-123.666817413068,-123.650758146805,-123.631992907618,-123.610568759681,-123.586540459656,-123.559970352549,-123.530928241968,-123.499491234604,-123.465743558917,-123.42977635812,-123.391687457697,-123.351581107849,-123.30956770139,-123.265763467776,-123.220290144102,-123.173274624046,-123.124848585877,-123.075148100817,-123.024313223141,-122.972487563568,-122.919817847589,-122.866453460504,-122.81254598103,-122.758248705432,-122.703716164204,-122.649103633369,-122.594566642533,-122.540260481825,-122.486339709886,-122.432957665048,-122.380265981835,-122.328414114847,-122.277548872073,-122.227813959574,-122.179349539406,-122.132291802553,-122.086772558532,-122.042918843207,-122.000852546221,-121.960690059322,-121.922541946716,-121.886512638423,-121.852700147481,-121.821195811682,-121.792084060362,-121.765442206661,-121.741340265462,-121.719840797139,-121.70099877708,-121.684861490808,-121.671468454458,-121.66085136019,-121.65303404607,-121.64803248983,-121.645854825841],"lat":[45.5266744358818,45.4887693208828,45.4509394928385,45.413288406896,45.3759188276866,45.3389325528378,45.3024301412461,45.2665106467671,45.2312713579411,45.1968075443391,45.1632122100738,45.1305758549891,45.0989862440009,45.0685281850319,45.0392833159462,45.0113299008564,44.9847426361482,44.9595924665314,44.9359464114028,44.9138674017749,44.8934141280016,44.8746408985056,44.8575975096902,44.8423291271974,44.8288761786533,44.8172742580245,44.8075540416901,44.7997412163209,44.7938564186392,44.7899151871219,44.7879279256922,44.7878998794385,44.7898311223809,44.7937165572988,44.7995459276187,44.8073038413518,44.8169698070577,44.8285182817991,44.8419187310414,44.8571357004338,44.8741288994011,44.8928532964532,44.913259226109,44.9352925073117,44.9588945731943,44.9840026120344,45.0105497192168,45.0384650599986,45.0676740428474,45.0980985030989,45.1296568966502,45.1622645033782,45.1958336399426,45.2302738815989,45.2654922926175,45.3013936648673,45.3378807640921,45.374854583367,45.412214603191,45.4498590576328,45.4876852059121,45.5255896087606,45.5634684088745,45.6012176147335,45.6387333870287,45.6759123269099,45.7126517652346,45.7488500519705,45.7844068448815,45.8192233966042,45.8532028392019,45.8862504652721,45.9182740046685,45.9491838958939,45.9788935512196,46.0073196145873,46.0343822113581,46.0600051889874,46.0841163477202,46.1066476604271,46.1275354807272,46.146720738583,46.1641491225839,46.1797712481893,46.1935428112405,46.2054247261144,46.2153832479436,46.2233900783916,46.2294224545395,46.233463220506,46.2355008814977,46.2355296400582,46.2335494143607,46.229565838466,46.2235902445458,46.2156396271451,46.2057365896389,46.1939092731108,46.1801912679559,46.1646215085826,46.1472441516565,46.1281084383953,46.1072685414871,46.0847833972606,46.0607165237924,46.0351358256833,46.0081133862821,45.9797252481733,45.9500511827805,45.9191744499646,45.8871815485217,45.8541619585013,45.8202078762811,45.7854139433398,45.7498769696743,45.7136956528057,45.6769702933096,45.6398025078003,45.6022949402774,45.5645509727321,45.5266744358818]}]],[[{"lng":[-121.260223332401,-121.261161617654,-121.265023204188,-121.271791502205,-121.281442091122,-121.293942849726,-121.309254104837,-121.327328797463,-121.3481126654,-121.371544441249,-121.397556064827,-121.426072908966,-121.457014017718,-121.490292356017,-121.525815069873,-121.563483756213,-121.603194741534,-121.644839368545,-121.688304290058,-121.733471769383,-121.780219986577,-121.828423349897,-121.87795281187,-121.928676189426,-121.980458487585,-122.033162226217,-122.086647769426,-122.140773657155,-122.195396938601,-122.250373507102,-122.305558436117,-122.360806315993,-122.415971591181,-122.470908897585,-122.525473399735,-122.579521127466,-122.632909311774,-122.68549671952,-122.737143986625,-122.7877139494,-122.837071973596,-122.88508628078,-122.931628271567,-122.97657284524,-123.019798715225,-123.061188719878,-123.100630127981,-123.138014938302,-123.173240172546,-123.206208160965,-123.23682681987,-123.265009920218,-123.290677346436,-123.313755344591,-123.334176758976,-123.35188125616,-123.36681553551,-123.37893352519,-123.388196562598,-123.394573558221,-123.398041141859,-123.398583790199,-123.396193934704,-123.390872048852,-123.382626713726,-123.371474661079,-123.357440792972,-123.340558177215,-123.320868017879,-123.298419600231,-123.273270209573,-123.245485023538,-123.21513697753,-123.182306603135,-123.147081839427,-123.109557817274,-123.069836616888,-123.028026998992,-122.984244110177,-122.938609163143,-122.89124909271,-122.842296188623,-122.791887706337,-122.740165457142,-122.687275379094,-122.633367090396,-122.57859342698,-122.523109966164,-122.467074538373,-122.410646728978,-122.35398737242,-122.297258040816,-122.2406205293,-122.184236340373,-122.128266169558,-122.072869394615,-122.018203570583,-121.964423932825,-121.911682910247,-121.86012965072,-121.809909560686,-121.761163860813,-121.714029159426,-121.668637045337,-121.625113701526,-121.583579541022,-121.544148866119,-121.50692955197,-121.472022755389,-121.439522649552,-121.40951618514,-121.38208287828,-121.357294625518,-121.335215545874,-121.315901849929,-121.29940173573,-121.285755311173,-121.274994542434,-121.267143227882,-121.262216996833,-121.260223332401],"lat":[47.6151587400175,47.5773038517717,47.539532662256,47.5019484479621,47.4646537726904,47.4277502118186,47.3913380813828,47.3555161726197,47.3203814925865,47.2860290114355,47.252551416887,47.2200388764071,47.1885788075613,47.1582556569994,47.1291506883663,47.1013417797793,47.0749032308519,47.0499055798421,47.0264154310995,47.0044952930804,46.9842034271609,46.9655937074503,46.9487154917869,46.9336135040756,46.9203277281074,46.9088933129837,46.899340490249,46.8916945028231,46.8859755458036,46.8821987192028,46.8803739926629,46.8805061821854,46.8825949388981,46.8866347498679,46.8926149509616,46.90051975174,46.9103282723626,46.922014592466,46.9355478119677,46.9508921237326,46.9680068980269,46.9868467786675,47.0073617907607,47.0294974599049,47.0531949427148,47.0783911685049,47.1050189919469,47.1330073564954,47.1622814683503,47.1927629806799,47.2243701879296,47.2570182296331,47.2906193037411,47.3250828888243,47.36031597485,47.3962233020731,47.4327076075661,47.4696698788752,47.5070096142563,47.5446250889066,47.5824136265727,47.6202718758791,47.6580960906866,47.6957824137552,47.7332271629539,47.7703271192263,47.8069798154942,47.8430838256513,47.8785390527762,47.9132470156713,47.9471111328168,47.9800370028137,48.0119326803789,48.04270894695,48.0722795749542,48.1005615848012,48.1274754936636,48.1529455551274,48.1768999888073,48.1992711990499,48.2199959818745,48.2390157193364,48.2562765605366,48.2717295885468,48.2853309725688,48.2970421047002,48.3068297207368,48.314666004507,48.3205286752967,48.3244010579937,48.3262721356532,48.3261365842582,48.323994789528,48.3198528456995,48.3137225362896,48.3056212969189,48.2955721603579,48.2836036840291,48.2697498602759,48.2540500097768,48.2365486585559,48.2172953991035,48.1963447361853,48.1737559179739,48.1495927531919,48.1239234150039,48.0968202324387,48.0683594701619,48.0386210974536,48.007688547272,47.975648466309,47.9425904569607,47.9086068121472,47.8737922439248,47.8382436068353,47.8020596169343,47.7653405674341,47.7281880418862,47.6907046258108,47.6529936176651,47.6151587400175]}]],[[{"lng":[-121.513471510162,-121.514118169979,-121.517243587166,-121.52283487492,-121.53087248109,-121.541330287432,-121.554175725099,-121.56936990557,-121.586867766248,-121.606618229933,-121.628564377368,-121.652643632068,-121.678787956662,-121.706924059968,-121.736973614054,-121.768853480554,-121.80247594553,-121.837748962196,-121.874576400837,-121.91285830531,-121.952491155492,-121.993368135138,-122.035379404555,-122.07841237761,-122.122352002545,-122.167081046136,-122.212480380751,-122.258429273865,-122.30480567962,-122.351486532048,-122.398348039547,-122.445265980261,-122.492115997977,-122.538773898198,-122.585115944002,-122.631019151358,-122.676361583505,-122.721022644029,-122.764883368258,-122.807826712567,-122.849737841181,-122.890504410051,-122.930016847334,-122.968168630021,-123.004856556193,-123.039981012392,-123.073446235559,-123.105160568939,-123.13503671137,-123.162991959306,-123.188948440917,-123.212833341583,-123.234579120059,-123.254123714596,-123.271410738244,-123.286389662585,-123.2990159891,-123.309251407398,-123.317063939483,-123.322428069302,-123.325324856754,-123.325742035413,-123.323674093198,-123.319122335268,-123.31209492845,-123.302606926545,-123.290680275919,-123.276343800823,-123.259633167966,-123.240590829931,-123.219265947106,-123.195714287878,-123.169998106947,-123.142186001704,-123.112352746726,-123.080579106544,-123.046951626969,-123.011562405349,-122.97450884029,-122.935893361444,-122.895823140122,-122.854409781604,-122.811769000105,-122.768020277512,-122.723286507068,-122.677693623319,-122.631370219705,-122.584447155269,-122.537057152055,-122.489334384785,-122.441414064515,-122.393432017968,-122.345524264302,-122.297826591067,-122.250474131136,-122.203600942368,-122.157339591742,-122.111820745686,-122.067172768263,-122.023521328823,-121.980989020678,-121.939694992256,-121.899754592129,-121.861279029196,-121.824375049212,-121.789144628748,-121.755684687538,-121.724086820089,-121.694437047266,-121.66681558848,-121.641296654981,-121.617948264627,-121.596832078389,-121.578003258763,-121.561510350105,-121.547395180843,-121.535692787407,-121.526431359612,-121.519632207168,-121.515309746896,-121.513471510162],"lat":[37.7901752759191,37.7525214544668,37.7149488139351,37.6775600959827,37.6404573377197,37.6037415972575,37.567512684055,37.5318688947096,37.4969067548076,37.4627207674123,37.4294031687301,37.3970436914592,37.365729336291,37.3355441519982,37.3065690245078,37.2788814753291,37.25255546967,37.2276612345465,37.2042650871633,37.1824292738125,37.1622118195143,37.1436663885986,37.1268421564033,37.1117836922446,37.0985308537955,37.0871186929891,37.0775773735487,37.0699321002284,37.0642030598362,37.0604053740972,37.0585490644003,37.0586390284627,37.060675028933,37.0646516939433,37.0705585296101,37.0783799444725,37.0880952858443,37.0996788880482,37.1131001324835,37.1283235194708,37.1453087518006,37.164010829899,37.1843801585093,37.2063626647687,37.2298999275445,37.2549293178711,37.2813841503109,37.3091938450372,37.3382841004136,37.3685770758202,37.3999915844455,37.4324432957379,37.4658449471785,37.5001065650039,37.5351356934775,37.5708376322699,37.6071156814789,37.6438713937774,37.681004833148,37.7184148396214,37.7559992994014,37.7936554197239,37.8312800077596,37.8687697528373,37.9060215112318,37.9429325927258,37.9794010481305,38.0153259569164,38.0506077140882,38.0851483154092,38.1188516400678,38.151623729862,38.1833730639677,38.2140108283515,38.2434511788855,38.2716114972273,38.2984126385353,38.3237791701017,38.3476396000079,38.3699265949264,38.3905771862263,38.409532963571,38.4267402552385,38.4421502944382,38.4557193709471,38.4674089674421,38.4771858799658,38.48502232202,38.4908960118529,38.4947902425683,38.4966939347623,38.4966016714614,38.494513715214,38.4904360072618,38.4843801487951,38.4763633643711,38.466408447653,38.4545436896986,38.4408027901045,38.4252247513795,38.4078537569909,38.3887390335934,38.3679346980086,38.3454995895857,38.3214970886229,38.2959949215805,38.2690649538602,38.2407829709642,38.2112284488812,38.1804843145753,38.1486366974781,38.1157746729009,38.0819899982982,38.0473768433206,38.0120315145994,37.9760521762007,37.9395385666843,37.9025917136887,37.8653136469499,37.8278071106436,37.7901752759191]}]],[[{"lng":[-121.366488713546,-121.367221950915,-121.370434690428,-121.376113804638,-121.384239501067,-121.394785422109,-121.407718761133,-121.423000394025,-121.440585025362,-121.460421348437,-121.482452218339,-121.506614837296,-121.532840951491,-121.561057058603,-121.591184625301,-121.623140313975,-121.656836217983,-121.692180104745,-121.729075666008,-121.767422774663,-121.807117747509,-121.848053613383,-121.890120386108,-121.933205341742,-121.977193299625,-122.021966906757,-122.067406925046,-122.11339252101,-122.159801557511,-122.206510887123,-122.253396646757,-122.300334553166,-122.347200198965,-122.393869348795,-122.440218235285,-122.486123854441,-122.53146426009,-122.576118857012,-122.619968692376,-122.662896745067,-122.704788212504,-122.74553079451,-122.785014973776,-122.823134292449,-122.859785624338,-122.894869442216,-122.928290079658,-122.95995598684,-122.989779979695,-123.017679481774,-123.043576758169,-123.067399140797,-123.089079244336,-123.108555172078,-123.125770710951,-123.140675514926,-123.153225276038,-123.16338188223,-123.171113561214,-123.176395009567,-123.179207506266,-123.179539009905,-123.177384238815,-123.172744733392,-123.165628899917,-123.156052035229,-123.144036331652,-123.129610861624,-123.112811541554,-123.093681074498,-123.07226887133,-123.048630950157,-123.02282981384,-122.994934305567,-122.96501944253,-122.93316622788,-122.899461441224,-122.863997408081,-122.826871748776,-122.788187107445,-122.748050861862,-122.706574814987,-122.663874869203,-122.620070684342,-122.575285320705,-122.529644868368,-122.483278064185,-122.436315897954,-122.388891209313,-122.341138276978,-122.293192402003,-122.245189486787,-122.197265611562,-122.149556610144,-122.102197646713,-122.055322795382,-122.009064624314,-121.963553786086,-121.918918615973,-121.875284739767,-121.832774692663,-121.7915075507,-121.751598576118,-121.713158877925,-121.676295088865,-121.641109059854,-121.607697572858,-121.57615207306,-121.546558421048,-121.518996665633,-121.493540837796,-121.47025876614,-121.449211914102,-121.430455239068,-121.414037073446,-121.39999902761,-121.388375914565,-121.379195696077,-121.372479449913,-121.368241357794,-121.366488713546],"lat":[37.8168310273488,37.7791762428094,37.7416062112015,37.7042236600129,37.6671306025748,37.6304280637516,37.5942158104501,37.5585920875955,37.523653360188,37.4894940620165,37.456206351568,37.4238798756379,37.3926015411082,37.3624552953269,37.333521915487,37.3058788073724,37.279599813803,37.2547550330851,37.2314106477413,37.2096287637671,37.1894672606389,37.1709796522676,37.1542149590775,37.1392175913618,37.1260272440515,37.1146788030137,37.1052022629802,37.097622657191,37.0919599988227,37.0882292342592,37.0864402082488,37.0865976409803,37.0887011170993,37.0927450866745,37.0987188781133,37.1066067230146,37.1163877929367,37.1280362480444,37.1415212975911,37.1568072721744,37.1738537076947,37.192615440928,37.2130427166118,37.2350813059218,37.2586726362042,37.2837539318033,37.3102583658075,37.3381152225093,37.3672500703562,37.3975849451372,37.4290385431276,37.4615264238813,37.4949612223326,37.529252869836,37.5643088237386,37.6000343050484,37.6363325437225,37.6731050310686,37.7102517787112,37.7476715835419,37.7852622980349,37.8229211052728,37.8605447979913,37.8980300609203,37.9352737556607,37.9721732073091,38.0086264920112,38.0445327245967,38.0797923454259,38.1143074055558,38.1479818493163,38.1807217933706,38.2124358013284,38.243035152969,38.2724341071348,38.3005501573567,38.3273042792813,38.3526211689862,38.3764294712842,38.3986619971452,38.419255929391,38.4381530158561,38.4552997492431,38.4706475329498,38.484152832193,38.4957773098067,38.5054879461546,38.5132571426534,38.5190628084744,38.5228884300559,38.5247231231321,38.524561667057,38.5224045212761,38.5182578238768,38.5121333722226,38.5040485857549,38.4940264511191,38.4820954498514,38.46828946893,38.4526476945702,38.4352144897076,38.4160392556822,38.3951762786925,38.3726845616539,38.3486276421406,38.3230733971451,38.2960938354309,38.2677648782933,38.2381661295759,38.2073806358212,38.1754946374544,38.1425973119201,38.1087805097009,38.0741384841594,38.038767616142,38.0027661342868,37.9662338319662,37.9292717817883,37.8919820485622,37.8544674016185,37.8168310273488]}]],[[{"lng":[-117.389656520271,-117.392551411416,-117.397777053811,-117.405315346875,-117.415141973979,-117.427226508382,-117.441532533969,-117.458017780034,-117.476634269423,-117.49732847927,-117.520041513634,-117.544709287284,-117.571262719944,-117.599627940277,-117.629726498936,-117.661475590012,-117.694788280224,-117.729573745241,-117.765737512515,-117.803181710059,-117.841805320604,-117.881504440608,-117.922172543604,-117.963700747398,-118.00597808465,-118.048891776391,-118.092327508043,-118.136169707529,-118.18030182507,-118.224606614279,-118.268966414179,-118.313263431754,-118.357380024682,-118.401198983862,-118.444603815384,-118.487479021546,-118.529710380556,-118.571185224513,-118.611792715278,-118.651424117806,-118.689973070525,-118.727335852286,-118.763411645446,-118.798102794572,-118.831315060256,-118.862957867524,-118.892944548254,-118.921192577044,-118.947623799916,-118.972164655225,-118.994746386135,-119.015305243983,-119.033782681852,-119.050125537646,-119.064286205958,-119.076222798008,-119.085899288915,-119.093285651585,-119.098357976485,-119.101098576589,-119.101496076795,-119.099545487131,-119.095248259105,-119.088612324571,-119.079652116543,-119.068388571405,-119.05484911207,-119.039067611636,-119.021084337217,-119.000945873653,-118.978705026914,-118.954420707078,-118.92815779087,-118.899986963831,-118.869984542296,-118.83823227546,-118.804817127905,-118.7698310431,-118.733370688444,-118.69553718259,-118.65643580583,-118.616175694489,-118.574869520316,-118.532633156004,-118.489585328036,-118.445847258139,-118.401542294718,-118.356795535687,-118.311733444208,-118.266483458855,-118.221173599792,-118.175932072572,-118.130886871173,-118.086165381903,-118.04189398979,-117.998197689073,-117.955199699353,-117.913021088951,-117.87178040696,-117.831593325409,-117.792572292905,-117.754826201035,-117.718460064713,-117.683574717594,-117.650266523562,-117.618627105183,-117.58874308996,-117.560695875061,-117.534561411129,-117.510410005646,-117.488306146239,-117.468308344188,-117.450468998309,-117.434834279291,-117.421444034434,-117.4103317127,-117.401524309857,-117.395042333442,-117.390899787179,-117.389104174442,-117.389656520271],"lat":[34.0298297612817,33.9925983659049,33.9555480499916,33.9187799276805,33.8823941446699,33.8464896109981,33.8111637392345,33.7765121886876,33.7426286162044,33.7096044340947,33.6775285756809,33.6464872689372,33.6165638186461,33.5878383974674,33.5603878462823,33.5342854841424,33.5096009281236,33.4863999233564,33.4647441834777,33.4446912417209,33.4262943128413,33.4096021660464,33.394659009085,33.3815043836257,33.3701730720401,33.3606950156877,33.3530952447859,33.3473938199339,33.3436057853455,33.3417411338338,33.3418047835816,33.3437965667151,33.3477112296946,33.3535384455188,33.3612628377339,33.3708640162251,33.3823166247576,33.3955904002241,33.4106502435416,33.4274563021277,33.4459640638737,33.4661244625145,33.4878839942805,33.5111848456977,33.5359650323837,33.5621585486653,33.5896955278217,33.6185024127335,33.6485021366911,33.6796143140889,33.7117554407041,33.7448391032274,33.7787761976805,33.813475156325,33.84884218263,33.8847814938343,33.9211955705983,33.9579854132112,33.9950508037766,34.032290573766,34.0696028762947,34.1068854624349,34.1440359608528,34.1809521600154,34.2175322921885,34.2536753184133,34.2892812136225,34.3242512510343,34.3584882849383,34.3918970309719,34.4243843429696,34.4558594854585,34.4862344008656,34.5154239705038,34.5433462684037,34.5699228070685,34.5950787742413,34.6187432597947,34.6408494718733,34.6613349414507,34.6801417144968,34.697216530989,34.712510990047,34.7259817005174,34.7375904163904,34.7473041564873,34.7550953079171,34.7609417128708,34.7648267383834,34.7667393287692,34.7666740405071,34.7646310594262,34.7606162001196,34.7546408875868,34.7467221211853,34.7368824210442,34.7251497571678,34.7115574615309,34.6961441235355,34.6789534692702,34.6600342250746,34.6394399659743,34.6172289496094,34.5934639363327,34.5682119962003,34.5415443036251,34.5135359204987,34.4842655686231,34.4538153923228,34.4222707121282,34.3897197704434,34.356253470121,34.3219651068769,34.2869500964785,34.2513056976412,34.2151307315582,34.1785252989806,34.1415904957488,34.1044281276593,34.0671404255271,34.0298297612817]}]],[[{"lng":[-96.9667381578352,-96.9799379598228,-96.995208234767,-97.0125045839716,-97.0317773162978,-97.052971608178,-97.0760276745394,-97.1008809499727,-97.1274622794892,-97.1556981182231,-97.1855107394468,-97.2168184502858,-97.249535814536,-97.2835738820038,-97.3188404238113,-97.3552401731269,-97.3926750708007,-97.4310445154072,-97.4702456172132,-97.5101734556075,-97.5507213395489,-97.5917810706007,-97.6332432081356,-97.6749973363085,-97.7169323324014,-97.7589366361571,-97.8008985197201,-97.8427063578101,-97.8842488977536,-97.9254155289977,-97.9660965517286,-98.0061834442096,-98.0455691284484,-98.0841482337919,-98.1218173580344,-98.1584753256153,-98.1940234424609,-98.2283657470152,-98.2614092569816,-98.2930642112802,-98.3232443067078,-98.351866928764,-98.3788533760904,-98.4041290779491,-98.4276238041472,-98.4492718667965,-98.4690123132821,-98.4867891097991,-98.502551314802,-98.5162532417058,-98.5278546101697,-98.5373206852895,-98.5446224040306,-98.5497364882356,-98.5526455435511,-98.5533381436361,-98.5518088990319,-98.548058510102,-98.5420938034815,-98.5339277515146,-98.5235794742005,-98.511074223222,-98.4964433476839,-98.4797242412514,-98.4609602704491,-98.4402006839499,-98.417500502766,-98.3929203913348,-98.3665265095807,-98.3383903461253,-98.3085885329103,-98.2772026415969,-98.2443189621985,-98.2100282645064,-98.1744255429618,-98.1376097457263,-98.0996834887966,-98.0607527561002,-98.0209265865971,-97.9803167494926,-97.9390374087461,-97.8972047781263,-97.8549367681302,-97.8123526261335,-97.7695725711878,-97.7267174249155,-97.6839082399801,-97.641265927626,-97.5989108857872,-97.5569626292635,-97.5155394234443,-97.4747579230399,-97.4347328172441,-97.3955764827088,-97.3573986456602,-97.3203060544249,-97.284402163565,-97.2497868307503,-97.2165560274088,-97.1848015641173,-97.1546108315974,-97.1260665580931,-97.0992465838075,-97.0742236529802,-97.0510652240867,-97.0298332985474,-97.0105842682318,-96.9933687819556,-96.9782316310697,-96.965211654158,-96.9543416607727,-96.9456483740578,-96.9391523920362,-96.9348681672677,-96.9328040045194,-96.9329620760345,-96.9353384539337,-96.9399231592352,-96.9467002269439,-96.9556477866227,-96.9667381578352],"lat":[30.0688929166326,30.0339354890247,29.9996294000076,29.9660673883027,29.9333400117618,29.9015354149692,29.8707391047789,29.8410337342124,29.8124988951097,29.7852109198927,29.7592426927693,29.7346634706769,29.7115387142321,29.6899299289321,29.6698945168206,29.6514856388146,29.634752087859,29.6197381730613,29.6064836149353,29.5950234518678,29.585387957905,29.5776025719386,29.5716878383623,29.5676593592515,29.5655277581107,29.5652986552201,29.5669726546036,29.5705453426279,29.5760072982365,29.5833441148069,29.5925364336141,29.6035599888696,29.6163856642968,29.6309795611887,29.6473030778853,29.6653130005901,29.684961605435,29.706196771683,29.728962105943,29.7531970772525,29.7788371628615,29.8058140045321,29.8340555751413,29.8634863553537,29.8940275200983,29.9255971345622,29.9581103593775,29.9914796646516,30.0256150524551,30.0604242873504,30.0958131345075,30.131685604919,30.1679442071913,30.2044902053495,30.2412238820629,30.2780448066545,30.3148521072299,30.3515447462217,30.3880217986128,30.4241827320732,30.4599276882106,30.4951577641119,30.5297752933244,30.5636841254065,30.5967899031565,30.629000336615,30.6602254729253,30.690377961128,30.7193733109656,30.747130144774,30.7735704415458,30.7986197722625,30.8222075256095,30.8442671232116,30.8647362235541,30.8835569137869,30.9006758886476,30.9160446157836,30.9296194867987,30.9413619534044,30.9512386481101,30.9592214889493,30.9652877678005,30.9694202219298,30.9716070884507,30.9718421414706,30.9701247117625,30.9664596888806,30.9608575057088,30.9533341055091,30.9439108916103,30.9326146599523,30.9194775147718,30.9045367677875,30.8878348213085,30.8694190357548,30.8493415821416,30.8276592801338,30.8044334223319,30.7797295855005,30.7536174294916,30.7261704846576,30.6974659285804,30.6675843529742,30.6366095216413,30.6046281203824,30.5717294997711,30.5380054117167,30.5035497407392,30.468458230879,30.4328282091621,30.396758306526,30.3603481771025,30.3236982167328,30.2869092815699,30.2500824076003,30.2133185318887,30.1767182163201,30.1403813745841,30.1044070031101,30.0688929166326]}]],[[{"lng":[-76.2446671339244,-76.2707152924284,-76.2988101590913,-76.3288733583846,-76.3608215664523,-76.3945667479875,-76.430016401185,-76.4670738100959,-76.5056383037336,-76.5456055213113,-76.5868676830208,-76.6293138657889,-76.672830283478,-76.7173005710233,-76.7626060720247,-76.8086261293355,-76.8552383782116,-76.9023190416047,-76.9497432271994,-76.9973852258095,-77.0451188107587,-77.0928175378805,-77.1403550457784,-77.1876053559859,-77.2344431726702,-77.2807441815164,-77.3263853474206,-77.3712452106149,-77.4152041808284,-77.4581448290782,-77.4999521766609,-77.5405139808982,-77.5797210171652,-77.6174673567052,-77.6536506397104,-77.6881723431165,-77.7209380425357,-77.7518576677187,-77.7808457509112,-77.8078216674396,-77.8327098678346,-77.8554401007734,-77.8759476260984,-77.8941734171492,-77.9100643516236,-77.9235733901701,-77.9346597419034,-77.9432890160277,-77.9494333587502,-77.9530715746755,-77.9541892318778,-77.9527787498698,-77.9488394697079,-77.9423777055082,-77.9334067766847,-77.9219470202714,-77.9080257827426,-77.8916773908093,-77.8729431007435,-77.8518710258568,-77.8285160418491,-77.8029396698359,-77.7752099369599,-77.7454012146041,-77.7135940343279,-77.6798748817671,-77.6443359688579,-77.6070749848635,-77.5681948268065,-77.5278033100336,-77.4860128597603,-77.442940184562,-77.3987059328979,-77.353434333861,-77.3072528234578,-77.2602916578161,-77.2126835148139,-77.1645630856988,-77.1160666583425,-77.0673316938327,-77.0184963981521,-76.9696992907321,-76.9210787716889,-76.8727726895615,-76.8249179113656,-76.7776498967624,-76.7311022781092,-76.6854064481187,-76.6406911567976,-76.5970821192691,-76.5547016360082,-76.5136682269321,-76.4740962806909,-76.4360957204052,-76.3997716869825,-76.3652242410356,-76.3325480843029,-76.3018323013521,-76.2731601222258,-76.2466087065637,-76.2222489496141,-76.2001453104284,-76.1803556624144,-76.1629311663101,-76.1479161655347,-76.135348103767,-76.1252574645077,-76.1176677322928,-76.1125953751401,-76.1100498477405,-76.110033614836,-76.1125421941672,-76.1175642183257,-76.1250815147987,-76.1350692034626,-76.1474958107513,-76.1623233997063,-76.1795077150998,-76.1989983428182,-76.2207388826865,-76.2446671339244],"lat":[38.5181322328087,38.4864629447766,38.4559025905774,38.4265331004705,38.3984330874445,38.3716776522377,38.3463381982914,38.3224822569195,38.300173322953,38.2794707010894,38.260429363154,38.2430998164562,38.2275279834029,38.2137550925095,38.2018175809338,38.1917470086373,38.1835699842638,38.1773081028117,38.1729778951611,38.1705907895035,38.1701530847116,38.1716659356734,38.1751253506041,38.1805222003382,38.1878422395941,38.1970661401898,38.2081695361805,38.2211230808738,38.2358925156674,38.2524387506402,38.2707179568133,38.2906816699827,38.3122769060079,38.335446287423,38.3601281812188,38.3862568476204,38.413762599667,38.4425719733718,38.4726079082183,38.5037899377197,38.5360343897412,38.5692545962528,38.6033611121512,38.6382619427549,38.673862779543,38.710067243674,38.7467771367843,38.7838926985316,38.8213128703091,38.8589355645237,38.8966579387912,38.9343766743688,38.971988258109,39.0093892671858,39.0464766558108,39.0831480431292,39.1193020014551,39.1548383439819,39.1896584110804,39.2236653542789,39.2567644170027,39.2888632111427,39.3198719885086,39.3497039062293,39.3782752851543,39.4055058603268,39.4313190226031,39.455642050517,39.4784063315036,39.4995475716316,39.5190059930207,39.5367265181609,39.5526589403965,39.5667580798791,39.5789839243544,39.5893017541991,39.5976822511865,39.6041015905268,39.6085415157923,39.6109893964104,39.6114382674805,39.609886851744,39.6063395636145,39.6008064952507,39.5933033847309,39.583851566466,39.5724779040614,39.5592147059124,39.5440996238917,39.5271755355524,39.5084904103403,39.4880971603705,39.4660534763812,39.4424216495339,39.4172683797785,39.390664571548,39.362685117587,39.3334086717543,39.3029174116703,39.2712967921034,39.2386352900114,39.2050241421654,39.1705570762962,39.1353300367043,39.0994409052761,39.0629892188433,39.0260758838117,38.9888028889736,38.9512730173995,38.913589558285,38.8758560196026,38.8381758423841,38.8006521174286,38.7633873051989,38.7264829596388,38.6900394566065,38.6541557275865,38.6189289993039,38.5844545398315,38.55082541174,38.5181322328087]}]],[[{"lng":[-73.0403996562434,-73.0688603620219,-73.0993685295897,-73.1318394450515,-73.1661834964308,-73.2023064243409,-73.2401095802567,-73.2794901917142,-73.3203416337958,-73.3625537062901,-73.4060129159487,-73.4506027632907,-73.496204033436,-73.5426950904762,-73.5899521749188,-73.6378497037629,-73.6862605727881,-73.7350564606553,-73.7841081344354,-73.8332857561953,-73.8824591902778,-73.9314983109232,-73.9802733098783,-74.0286550036438,-74.0765151400021,-74.1237267034657,-74.1701642192739,-74.2157040555502,-74.2602247232229,-74.303607173284,-74.3457350909476,-74.3864951862387,-74.4257774805209,-74.4634755884422,-74.4994869947478,-74.5337133253795,-74.5660606122489,-74.5964395510409,-74.6247657513727,-74.650959978601,-74.6749483865449,-74.6966627403603,-74.7160406287784,-74.7330256649007,-74.7475676747197,-74.7596228725257,-74.7691540223456,-74.7761305845586,-74.7805288468344,-74.7823320385458,-74.7815304278248,-74.7781214004529,-74.7721095198039,-74.7635065670997,-74.7523315612806,-74.7386107578503,-74.7223776261172,-74.7036728043245,-74.6825440322428,-74.6590460608842,-74.6332405390975,-74.6051958768997,-74.5749870855149,-74.542695594202,-74.5084090440766,-74.4722210592536,-74.4342309957659,-74.3945436688435,-74.3532690592682,-74.310521999645,-74.266421841564,-74.2210921047452,-74.1746601093839,-74.1272565930218,-74.0790153133833,-74.0300726387064,-73.9805671271937,-73.9306390972812,-73.8804301904937,-73.8300829287067,-73.7797402676764,-73.7295451487288,-73.6796400505091,-73.6301665426959,-73.5812648435669,-73.5330733832766,-73.4857283746644,-73.4393633933539,-73.3941089688417,-73.35009218819,-73.3074363138526,-73.2662604170611,-73.2266790280946,-73.1888018046382,-73.1527332193199,-73.1185722673864,-73.0864121953548,-73.0563402513446,-73.0284374576675,-73.0027784061205,-72.9794310763022,-72.958456677149,-72.9399095117655,-72.9238368655122,-72.9102789172002,-72.8992686731448,-72.8908319237321,-72.8849872220659,-72.8817458841834,-72.8811120102579,-72.8830825261413,-72.8876472445499,-72.8947889451462,-72.9044834727372,-72.9166998527747,-72.9314004233284,-72.9485409826803,-72.9680709516885,-72.9899335500628,-73.0140659857009,-73.0403996562434],"lat":[40.3845415117053,40.3536224132909,40.323877564893,40.2953866193152,40.2682257548675,40.2424674873057,40.2181804919451,40.1954294362131,40.1742748228806,40.1547728441857,40.1369752470402,40.1209292094877,40.1066772285601,40.0942570196632,40.0837014276013,40.0750383493366,40.068290668563,40.0634762021598,40.060607658578,40.0596926081991,40.0607334656936,40.0637274843971,40.0686667627078,40.0755382625001,40.0843238395377,40.0950002858556,40.1075393840732,40.1219079735822,40.1380680285446,40.1559767476204,40.1755866553271,40.1968457149202,40.2196974526644,40.2440810933447,40.2699317068497,40.2971803656343,40.3257543128455,40.3555771408719,40.3865689800493,40.4186466972256,40.4517241038612,40.4857121733065,40.5205192668694,40.556051368248,40.5922123258729,40.6289041026659,40.6660270326856,40.7034800840967,40.7411611278589,40.7789672114997,40.8167948372966,40.8545402441592,40.8920996924696,40.9293697511056,40.96624758584,41.0026312482823,41.0384199645031,41.0735144224561,41.1078170572954,41.1412323336686,41.1736670240523,41.2050304821911,41.2352349106943,41.2641956218481,41.2918312907042,41.3180641995188,41.3428204726302,41.3660303008855,41.3876281547527,41.4075529852865,41.4257484121537,41.4421628979646,41.4567499082066,41.4694680561234,41.4802812319457,41.4891587159331,41.496075274755,41.5010112408043,41.5039525741091,41.5048909065769,41.5038235683853,41.5007535964046,41.4956897246172,41.4886463565744,41.4796435200084,41.4687068037933,41.4558672775219,41.4411613940398,41.4246308753472,41.4063225823451,41.3862883689681,41.3645849213049,41.3412735823637,41.3164201631917,41.2900947411029,41.2623714458128,41.2333282343136,41.2030466553535,41.1716116044145,41.1391110700983,41.1056358728493,41.0712793969539,41.036137316758,41.0003073180483,40.9638888155373,40.9269826673826,40.8896908876603,40.8521163576947,40.8143625371253,40.776533175571,40.7387320257238,40.7010625586756,40.6636276822522,40.6265294630936,40.5898688531888,40.5537454215353,40.51825709156,40.4834998848988,40.4495676721008,40.4165519307796,40.3845415117053]}]],[[{"lng":[-70.2636630223688,-70.2942653588592,-70.3269110290886,-70.3615097375448,-70.3979663466789,-70.436181139367,-70.4760500885398,-70.5174651333169,-70.5603144610111,-70.6044827944061,-70.6498516837402,-70.6962998028638,-70.7437032490664,-70.7919358460991,-70.8408694499435,-70.8903742569026,-70.9403191136114,-70.9905718285791,-71.0409994848959,-71.0914687537428,-71.1418462083548,-71.1919986380927,-71.2417933622756,-71.291098543431,-71.3397834996052,-71.387719015374,-71.4347776511764,-71.4808340505807,-71.5257652450705,-71.569450955919,-71.611773892692,-71.6526200478957,-71.6918789872538,-71.7294441350686,-71.7652130540886,-71.799087719271,-71.8309747847939,-71.8607858436403,-71.8884376790407,-71.9138525070307,-71.9369582093488,-71.9576885558709,-71.9759834157528,-71.9917889564294,-72.0050578296028,-72.0157493433354,-72.023829619359,-72.0292717347064,-72.0320558467775,-72.0321693009639,-72.0296067199719,-72.0243700740145,-72.0164687310754,-72.0059194864914,-71.9927465711547,-71.9769816376958,-71.9586637240777,-71.9378391941138,-71.914561654508,-71.888891848111,-71.8608975231931,-71.8306532786444,-71.7982403851284,-71.763746582344,-71.7272658526739,-71.6888981716337,-71.648749235667,-71.6069301679709,-71.5635572031711,-71.5187513517984,-71.4726380456541,-71.4253467652761,-71.3770106508403,-71.3277660979477,-71.2777523398531,-71.2271110177894,-71.1759857411255,-71.1245216391731,-71.0728649065177,-71.0211623437959,-70.9695608958788,-70.9182071894363,-70.8672470718656,-70.8168251535535,-70.7670843554213,-70.718165463657,-70.6702066934899,-70.6233432637947,-70.5777069842337,-70.5334258565543,-70.4906236915598,-70.4494197431612,-70.4099283607984,-70.3722586613979,-70.3365142219017,-70.3027927932717,-70.2711860367375,-70.2417792829178,-70.2146513143143,-70.1898741715382,-70.1675129835023,-70.1476258216825,-70.1302635784328,-70.1154698692214,-70.1032809585465,-70.09372570919,-70.0868255543748,-70.0825944923034,-70.0810391024849,-70.0821585831856,-70.0859448092823,-70.0923824097495,-70.1014488639687,-70.1131146160182,-70.1273432060766,-70.144091418059,-70.163309442594,-70.1849410544497,-70.2089238035214,-70.2351892185012,-70.2636630223688],"lat":[41.9400930426076,41.9098926292894,41.8809208006883,41.8532550641329,41.8269693230803,41.8021336953934,41.7788143419817,41.7570733060552,41.7369683632141,41.7185528825739,41.7018756991033,41.6869809973302,41.6739082065524,41.6626919076712,41.6533617517494,41.6459423903784,41.6404534179278,41.6369093257316,41.6353194682587,41.6356880412985,41.6380140721819,41.6422914220481,41.6485088001541,41.6566497902141,41.6666928887426,41.6786115553663,41.6923742750537,41.7079446322008,41.7252813964958,41.7443386204726,41.7650657486441,41.7874077380908,41.8113051903625,41.8366944945272,41.8635079811841,41.8916740872312,41.9211175311549,41.951759498582,41.9835178378088,42.0163072649888,42.0500395786337,42.0846238830491,42.1199668202913,42.1559728102016,42.1925442980341,42.2295820091612,42.2669852103042,42.3046519766979,42.3424794645632,42.3803641882265,42.4182023011884,42.4558898804082,42.4933232130413,42.5303990848332,42.5670150693428,42.6030698171453,42.6384633441358,42.6730973180384,42.7068753422028,42.7397032357617,42.7714893092094,42.8021446344564,42.8315833084158,42.8597227091794,42.8864837438523,42.9117910871261,42.9355734096934,42.9577635956275,42.9782989478858,42.9971213811242,43.0141776010566,43.0294192696353,43.0428031553779,43.054291268224,43.0638509783611,43.0714551185231,43.0770820693319,43.0807158273197,43.082346055344,43.0819681151814,43.0795830821585,43.0751977417592,43.0688245682233,43.0604816852255,43.0501928088056,43.0379871727905,43.0238994370258,43.0079695788034,42.9902427679412,42.9707692260365,42.9496040704727,42.9268071438226,42.9024428293373,42.8765798532648,42.8492910747802,42.8206532643527,42.7907468714044,42.7596557821446,42.7274670684887,42.6942707289825,42.6601594226714,42.6252281968558,42.5895742096794,42.5532964484918,42.5164954449235,42.4792729875943,42.4417318333675,42.4039754180378,42.3661075673207,42.3282322089875,42.2904530869586,42.2528734781411,42.2155959127627,42.1787218989205,42.1423516520304,42.1065838298237,42.071515273505,42.0372407556473,42.0038527353623,41.971441121252,41.9400930426076]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,["Portland","Seattle","San Francisco","Oakland","Los Angeles","Austin","Washington","New York","Boston"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[29.5652986552201,48.3262721356532],"lng":[-123.705423232532,-70.0810391024849]}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#Using Intersection to group project cities within 50 miles of an office. </span>
<span class='va'>sub_project_cities_sf</span> <span class='op'>=</span> <span class='va'>project_cities_sf</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Intersection only operates with planar coordinates, need to transform to state plane temporarily</span>
  <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>st_transform</a></span><span class='op'>(</span><span class='fl'>2269</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Intersecting with office buffers</span>
  <span class='fu'><a href='https://r-spatial.github.io/sf/reference/geos_binary_ops.html'>st_intersection</a></span><span class='op'>(</span><span class='va'>nn_office_buffers</span> <span class='op'>%&gt;%</span> 
                    <span class='fu'>select</span><span class='op'>(</span><span class='va'>nn_office_id</span>,<span class='va'>city</span>,<span class='va'>geometry</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
                    <span class='fu'>rename</span><span class='op'>(</span>office_city <span class='op'>=</span> <span class='va'>city</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
                    <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>st_transform</a></span><span class='op'>(</span><span class='fl'>2269</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Transform back for mapping</span>
  <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_transform.html'>st_transform</a></span><span class='op'>(</span><span class='fl'>4326</span><span class='op'>)</span>

<span class='co'>#Mapping offices and project cities using groups and layer control. </span>
<span class='co'>#Sizing circle markers for project cities by number of projects. </span>
<span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/leaflet.html'>leaflet</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/addProviderTiles.html'>addProviderTiles</a></span><span class='op'>(</span><span class='st'>'CartoDB.DarkMatter'</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addMarkers</a></span><span class='op'>(</span>data <span class='op'>=</span><span class='va'>nn_offices_sf</span>,icon <span class='op'>=</span> <span class='va'>nn_icon</span>,
             label<span class='op'>=</span><span class='op'>~</span><span class='va'>city</span>,group<span class='op'>=</span><span class='op'>~</span><span class='va'>city</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/map-layers.html'>addCircleMarkers</a></span><span class='op'>(</span>data<span class='op'>=</span><span class='va'>sub_project_cities_sf</span>,
                   radius<span class='op'>=</span><span class='op'>~</span><span class='va'>all</span><span class='op'>*</span><span class='fl'>1.5</span>, label<span class='op'>=</span><span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>city</span>,<span class='st'>": "</span>,<span class='va'>all</span>,<span class='st'>' projects'</span><span class='op'>)</span>,
                   group<span class='op'>=</span><span class='op'>~</span><span class='va'>office_city</span>,
                   fillOpacity <span class='op'>=</span> <span class='fl'>0.7</span>,color<span class='op'>=</span><span class='st'>'white'</span>,opacity <span class='op'>=</span><span class='fl'>0.9</span>,
                   fillColor <span class='op'>=</span> <span class='st'>'#00659A'</span>,weight<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://rdrr.io/pkg/leaflet/man/addLayersControl.html'>addLayersControl</a></span><span class='op'>(</span>baseGroups <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>sub_project_cities_sf</span><span class='op'>$</span><span class='va'>office_city</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<div id="htmlwidget-a81271691a56949f1062" style="width:100%;height:384px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-a81271691a56949f1062">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["CartoDB.DarkMatter",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[45.511791229248,47.6035690307617,37.7771186828613,37.8050804138183,34.0534896850585,30.2675895690917,38.8903694152832,40.7820014953613,42.3586616516113],[-122.675628662109,-122.329452514648,-122.419639587402,-122.273071289062,-118.245323181152,-97.7429885864257,-77.0319595336914,-73.8317031860351,-71.0567398071289],{"iconUrl":{"data":"https://perkinsandwill.github.io/nn_r_training/topics_setup/03_geospatial/graphics/NNlogo_RGB_300dpi_JPEG.jpg","index":0},"iconWidth":33.1,"iconHeight":45,"iconAnchorX":16.55,"iconAnchorY":22.5},null,["Portland","Seattle","San Francisco","Oakland","Los Angeles","Austin","Washington","New York","Boston"],{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["Portland","Seattle","San Francisco","Oakland","Los Angeles","Austin","Washington","New York","Boston"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addCircleMarkers","args":[[45.4846801757811,45.5189895629881,46.1468086242674,45.4451599121092,45.3365097045897,45.5117912292479,44.9332618713377,45.6322097778319,45.3661384582518,45.309730529785,45.1422691345213,45.209201812744,44.9332618713378,47.6100196838211,47.7913017272787,47.5649986266921,47.976589202865,47.5300903320143,47.3802795409983,47.1619491577147,47.0392303466795,47.190441131574,47.6785812377764,47.4755401611158,47.603569030745,47.2551307678046,47.4625015258618,47.5410308837722,47.8253211974937,47.2124786376776,47.6272811889481,48.1942901611176,37.7668304443357,37.8500900268552,37.8872718811033,37.462478637695,38.0528488159177,37.8698806762693,37.6868400573728,37.580268859863,37.9816513061521,38.323360443115,37.3189582824705,37.4729118347165,37.9156303405759,37.8371696472166,37.985168457031,38.2492294311521,37.5611381530758,37.5509109497068,37.4631118774412,37.6713409423826,37.5778007507322,37.9348983764645,37.6754913330076,37.3830795288082,37.3846092224118,37.2213096618649,37.4553184509275,37.9076118469236,37.4328308105465,37.3896713256833,38.2988586425779,37.8050804138181,37.4446601867673,38.2324714660642,37.8245887756345,37.6581916809079,37.4845008850095,37.9378089904783,37.9378089904783,38.1638984680173,38.0327796936033,37.9627113342283,37.5045013427732,37.7771186828611,37.3385810852047,37.728260040283,37.5470314025876,37.9602890014646,37.9745712280271,37.3557395935055,38.4379005432126,38.4017410278318,37.6560592651364,38.2391204833982,37.3717117309567,37.88117980957,37.5888290405271,38.3515281677244,38.1008300781248,37.9011802673337,37.4293098449704,38.4600181579587,37.4313697814938,37.4446601867673,38.1060905456541,37.7499999999997,37.8815116882321,37.9255599975583,37.6945800781248,38.0158309936521,37.5183410644529,37.7668304443357,37.8500900268552,37.8872718811033,37.462478637695,38.0528488159177,37.8698806762693,37.6868400573728,37.580268859863,37.9816513061521,38.323360443115,37.3189582824705,37.4729118347165,37.9156303405759,37.8371696472166,37.985168457031,38.2492294311521,37.5611381530758,37.5509109497068,37.4631118774412,37.6713409423826,37.5778007507322,37.9348983764645,37.6754913330076,37.3830795288082,37.3846092224118,37.2213096618649,37.4553184509275,37.9076118469236,37.4328308105465,37.3896713256833,38.2988586425779,37.8050804138181,37.4446601867673,38.2324714660642,37.8245887756345,37.6581916809079,37.4845008850095,37.9378089904783,37.9378089904783,38.1638984680173,38.0327796936033,37.9627113342283,37.5045013427732,37.7771186828611,37.3385810852047,37.728260040283,37.5470314025876,37.9602890014646,37.9745712280271,37.3557395935055,37.6560592651364,38.2391204833982,37.3717117309567,37.88117980957,37.5888290405271,38.3515281677244,38.1008300781248,37.9011802673337,37.4293098449704,38.4600181579587,37.4313697814938,37.4446601867673,38.1060905456541,37.7499999999997,37.8815116882321,37.9255599975583,37.6945800781248,38.0158309936521,37.5183410644529,33.8327598571773,34.07347869873,34.1816482543941,33.8316116333003,34.0216102600093,34.0706405639644,34.1463317871089,33.6872406005855,34.2076606750484,34.6988983154293,33.7667198181148,34.0534896850581,33.9278297424312,34.0740089416499,33.6168289184566,33.6543998718257,34.5792312622066,34.1474494934078,33.8711204528804,34.0548286437984,33.8444519042964,34.2242088317868,33.6394691467281,34.0115585327144,34.0456809997554,34.1157989501949,34.1072807312007,34.1853599548335,34.099098205566,34.0721397399898,34.0906791687007,34.1493606567378,33.7593002319331,33.8911705017085,34.2233009338374,33.8703193664546,33.7495803833004,34.2870597839351,34.0011901855465,34.1026191711422,33.8052787780758,34.1522598266598,34.0874290466305,34.0960998535152,33.885158538818,34.1066818237301,33.8370513916012,34.1220817565914,30.2675895690912,30.509040832519,29.8832748999995,38.8045997619626,38.9766693115232,38.8785858154294,39.2905807495115,38.9863700866697,38.9807205200193,39.209159851074,38.8417892456052,38.3008918762205,39.1398582458494,38.9696884155271,38.9924392700193,39.0233802795408,38.890369415283,38.9616508483884,39.081661224365,39.0076828002927,38.9812583923337,38.660591125488,38.8854904174803,39.1156692504881,38.9368095397947,38.9250488281248,38.7015419006345,38.9003715515134,40.6924514770505,40.578601837158,40.7263412475583,40.7371597290037,40.8743782043455,40.7174797058103,40.6816711425779,40.5441589355466,40.8174018859861,40.4947700500486,40.9197006225584,40.7820014953612,40.7319717407224,40.7961387634275,40.7812309265134,41.1633796691892,40.5392494201658,41.1833801269529,40.7140007019041,40.5707015991208,40.84215927124,41.1818809509275,41.1136589050291,41.065361022949,41.0337905883788,40.8251991271972,41.039180755615,41.2911682128904,41.0406112670897,40.84215927124,41.1218795776365,41.0519485473631,40.9124488830564,42.4858016967772,42.6580696105956,42.416290283203,41.7406997680663,42.9463806152342,42.3962593078612,42.3586616516112,41.9887313842772,42.0831794738768,42.333469390869,42.3667907714842,42.5982704162596,42.4610099792479,42.570098876953,42.2993278503417,42.3726310729979,42.4081687927245,42.7775993347167,42.3911399841307,42.272060394287,42.7103996276854,42.446319580078,42.8663787841795,42.6458816528319,42.9911689758299,42.4198112487792,42.4571685791014,42.2813110351561,42.3305091857909,42.0660285949706,41.8792190551756,41.8238716125487,42.525909423828,42.999370574951,42.5223999023436,42.3866806030272,42.2977600097655,42.4531402587889,42.2634086608885,42.3150558471678,42.7706489562987,42.5584282999999,42.3937606811522,42.3676109313964,42.2063903808593,42.546489715576],[-122.796043395996,-123.111198425292,-122.950538635253,-122.641510009765,-122.592781066894,-122.675628662109,-123.043807983398,-122.671562194824,-122.647850036621,-122.769355773925,-122.858932495117,-123.199127197266,-123.043807983398,-122.187850952148,-122.228996276855,-122.627471923828,-122.205932617187,-122.033821105957,-122.237419128417,-122.514930725097,-122.891357421875,-122.295639038085,-122.131576538085,-122.204551696777,-122.329452514648,-122.44164276123,-122.255737304687,-122.638473510742,-122.292442321777,-123.105651855469,-122.521003723144,-122.126411437988,-122.245300292968,-122.032386779785,-122.297996520996,-122.197799682617,-122.153511047363,-122.270538330078,-122.402076721191,-122.350662231445,-122.025833129882,-122.708343505859,-122.02928161621,-122.139549255371,-122.311470031738,-122.301750183105,-122.590377807617,-122.043876647949,-122.268882751464,-121.98217010498,-122.429298400878,-122.0855178833,-122.355651855468,-122.535522460937,-121.75821685791,-122.114227294921,-122.138671875,-121.979270935058,-122.178558349609,-122.548187255859,-121.897132873535,-122.081596374511,-122.285217285156,-122.273071289062,-122.160789489746,-122.644439697265,-122.232810974121,-121.877128601074,-122.227722167968,-122.342712402343,-122.342712402343,-121.695999145507,-122.266983032226,-122.555938720703,-122.262290954589,-122.419639587402,-121.885566711425,-122.158508300781,-122.314826965332,-122.342346191406,-122.532470703125,-121.954986572265,-122.712440490722,-122.825248718261,-122.414176940917,-122.036880493164,-122.03800201416,-122.465827941894,-122.027511596679,-121.993263244628,-122.25495147705,-122.061622619628,-122.253097534179,-122.420600891113,-122.168922424316,-122.160789489746,-122.567901611328,-122.282997131348,-122.46647644043,-122.527618408203,-122.085632324218,-121.81974029541,-122.276206970214,-122.245300292968,-122.032386779785,-122.297996520996,-122.197799682617,-122.153511047363,-122.270538330078,-122.402076721191,-122.350662231445,-122.025833129882,-122.708343505859,-122.02928161621,-122.139549255371,-122.311470031738,-122.301750183105,-122.590377807617,-122.043876647949,-122.268882751464,-121.98217010498,-122.429298400878,-122.0855178833,-122.355651855468,-122.535522460937,-121.75821685791,-122.114227294921,-122.138671875,-121.979270935058,-122.178558349609,-122.548187255859,-121.897132873535,-122.081596374511,-122.285217285156,-122.273071289062,-122.160789489746,-122.644439697265,-122.232810974121,-121.877128601074,-122.227722167968,-122.342712402343,-122.342712402343,-121.695999145507,-122.266983032226,-122.555938720703,-122.262290954589,-122.419639587402,-121.885566711425,-122.158508300781,-122.314826965332,-122.342346191406,-122.532470703125,-121.954986572265,-122.414176940917,-122.036880493164,-122.03800201416,-122.465827941894,-122.027511596679,-121.993263244628,-122.25495147705,-122.061622619628,-122.253097534179,-122.420600891113,-122.168922424316,-122.160789489746,-122.567901611328,-122.282997131348,-122.46647644043,-122.527618408203,-122.085632324218,-121.81974029541,-122.276206970214,-117.915718078613,-118.400337219238,-118.30793762207,-118.26212310791,-118.396209716796,-118.030372619628,-118.248641967773,-117.825820922851,-118.207252502441,-118.144783020019,-118.192398071289,-118.245323181152,-118.199272155761,-117.691253662109,-117.930343627929,-117.788208007812,-118.116569519042,-118.144271850585,-117.86139678955,-117.750030517578,-118.387939453125,-118.468299865722,-117.586311340332,-118.492286682128,-118.04418182373,-118.152130126953,-118.056678771972,-118.892776489257,-117.651008605957,-117.938072204589,-118.370933532714,-118.818862915039,-117.986503601074,-117.824317932128,-119.050720214843,-117.929100036621,-117.874298095703,-118.882209777832,-118.154937744141,-117.573852539063,-118.319900512695,-118.693801879883,-117.889907836914,-117.716400146484,-118.161399841309,-117.802978515625,-118.343116760254,-118.105209350585,-97.7429885864257,-97.6772232055664,-97.9413941,-77.0434112548828,-76.4899597167968,-77.0688323974609,-76.609260559082,-77.0969161987304,-76.937271118164,-76.8673095703125,-77.3088684082031,-77.4591369628906,-77.1938171386718,-77.3855514526367,-76.9813537597656,-77.1028518676757,-77.0319595336914,-76.928237915039,-77.1512374877929,-77.3928527832031,-77.0098800659179,-77.2478713989257,-77.1736221313477,-77.565299987793,-77.184928894043,-76.9071807861328,-77.4773330688476,-77.2636489868164,-73.9903564453125,-74.2191467285156,-73.6355895996093,-74.0309677124023,-73.4195098876953,-74.0438537597656,-73.367431640625,-74.3630294799804,-74.2161483764648,-74.4438095092773,-73.7867965698242,-73.8317031860351,-74.1742095947265,-73.6991729736328,-73.6003036499023,-73.86083984375,-74.4714889526367,-74.0565032958984,-73.8299865722656,-74.6193923950195,-72.934211730957,-73.1912689208984,-73.4076538085937,-73.482421875,-73.7634429931641,-73.203483581543,-73.8678665161133,-73.9221115112305,-73.7878875732422,-72.934211730957,-73.7087020874023,-73.5422210693359,-73.8382720947265,-71.4333190917968,-71.1419067382812,-71.1567611694336,-71.3087005615234,-71.5166931152343,-71.1770095825195,-71.0567398071289,-70.9770202636718,-71.0172424316406,-71.1204681396484,-71.1060104370117,-71.3468017578125,-71.3490524291992,-70.9365005493164,-71.0593643188476,-71.015640258789,-71.0544967651367,-71.0765380859375,-71.5676879882812,-70.8586120605468,-71.1607971191406,-71.2237396240234,-71.3747787475586,-71.3128433227539,-71.4630889892578,-71.1087570190429,-71.0640487670898,-71.2360534667968,-71.1994934082031,-71.1015701293945,-71.3824768066406,-71.4119873046875,-71.1037826538086,-70.771858215332,-70.8958129882812,-71.0982589721679,-71.2897415161132,-71.1340789794921,-71.8021926879882,-71.1152725219726,-71.0754318237304,-70.8800489999999,-71.0323715209961,-71.1878814697266,-71.0048065185547,-71.6143569946289],[6,4.5,3,1.5,3,105,40.5,6,1.5,4.5,1.5,1.5,4.5,18,1.5,10.5,16.5,1.5,1.5,4.5,24,1.5,10.5,1.5,166.5,9,3,1.5,1.5,1.5,1.5,1.5,22.5,1.5,4.5,1.5,1.5,46.5,3,3,7.5,1.5,3,7.5,7.5,12,3,6,7.5,4.5,1.5,10.5,1.5,4.5,19.5,10.5,1.5,1.5,12,10.5,6,34.5,10.5,346.5,28.5,3,1.5,6,9,10.5,1.5,1.5,1.5,1.5,42,340.5,64.5,6,54,3,34.5,6,15,1.5,66,13.5,9,7.5,7.5,3,13.5,10.5,1.5,1.5,3,1.5,1.5,1.5,1.5,1.5,1.5,1.5,1.5,22.5,1.5,4.5,1.5,1.5,46.5,3,3,7.5,1.5,3,7.5,7.5,12,3,6,7.5,4.5,1.5,10.5,1.5,4.5,19.5,10.5,1.5,1.5,12,10.5,6,34.5,10.5,346.5,28.5,3,1.5,6,9,10.5,1.5,1.5,1.5,1.5,42,340.5,64.5,6,54,3,34.5,6,66,13.5,9,7.5,7.5,3,13.5,10.5,1.5,1.5,3,1.5,1.5,1.5,1.5,1.5,1.5,1.5,1.5,3,10.5,6,1.5,9,6,13.5,4.5,1.5,7.5,16.5,93,1.5,3,6,10.5,3,19.5,4.5,4.5,1.5,1.5,1.5,42,1.5,7.5,1.5,6,3,4.5,9,3,1.5,1.5,1.5,4.5,0,1.5,3,3,1.5,1.5,1.5,1.5,1.5,1.5,1.5,1.5,49.5,3,0,10.5,3,22.5,10.5,1.5,1.5,1.5,13.5,10.5,7.5,1.5,1.5,3,192,13.5,6,3,1.5,1.5,1.5,3,1.5,1.5,3,1.5,21,1.5,1.5,6,1.5,3,3,1.5,1.5,1.5,4.5,106.5,13.5,1.5,1.5,1.5,1.5,1.5,1.5,1.5,4.5,0,0,1.5,3,1.5,1.5,1.5,1.5,1.5,1.5,1.5,1.5,4.5,1.5,4.5,4.5,1.5,10.5,160.5,1.5,1.5,9,21,1.5,3,1.5,0,1.5,6,6,1.5,3,3,6,3,9,3,12,3,3,10.5,1.5,1.5,31.5,3,0,4.5,22.5,3,7.5,1.5,1.5,0,3,3,1.5,1.5,1.5],null,["Portland","Portland","Portland","Portland","Portland","Portland","Portland","Portland","Portland","Portland","Portland","Portland","Portland","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","Seattle","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","San Francisco","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Oakland","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Los Angeles","Austin","Austin","Austin","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","Washington","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","New York","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston","Boston"],{"interactive":true,"className":"","stroke":true,"color":"white","weight":3,"opacity":0.9,"fill":true,"fillColor":"#00659A","fillOpacity":0.7},null,null,null,null,["Beaverton: 4 projects","Forest Grove: 3 projects","Longview: 2 projects","Milwaukie: 1 projects","Oregon City: 2 projects","Portland: 70 projects","Salem: 27 projects","Vancouver: 4 projects","West Linn: 1 projects","Wilsonville: 3 projects","Woodburn: 1 projects","McMinville: 1 projects","Salem: 3 projects","Bellevue: 12 projects","Bothell: 1 projects","Bremerton: 7 projects","Everett: 11 projects","Issaquah: 1 projects","Kent: 1 projects","Lakewood: 3 projects","Olympia: 16 projects","Puyallup: 1 projects","Redmond: 7 projects","Renton: 1 projects","Seattle: 111 projects","Tacoma: 6 projects","Tukwila: 2 projects","Port Orchard: 1 projects","Lynnwood: 1 projects","Shelton: 1 projects","Bainbridge Island: 1 projects","Arlington: 1 projects","Alameda: 15 projects","Alamo: 1 projects","Albany: 3 projects","Atherton: 1 projects","Benicia: 1 projects","Berkeley: 31 projects","Brisbane: 2 projects","Burlingame: 2 projects","Concord: 5 projects","Cotati: 1 projects","Cupertino: 2 projects","East Palo Alto: 5 projects","El Cerrito: 5 projects","Emeryville: 8 projects","Fairfax: 2 projects","Fairfield: 4 projects","Foster City: 5 projects","Fremont: 3 projects","Half Moon Bay: 1 projects","Hayward: 7 projects","Hillsborough: 1 projects","Larkspur: 3 projects","Livermore: 13 projects","Los Altos: 7 projects","Los Altos Hills: 1 projects","Los Gatos: 1 projects","Menlo Park: 8 projects","Mill Valley: 7 projects","Milpitas: 4 projects","Mountain View: 23 projects","Napa: 7 projects","Oakland: 231 projects","Palo Alto: 19 projects","Petaluma: 2 projects","Piedmont: 1 projects","Pleasanton: 4 projects","Redwood City: 6 projects","Richmond: 7 projects","Richmond Hill: 1 projects","Rio Vista: 1 projects","Rodeo: 1 projects","Ross: 1 projects","San Carlos: 28 projects","San Francisco: 227 projects","San Jose: 43 projects","San Leandro: 4 projects","San Mateo: 36 projects","San Pablo: 2 projects","San Rafael: 23 projects","Santa Clara: 4 projects","Santa Rosa: 10 projects","Sebastopol: 1 projects","South San Francisco: 44 projects","Suisun City: 9 projects","Sunnyvale: 6 projects","Tiburon: 5 projects","Union City: 5 projects","Vacaville: 2 projects","Vallejo: 9 projects","Walnut Creek: 7 projects","Woodside: 1 projects","Rutherford: 1 projects","Stanford: 2 projects","Palo Alto: 1 projects","Novato: 1 projects","Bay Area: 1 projects","Tuburon: 1 projects","Corte Madera: 1 projects","Castro Valley: 1 projects","Antioch: 1 projects","Belmont: 1 projects","Alameda: 15 projects","Alamo: 1 projects","Albany: 3 projects","Atherton: 1 projects","Benicia: 1 projects","Berkeley: 31 projects","Brisbane: 2 projects","Burlingame: 2 projects","Concord: 5 projects","Cotati: 1 projects","Cupertino: 2 projects","East Palo Alto: 5 projects","El Cerrito: 5 projects","Emeryville: 8 projects","Fairfax: 2 projects","Fairfield: 4 projects","Foster City: 5 projects","Fremont: 3 projects","Half Moon Bay: 1 projects","Hayward: 7 projects","Hillsborough: 1 projects","Larkspur: 3 projects","Livermore: 13 projects","Los Altos: 7 projects","Los Altos Hills: 1 projects","Los Gatos: 1 projects","Menlo Park: 8 projects","Mill Valley: 7 projects","Milpitas: 4 projects","Mountain View: 23 projects","Napa: 7 projects","Oakland: 231 projects","Palo Alto: 19 projects","Petaluma: 2 projects","Piedmont: 1 projects","Pleasanton: 4 projects","Redwood City: 6 projects","Richmond: 7 projects","Richmond Hill: 1 projects","Rio Vista: 1 projects","Rodeo: 1 projects","Ross: 1 projects","San Carlos: 28 projects","San Francisco: 227 projects","San Jose: 43 projects","San Leandro: 4 projects","San Mateo: 36 projects","San Pablo: 2 projects","San Rafael: 23 projects","Santa Clara: 4 projects","South San Francisco: 44 projects","Suisun City: 9 projects","Sunnyvale: 6 projects","Tiburon: 5 projects","Union City: 5 projects","Vacaville: 2 projects","Vallejo: 9 projects","Walnut Creek: 7 projects","Woodside: 1 projects","Rutherford: 1 projects","Stanford: 2 projects","Palo Alto: 1 projects","Novato: 1 projects","Bay Area: 1 projects","Tuburon: 1 projects","Corte Madera: 1 projects","Castro Valley: 1 projects","Antioch: 1 projects","Belmont: 1 projects","Anaheim: 2 projects","Beverly Hills: 7 projects","Burbank: 4 projects","Carson City: 1 projects","Culver City: 6 projects","El Monte: 4 projects","Glendale: 9 projects","Irvine: 3 projects","La Canada Flintridge: 1 projects","Lancaster: 5 projects","Long Beach: 11 projects","Los Angeles: 62 projects","Lynwood: 1 projects","Montclair: 2 projects","Newport Beach: 4 projects","Orange: 7 projects","Palmdale: 2 projects","Pasadena: 13 projects","Placentia: 3 projects","Pomona: 3 projects","Redondo Beach: 1 projects","San Fernando: 1 projects","Santa Isabel: 1 projects","Santa Monica: 28 projects","South El Monte: 1 projects","South Pasadena: 5 projects","Temple City: 1 projects","Thousand Oaks: 4 projects","Upland: 2 projects","West Covina: 3 projects","West Hollywood: 6 projects","Westlake Village: 2 projects","Westminster: 1 projects","Yorba Linda: 1 projects","Camarillo: 1 projects","Fullerton: 3 projects","Santa Ana: 0 projects","Moorpark: 1 projects","Commerce: 2 projects","Rancho Cucamonga: 2 projects","Lomita: 1 projects","Calabasas: 1 projects","Covina: 1 projects","Claremont: 1 projects","Paramount: 1 projects","San Dimas: 1 projects","Torrance: 1 projects","San Marino: 1 projects","Austin: 33 projects","Round Rock: 2 projects","San Marcos: 0 projects","Alexandria: 7 projects","Annapolis: 2 projects","Arlington: 15 projects","Baltimore: 7 projects","Bethesda: 1 projects","College Park: 1 projects","Columbia: 1 projects","Fairfax: 9 projects","Fredericksburg: 7 projects","Gaithersburg: 5 projects","Herndon: 1 projects","Langley Park: 1 projects","North Bethesda: 2 projects","Washington: 128 projects","Riverdale: 9 projects","Rockville: 4 projects","Sterling: 2 projects","Takoma Park: 1 projects","Woodbridge: 1 projects","Falls Church: 1 projects","Leesburg: 2 projects","McLean: 1 projects","Cheverly: 1 projects","Prince William: 2 projects","Vienna: 1 projects","Brooklyn: 14 projects","Carteret: 1 projects","Garden City: 1 projects","Hoboken: 4 projects","Huntington: 1 projects","Jersey City: 2 projects","Lindenhurst: 2 projects","Metuchen: 1 projects","Montclair: 1 projects","New Brunswick: 1 projects","New Rochelle: 3 projects","New York: 71 projects","Newark: 9 projects","North Hempstead: 1 projects","Old Westbury: 1 projects","Ossining: 1 projects","Piscataway: 1 projects","Pomona: 1 projects","Queens: 1 projects","Somerville: 1 projects","Yaphank: 3 projects","Bridgeport: 0 projects","Norwalk: 0 projects","Darien: 1 projects","White Plains: 2 projects","Hauppauge: 1 projects","Irvington: 1 projects","Peekskill: 1 projects","Greenburgh: 1 projects","Yahphank: 1 projects","Armonk: 1 projects","Stamford: 1 projects","Mt. Vernon: 1 projects","Acton: 3 projects","Andover: 1 projects","Arlington: 3 projects","Barrington: 3 projects","Bedford: 1 projects","Belmont: 7 projects","Boston: 107 projects","Bridgewater: 1 projects","Brockton: 1 projects","Brookline: 6 projects","Cambridge: 14 projects","Chelmsford: 1 projects","Concord: 2 projects","Danvers: 1 projects","Dorchester: 0 projects","E Boston: 1 projects","Everett: 4 projects","Haverhill: 4 projects","Hudson: 1 projects","Hull: 2 projects","Lawrence: 2 projects","Lexington: 4 projects","Londonderry: 2 projects","Lowell: 6 projects","Manchester: 2 projects","Medford: 8 projects","Melrose: 2 projects","Needham: 2 projects","Newton: 7 projects","North Easton: 1 projects","Pawtucket: 1 projects","Providence: 21 projects","Reading: 2 projects","Rye: 0 projects","Salem: 3 projects","Somerville: 15 projects","Wellesley: 2 projects","Winchester: 5 projects","Worcester: 1 projects","Jamaica Plain: 1 projects","Bradford: 0 projects","Beverly: 2 projects","Chelsea: 2 projects","Watertown: 1 projects","Braintree: 1 projects","Devens: 1 projects"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]},{"method":"addLayersControl","args":[["Portland","Seattle","San Francisco","Oakland","Los Angeles","Austin","Washington","New York","Boston"],[],{"collapsed":true,"autoZIndex":true,"position":"topright"}]}],"limits":{"lat":[29.8832748999995,48.1942901611176],"lng":[-123.199127197266,-70.771858215332]}},"evals":[],"jsHooks":[]}</script>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#Create a summary for plotting</span>
<span class='va'>summ_project_cities_by_office</span> <span class='op'>=</span> <span class='va'>sub_project_cities_sf</span> <span class='op'>%&gt;%</span>
  <span class='co'>#Use the as_tibble() function to get rid of sf features -- otherwise geometries will not come off in select function. </span>
  <span class='fu'>as_tibble</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>office_city</span>,<span class='va'>transit</span><span class='op'>:</span><span class='va'>other</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#pivot by project type</span>
  <span class='fu'>pivot_longer</span><span class='op'>(</span><span class='va'>transit</span><span class='op'>:</span><span class='va'>other</span>,names_to<span class='op'>=</span><span class='st'>'sector'</span>,values_to<span class='op'>=</span><span class='st'>'num_projects'</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#filter out project types where num_projects is 0</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>num_projects</span><span class='op'>&gt;</span><span class='fl'>0</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>office_city</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='co'>#computed proportion of projects for second of below plots</span>
  <span class='fu'>mutate</span><span class='op'>(</span>prop_projects <span class='op'>=</span> <span class='va'>num_projects</span><span class='op'>/</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>num_projects</span><span class='op'>)</span><span class='op'>)</span> 

<span class='co'>#Plot projects by office and sector</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>summ_project_cities_by_office</span>,
       <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>office_city</span>,y<span class='op'>=</span><span class='va'>num_projects</span>,fill<span class='op'>=</span><span class='va'>sector</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>geom_col</span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>ggtitle</span><span class='op'>(</span><span class='st'>'Local Projects by Office and Sector'</span><span class='op'>)</span>
</code></pre>
</div>
<img src="geospatial-data_files/figure-html5/unnamed-chunk-72-4.png" width="100%" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#Use proportion to create a 100% bar plot</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>summ_project_cities_by_office</span>,
       <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>office_city</span>,y<span class='op'>=</span><span class='va'>prop_projects</span>,fill<span class='op'>=</span><span class='va'>sector</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>geom_col</span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>coord_flip</span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span>
  <span class='co'>#Use percent labels function from scales package</span>
  <span class='fu'>scale_y_continuous</span><span class='op'>(</span>labels<span class='op'>=</span><span class='fu'>scales</span><span class='fu'>::</span><span class='va'><a href='https://scales.r-lib.org//reference/label_percent.html'>percent</a></span>,name<span class='op'>=</span><span class='st'>'Proportion of Projects'</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>ggtitle</span><span class='op'>(</span><span class='st'>'Proportion of Local Projects by Office and Sector'</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="geospatial-data_files/figure-html5/unnamed-chunk-72-5.png" width="100%" /></p>
</div>
<h1 id="reference-materials">Reference Materials</h1>
<h2 id="further-reading-1">Further Reading</h2>
<ul>
<li><a href="https://geocompr.robinlovelace.net/">Geocomputation with R (web version)</a></li>
<li><a href="http://gis.humboldt.edu/OLM/r/Spatial%20Analysis%20With%20R.pdf">Applied Spatial Data Analysis with R (PDF version)</a></li>
<li><a href="https://uk.sagepub.com/en-gb/eur/an-introduction-to-r-for-spatial-analysis-and-mapping/book258267">An Introduction to R for Spatial Analysis and Mapping (available where books are sold)</a></li>
</ul>
<h2 id="cheat-sheets">Cheat Sheets</h2>
<h3 id="simple-features-sf-cheat-sheet">Simple Features (sf) Cheat Sheet</h3>
<p><a href="https://github.com/rstudio/cheatsheets/raw/master/sf.pdf"><img src="graphics/sf.png" alt="Simple Features (sf)" /></a></p>
<h3 id="leaflet-for-r-cheat-sheet">Leaflet for R Cheat Sheet</h3>
<p><a href="https://github.com/rstudio/cheatsheets/raw/master/leaflet.pdf"><img src="graphics/leaflet-cheatsheet-1.png" alt="Leaflet" /></a></p>
<h2 id="related-datacamp-courses">Related DataCamp Courses</h2>
<ul>
<li><a href="https://learn.datacamp.com/skill-tracks/spatial-data-with-r">Spatial data with R (4 courses, 16 hours, includes leaflet course noted below)</a></li>
<li><a href="https://www.datacamp.com/courses/interactive-maps-with-leaflet-in-r">Interactive Maps with leaflet (1 course, 4 hours)</a></li>
</ul>
<p><em>This content was presented to Nelson\Nygaard Staff at a Lunch and Learn webinar on Friday, September 4th, 2020, and is <a href="https://web.microsoftstream.com/video/d331753a-e974-4561-a00c-9145fb77bdb4">available as a recording here</a> and embedded at the top of this page</em></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
